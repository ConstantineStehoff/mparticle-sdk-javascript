(function () {
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};











var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

var Utilities = function () {
    function Utilities() {
        classCallCheck(this, Utilities);
    }

    createClass(Utilities, [{
        key: 'createXHR',
        value: function createXHR(cb, logDebug) {
            var xhr;

            try {
                xhr = new window.XMLHttpRequest();
            } catch (e) {
                logDebug('Error creating XMLHttpRequest object.');
            }

            if (xhr && cb && "withCredentials" in xhr) {
                xhr.onreadystatechange = cb;
            } else if (typeof window.XDomainRequest != 'undefined') {
                logDebug('Creating XDomainRequest object');

                try {
                    xhr = new window.XDomainRequest();
                    xhr.onload = cb;
                } catch (e) {
                    logDebug('Error creating XDomainRequest object');
                }
            }

            return xhr;
        }
    }, {
        key: 'createServiceUrl',
        value: function createServiceUrl(serviceScheme, secureServiceUrl, serviceUrl, devToken) {
            return serviceScheme + (window.location.protocol === 'https:' ? secureServiceUrl : serviceUrl) + devToken;
        }
    }, {
        key: 'inArray',
        value: function inArray(items, name) {
            var result = items.findIndex(name);
            return result !== -1;
        }
    }, {
        key: 'isUIWebView',
        value: function isUIWebView(navigator) {
            return (/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)
            );
        }
    }, {
        key: 'isWebViewEmbedded',
        value: function isWebViewEmbedded(navigator) {
            return window.external && typeof window.external.Notify === 'unknown' || window.mParticleAndroid || isUIWebView(navigator) || window.mParticle.isIOS;
        }
    }]);
    return Utilities;
}();

var utilities = new Utilities();

var Cookie = function () {
    function Cookie() {
        classCallCheck(this, Cookie);

        this.config = {};
        this.value = {};
    }

    createClass(Cookie, [{
        key: 'getCookie',
        value: function getCookie() {
            var cookies = window.document.cookie.split('; ');
            var result = this.config.CookieName ? undefined : {};

            logDebug(InformationMessages.CookieSearch);

            for (var i = 0; i < cookies.length; i++) {
                var parts = cookies[i].split('=');
                var name = decoded(parts.shift());
                var _cookie = decoded(parts.join('='));

                if (this.config.CookieName && this.config.CookieName === name) {
                    result = converted(_cookie);
                    break;
                }

                if (!this.config.CookieName) {
                    result[name] = converted(_cookie);
                }
            }

            if (result) {
                logDebug(InformationMessages.CookieFound);

                try {
                    var obj = JSON.parse(result);

                    // Longer names are for backwards compatibility
                    sessionId = obj.sid || obj.SessionId || sessionId;
                    isEnabled = typeof obj.ie != 'undefined' ? obj.ie : obj.IsEnabled;
                    sessionAttributes = obj.sa || obj.SessionAttributes || sessionAttributes;
                    userAttributes = obj.ua || obj.UserAttributes || userAttributes;
                    userIdentities = obj.ui || obj.UserIdentities || userIdentities;
                    serverSettings = obj.ss || obj.ServerSettings || serverSettings;
                    devToken = obj.dt || obj.DeveloperToken || devToken;

                    clientId = obj.cgid || generateUniqueId();

                    if (isEnabled !== false || isEnabled !== true) {
                        isEnabled = true;
                    }

                    if (obj.les) {
                        lastEventSent = new Date(obj.les);
                    } else if (obj.LastEventSent) {
                        lastEventSent = new Date(obj.LastEventSent);
                    }
                } catch (e) {
                    logDebug(ErrorMessages.CookieParseError);
                }
            }
        }
    }, {
        key: 'setCookie',
        value: function setCookie(config, value) {
            this.config = config;
            this.value = value;
            var date = new Date();
            var expires = new Date(date.getTime() + this.config.CookieExpiration * 24 * 60 * 60 * 1000).toGMTString();
            var domain = this.config.CookieDomain ? ';domain=' + this.config.CookieDomain : '';

            logDebug(InformationMessages.CookieSet);

            window.document.cookie = encodeURIComponent(this.config.CookieName) + '=' + encodeURIComponent(JSON.stringify(this.value)) + ';expires=' + expires + ';path=/' + domain;
        }
    }]);
    return Cookie;
}();

var cookie = new Cookie();

//
//  Copyright 2015 mParticle, Inc.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.
//
//  Uses portions of code from jQuery
//  jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license

var serviceUrl = "jssdk.mparticle.com/v1/JS/";
var secureServiceUrl = "jssdks.mparticle.com/v1/JS/";
var serviceScheme = window.location.protocol + '//';
var sdkVersion = '1.8.7';
var isEnabled$1 = true;
var sessionAttributes$1 = {};
var userAttributes$1 = {};
var userIdentities$1 = [];
var forwarderConstructors = [];
var forwarders = [];
var sessionId$1;
var clientId$1;
var devToken$1;
var serverSettings$1 = null;
var lastEventSent$1;
var currentPosition;
var isTracking = false;
var watchPositionId;
var readyQueue = [];
var isInitialized = false;
var productsBags = {};
var cartProducts = [];
var currencyCode = null;
var appVersion = null;
var appName = null;
var customFlags = null;
var METHOD_NAME = '$MethodName';
var LOG_LTV = 'LogLTVIncrease';
var RESERVED_KEY_LTV = '$Amount';

// forEach polyfill
// Production steps of ECMA-262, Edition 5, 15.4.4.18
// Reference: http://es5.github.io/#x15.4.4.18
// 
if (!Array.prototype.forEach) {
    Array.prototype.forEach = function (callback, thisArg) {
        var T, k;

        if (this == null) {
            throw new TypeError(' this is null or not defined');
        }

        var O = Object(this);
        var len = O.length >>> 0;

        if (typeof callback !== "function") {
            throw new TypeError(callback + ' is not a function');
        }

        if (arguments.length > 1) {
            T = thisArg;
        }

        k = 0;

        while (k < len) {
            var kValue;
            if (k in O) {
                kValue = O[k];
                callback.call(T, kValue, k, O);
            }
            k++;
        }
    };
}

// Production steps of ECMA-262, Edition 5, 15.4.4.19
// Reference: http://es5.github.io/#x15.4.4.19
if (!Array.prototype.map) {
    Array.prototype.map = function (callback, thisArg) {
        var T, A, k;

        if (this === null) {
            throw new TypeError(" this is null or not defined");
        }

        var O = Object(this);
        var len = O.length >>> 0;

        if (typeof callback !== "function") {
            throw new TypeError(callback + " is not a function");
        }

        if (arguments.length > 1) {
            T = thisArg;
        }

        A = new Array(len);

        k = 0;

        while (k < len) {

            var kValue, mappedValue;

            if (k in O) {

                kValue = O[k];

                mappedValue = callback.call(T, kValue, k, O);

                A[k] = mappedValue;
            }

            k++;
        }

        return A;
    };
}

// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray
if (!Array.isArray) {
    Array.isArray = function (arg) {
        return Object.prototype.toString.call(arg) === '[object Array]';
    };
}

// Standalone version of jQuery.extend, from https://github.com/dansdom/extend
function extend() {
    var options,
        name,
        src,
        copy,
        copyIsArray,
        clone,
        target = arguments[0] || {},
        i = 1,
        length = arguments.length,
        deep = false,

    // helper which replicates the jquery internal functions
    objectHelper = {
        hasOwn: Object.prototype.hasOwnProperty,
        class2type: {},
        type: function type(obj) {
            return obj == null ? String(obj) : objectHelper.class2type[Object.prototype.toString.call(obj)] || "object";
        },
        isPlainObject: function isPlainObject(obj) {
            if (!obj || objectHelper.type(obj) !== "object" || obj.nodeType || objectHelper.isWindow(obj)) {
                return false;
            }

            try {
                if (obj.constructor && !objectHelper.hasOwn.call(obj, "constructor") && !objectHelper.hasOwn.call(obj.constructor.prototype, "isPrototypeOf")) {
                    return false;
                }
            } catch (e) {
                return false;
            }

            var key;
            for (key in obj) {}

            return key === undefined || objectHelper.hasOwn.call(obj, key);
        },
        isArray: Array.isArray || function (obj) {
            return objectHelper.type(obj) === "array";
        },
        isFunction: function isFunction(obj) {
            return objectHelper.type(obj) === "function";
        },
        isWindow: function isWindow(obj) {
            return obj != null && obj == obj.window;
        }
    }; // end of objectHelper

    // Handle a deep copy situation
    if (typeof target === "boolean") {
        deep = target;
        target = arguments[1] || {};
        // skip the boolean and the target
        i = 2;
    }

    // Handle case when target is a string or something (possible in deep copy)
    if ((typeof target === 'undefined' ? 'undefined' : _typeof(target)) !== "object" && !objectHelper.isFunction(target)) {
        target = {};
    }

    // If no second argument is used then this can extend an object that is using this method
    if (length === i) {
        target = this;
        --i;
    }

    for (; i < length; i++) {
        // Only deal with non-null/undefined values
        if ((options = arguments[i]) != null) {
            // Extend the base object
            for (name in options) {
                src = target[name];
                copy = options[name];

                // Prevent never-ending loop
                if (target === copy) {
                    continue;
                }

                // Recurse if we're merging plain objects or arrays
                if (deep && copy && (objectHelper.isPlainObject(copy) || (copyIsArray = objectHelper.isArray(copy)))) {
                    if (copyIsArray) {
                        copyIsArray = false;
                        clone = src && objectHelper.isArray(src) ? src : [];
                    } else {
                        clone = src && objectHelper.isPlainObject(src) ? src : {};
                    }

                    // Never move original objects, clone them
                    target[name] = extend(deep, clone, copy);

                    // Don't bring in undefined values
                } else if (copy !== undefined) {
                    target[name] = copy;
                }
            }
        }
    }

    // Return the modified object
    return target;
}

function tryNativeSdk(path, value) {
    if (window.mParticleAndroid) {
        logDebug$1(InformationMessages$1.SendAndroid + path);
        window.mParticleAndroid[path](value);

        return true;
    } else if (window.mParticle.isIOS || utilities.isUIWebView(navigator)) {
        logDebug$1(InformationMessages$1.SendIOS + path);
        var iframe = document.createElement("IFRAME");
        iframe.setAttribute("src", 'mp-sdk://' + path + '/' + value);
        document.documentElement.appendChild(iframe);
        iframe.parentNode.removeChild(iframe);
        iframe = null;

        return true;
    }

    return false;
}

function send(event) {
    var xhr,
        xhrCallback = function xhrCallback() {
        if (xhr.readyState === 4) {
            logDebug$1('Received ' + xhr.statusText + ' from server');

            parseResponse(xhr.responseText);
        }
    };

    logDebug$1(InformationMessages$1.SendBegin);

    if (!event) {
        logDebug$1(ErrorMessages$1.EventEmpty);
        return;
    }

    if (!tryNativeSdk(NativeSdkPaths.LogEvent, JSON.stringify(event))) {
        logDebug$1(InformationMessages$1.SendHttp);

        xhr = utilities.createXHR(xhrCallback, logDebug$1);

        if (xhr) {
            try {
                xhr.open('post', utilities.createServiceUrl(serviceScheme, secureServiceUrl, serviceUrl, devToken$1) + '/Events');
                xhr.send(JSON.stringify(convertEventToDTO(event)));

                sendEventToForwarders(event);
            } catch (e) {
                logDebug$1('Error sending event to mParticle servers.');
            }
        }
    }
}

function sendForwardingStats(forwarder, event) {
    var xhr, forwardingStat;

    if (forwarder && forwarder.isVisible) {
        xhr = utilities.createXHR(logDebug$1);
        forwardingStat = JSON.stringify({
            mid: forwarder.id,
            n: event.EventName,
            attrs: event.EventAttributes,
            sdk: event.SDKVersion,
            dt: event.EventDataType,
            et: event.EventCategory,
            dbg: event.Debug,
            ct: event.Timestamp,
            eec: event.ExpandedEventCount
        });

        if (xhr) {
            try {
                xhr.open('post', utilities.createServiceUrl(serviceScheme, secureServiceUrl, serviceUrl, devToken$1) + '/Forwarding');
                xhr.send(forwardingStat);
            } catch (e) {
                logDebug$1('Error sending forwarding stats to mParticle servers.');
            }
        }
    }
}

function applyToForwarders(functionName, functionArgs) {
    if (forwarders) {
        for (var i = 0; i < forwarders.length; i++) {
            var forwarderFunction = forwarders[i][functionName];

            if (forwarderFunction) {
                try {
                    var result = forwarders[i][functionName](forwarders[i], functionArgs);

                    if (result) {
                        logDebug$1(result);
                    }
                } catch (e) {
                    logDebug$1(e);
                }
            }
        }
    }
}

function sendEventToForwarders(event) {
    var clonedEvent,
        hashedName,
        hashedType,
        filterUserAttributes = function filterUserAttributes(event, filterList) {
        var hash;

        if (event.UserAttributes) {
            for (var attrName in event.UserAttributes) {
                if (event.UserAttributes.hasOwnProperty(attrName)) {
                    hash = generateHash(attrName);

                    if (utilities.inArray(filterList, hash)) {
                        delete event.UserAttributes[attrName];
                    }
                }
            }
        }
    },
        filterUserIdentities = function filterUserIdentities(event, filterList) {
        if (event.UserIdentities && event.UserIdentities.length > 0) {
            for (var i = 0; i < event.UserIdentities.length; i++) {
                if (utilities.inArray(filterList, event.UserIdentities[i].Type)) {
                    event.UserIdentities.splice(i, 1);

                    if (i > 0) {
                        i--;
                    }
                }
            }
        }
    },
        filterAttributes = function filterAttributes(event, filterList) {
        var hash;

        if (!filterList) {
            return;
        }

        for (var attrName in event.EventAttributes) {
            if (event.EventAttributes.hasOwnProperty(attrName)) {
                hash = generateHash(event.EventCategory + event.EventName + attrName);

                if (utilities.inArray(filterList, hash)) {
                    delete event.EventAttributes[attrName];
                }
            }
        }
    },
        inFilteredList = function inFilteredList(filterList, hash) {
        if (filterList && filterList.length > 0) {
            if (utilities.inArray(filterList, hash)) {
                return true;
            }
        }

        return false;
    },
        forwardingRuleMessageTypes = [MessageType.PageEvent, MessageType.PageView, MessageType.Commerce];

    if (!utilities.isWebViewEmbedded(navigator) && forwarders) {
        hashedName = generateHash(event.EventCategory + event.EventName);
        hashedType = generateHash(event.EventCategory);

        for (var i = 0; i < forwarders.length; i++) {
            if (event.Debug === true && forwarders[i].isSandbox === false && forwarders[i].hasSandbox === true) {
                continue;
            } else if (event.Debug === false && forwarders[i].isSandbox === true) {
                continue;
            }

            // Check attribute forwarding rule. This rule allows users to only forward an event if a 
            // specific attribute exists and has a specific value. Alternatively, they can specify 
            // that an event not be forwarded if the specified attribute name and value exists.
            // The two cases are controlled by the "includeOnMatch" boolean value.
            // Supported message types for attribute forwarding rules are defined in the forwardingRuleMessageTypes array

            if (forwardingRuleMessageTypes.indexOf(event.EventDataType) > -1 && forwarders[i].filteringEventAttributeValue && forwarders[i].filteringEventAttributeValue.eventAttributeName && forwarders[i].filteringEventAttributeValue.eventAttributeValue) {

                var foundProp = null;

                // Attempt to find the attribute in the collection of event attributes
                if (event.EventAttributes) {
                    for (var prop in event.EventAttributes) {
                        var hashedName = generateHash(prop);

                        if (hashedName == forwarders[i].filteringEventAttributeValue.eventAttributeName) {
                            foundProp = {
                                name: hashedName,
                                value: generateHash(event.EventAttributes[prop])
                            };
                        }

                        break;
                    }
                }

                var isMatch = foundProp != null && foundProp.value == forwarders[i].filteringEventAttributeValue.eventAttributeValue;

                var shouldInclude = forwarders[i].filteringEventAttributeValue.includeOnMatch === true ? isMatch : !isMatch;

                if (!shouldInclude) {
                    continue;
                }
            }

            // Clone the event object, as we could be sending different attributes to each forwarder
            clonedEvent = {};
            clonedEvent = extend(true, clonedEvent, event);

            // Check event filtering rules
            if (event.EventDataType == MessageType.PageEvent && (inFilteredList(forwarders[i].eventNameFilters, hashedName) || inFilteredList(forwarders[i].eventTypeFilters, hashedType))) {
                continue;
            } else if (event.EventDataType == MessageType.Commerce && inFilteredList(forwarders[i].eventTypeFilters, hashedType)) {
                continue;
            } else if (event.EventDataType == MessageType.PageView && inFilteredList(forwarders[i].pageViewFilters, hashedName)) {
                continue;
            }

            // Check attribute filtering rules
            if (clonedEvent.EventAttributes) {
                if (event.EventDataType == MessageType.PageEvent) {
                    filterAttributes(clonedEvent, forwarders[i].attributeFilters);
                } else if (event.EventDataType == MessageType.PageView) {
                    filterAttributes(clonedEvent, forwarders[i].pageViewAttributeFilters);
                }
            }

            // Check user identity filtering rules
            filterUserIdentities(clonedEvent, forwarders[i].userIdentityFilters);

            // Check user attribute filtering rules
            filterUserAttributes(clonedEvent, forwarders[i].userAttributeFilters);

            logDebug$1('Sending message to forwarder: ' + forwarders[i].name);
            var result = forwarders[i].process(clonedEvent);

            if (result) {
                logDebug$1(result);
            }
        }
    }
}

function initForwarders() {
    if (!utilities.isWebViewEmbedded(navigator) && forwarders) {

        // Some js libraries require that they be loaded first, or last, etc
        forwarders.sort(function (x, y) {
            x.settings.PriorityValue = x.settings.PriorityValue || 0;
            y.settings.PriorityValue = y.settings.PriorityValue || 0;
            return -1 * (x.settings.PriorityValue - y.settings.PriorityValue);
        });

        for (var i = 0; i < forwarders.length; i++) {
            if (forwarders[i].isSandbox === mParticle.isSandbox || !forwarders[i].isSandbox && !forwarders[i].hasSandbox) {
                forwarders[i].init(forwarders[i].settings, sendForwardingStats, false, null, userAttributes$1, userIdentities$1, appVersion, appName, customFlags, clientId$1);
            }
        }
    }
}

function parseResponse(responseText) {
    var now = new Date(),
        settings,
        prop,
        fullProp;

    if (!responseText) {
        return;
    }

    try {
        logDebug$1('Parsing response from server');

        settings = JSON.parse(responseText);

        if (settings && settings.Store) {
            logDebug$1('Parsed store from response, updating local settings');

            if (serverSettings$1 === null) {
                serverSettings$1 = {};
            }

            for (prop in settings.Store) {
                if (!settings.Store.hasOwnProperty(prop)) {
                    continue;
                }

                fullProp = settings.Store[prop];

                if (!fullProp.Value || new Date(fullProp.Expires) < now) {
                    // This setting should be deleted from the local store if it exists

                    if (serverSettings$1.hasOwnProperty(prop)) {
                        delete serverSettings$1[prop];
                    }
                } else {
                    // This is a valid setting

                    serverSettings$1[prop] = fullProp;
                }
            }

            cookie.setCookie(Config, {
                sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
                ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
                les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
                av: appVersion,
                cgid: clientId$1
            });
        }
    } catch (e) {
        logDebug$1("Error parsing JSON response from server: " + e.name);
    }
}

function startTracking() {
    if (!isTracking) {
        if ("geolocation" in navigator) {
            watchPositionId = navigator.geolocation.watchPosition(function (position) {
                currentPosition = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
            });

            isTracking = true;
        }
    }
}

function stopTracking() {
    if (isTracking) {
        navigator.geolocation.clearWatch(watchPositionId);
        currentPosition = null;
        isTracking = false;
    }
}

function convertCustomFlags(event, dto) {
    var valueArray = [];
    dto.flags = {};

    for (var prop in event.CustomFlags) {
        valueArray = [];

        if (event.CustomFlags.hasOwnProperty(prop)) {
            if (Array.isArray(event.CustomFlags[prop])) {
                for (var i = 0; i < event.CustomFlags[prop].length; i++) {
                    if (typeof event.CustomFlags[prop][i] === 'number' || typeof event.CustomFlags[prop][i] === 'string' || typeof event.CustomFlags[prop][i] === 'boolean') {
                        valueArray.push(event.CustomFlags[prop][i].toString());
                    }
                }
            } else if (typeof event.CustomFlags[prop] === 'number' || typeof event.CustomFlags[prop] === 'string' || typeof event.CustomFlags[prop] === 'boolean') {
                valueArray.push(event.CustomFlags[prop].toString());
            }

            if (valueArray.length > 0) {
                dto.flags[prop] = valueArray;
            }
        }
    }
}

function convertEventToDTO(event) {
    var dto = {
        n: event.EventName,
        et: event.EventCategory,
        ua: event.UserAttributes,
        sa: event.SessionAttributes,
        ui: event.UserIdentities,
        str: event.Store,
        attrs: event.EventAttributes,
        sdk: event.SDKVersion,
        sid: event.SessionId,
        dt: event.EventDataType,
        dbg: event.Debug,
        ct: event.Timestamp,
        lc: event.Location,
        o: event.OptOut,
        eec: event.ExpandedEventCount,
        av: event.AppVersion,
        cgid: event.ClientGeneratedId
    };

    if (event.CustomFlags) {
        convertCustomFlags(event, dto);
    }

    dto.pb = convertProductBagToDTO();

    if (event.EventDataType == MessageType.Commerce) {
        dto.cu = currencyCode;

        if (event.ShoppingCart) {
            dto.sc = {
                pl: convertProductListToDTO(event.ShoppingCart.ProductList)
            };
        }

        if (event.ProductAction) {
            dto.pd = {
                an: event.ProductAction.ProductActionType,
                cs: event.ProductAction.CheckoutStep,
                co: event.ProductAction.CheckoutOptions,
                pl: convertProductListToDTO(event.ProductAction.ProductList),
                ti: event.ProductAction.TransactionId,
                ta: event.ProductAction.Affiliation,
                tcc: event.ProductAction.CouponCode,
                tr: event.ProductAction.TotalAmount,
                ts: event.ProductAction.ShippingAmount,
                tt: event.ProductAction.TaxAmount
            };
        } else if (event.PromotionAction) {
            dto.pm = {
                an: event.PromotionAction.PromotionActionType,
                pl: event.PromotionAction.PromotionList.map(function (promotion) {
                    return {
                        id: promotion.Id,
                        nm: promotion.Name,
                        cr: promotion.Creative,
                        ps: promotion.Position == null ? 0 : promotion.Position
                    };
                })
            };
        } else if (event.ProductImpressions) {
            dto.pi = event.ProductImpressions.map(function (impression) {
                return {
                    pil: impression.ProductImpressionList,
                    pl: convertProductListToDTO(impression.ProductList)
                };
            });
        }
    } else if (event.EventDataType == MessageType.Profile) {
        dto.pet = event.ProfileMessageType;
    }

    return dto;
}

function convertProductListToDTO(productList) {
    if (!productList) {
        return [];
    }

    return productList.map(function (product) {
        return convertProductToDTO(product);
    });
}

function convertProductToDTO(product) {
    return {
        id: product.Sku,
        nm: product.Name,
        pr: product.Price == null ? 0 : product.Price,
        qt: product.Quantity == null ? 0 : product.Quantity,
        br: product.Brand,
        va: product.Variant,
        ca: product.Category,
        ps: product.Position == null ? 0 : product.Position,
        cc: product.CouponCode,
        tpa: product.TotalAmount == null ? 0 : product.TotalAmount,
        attrs: product.Attributes
    };
}

function convertProductBagToDTO() {
    var convertedBag = {},
        list;

    for (var prop in productsBags) {
        if (!productsBags.hasOwnProperty(prop)) {
            continue;
        }

        list = productsBags[prop].map(function (item) {
            return convertProductToDTO(item);
        });

        if (utilities.isWebViewEmbedded(navigator)) {
            convertedBag[prop] = {
                ProductList: list
            };
        } else {
            convertedBag[prop] = {
                pl: list
            };
        }
    }

    return convertedBag;
}

function convertTransactionAttributesToProductAction(transactionAttributes, productAction) {
    productAction.TransactionId = transactionAttributes.Id;
    productAction.Affiliation = transactionAttributes.Affiliation;
    productAction.CouponCode = transactionAttributes.CouponCode;
    productAction.TotalAmount = transactionAttributes.Revenue;
    productAction.ShippingAmount = transactionAttributes.Shipping;
    productAction.TaxAmount = transactionAttributes.Tax;
}

function createEventObject(messageType, name, data, eventType, customFlags) {
    var optOut = messageType == MessageType.OptOut ? !isEnabled$1 : null;

    if (sessionId$1 || messageType == MessageType.OptOut) {
        lastEventSent$1 = new Date();

        return {
            EventName: name ? name : messageType,
            EventCategory: eventType,
            UserAttributes: userAttributes$1,
            SessionAttributes: sessionAttributes$1,
            UserIdentities: userIdentities$1,
            Store: serverSettings$1,
            EventAttributes: data,
            SDKVersion: sdkVersion,
            SessionId: sessionId$1,
            EventDataType: messageType,
            Debug: mParticle.isSandbox,
            Timestamp: lastEventSent$1.getTime(),
            Location: currentPosition,
            OptOut: optOut,
            ProductBags: productsBags,
            ExpandedEventCount: 0,
            CustomFlags: customFlags,
            AppVersion: appVersion,
            ClientGeneratedId: clientId$1
        };
    }

    return null;
}

function getProductActionEventName(productActionType) {
    switch (productActionType) {
        case ProductActionType.AddToCart:
            return 'AddToCart';
        case ProductActionType.AddToWishlist:
            return 'AddToWishlist';
        case ProductActionType.Checkout:
            return 'Checkout';
        case ProductActionType.Click:
            return 'Click';
        case ProductActionType.Purchase:
            return 'Purchase';
        case ProductActionType.Refund:
            return 'Refund';
        case ProductActionType.RemoveFromCart:
            return 'RemoveFromCart';
        case ProductActionType.RemoveFromWishlist:
            return 'RemoveFromWishlist';
        case ProductActionType.ViewDetail:
            return 'ViewDetail';
        case ProductActionType.Unknown:
        default:
            return 'Unknown';
    }
}

function getPromotionActionEventName(promotionActionType) {
    switch (promotionActionType) {
        case PromotionActionType.PromotionClick:
            return 'PromotionClick';
        case PromotionActionType.PromotionView:
            return 'PromotionView';
        default:
            return 'Unknown';
    }
}

function convertProductActionToEventType(productActionType) {
    switch (productActionType) {
        case ProductActionType.AddToCart:
            return CommerceEventType.ProductAddToCart;
        case ProductActionType.AddToWishlist:
            return CommerceEventType.ProductAddToWishlist;
        case ProductActionType.Checkout:
            return CommerceEventType.ProductCheckout;
        case ProductActionType.Click:
            return CommerceEventType.ProductClick;
        case ProductActionType.Purchase:
            return CommerceEventType.ProductPurchase;
        case ProductActionType.Refund:
            return CommerceEventType.ProductRefund;
        case ProductActionType.RemoveFromCart:
            return CommerceEventType.ProductRemoveFromCart;
        case ProductActionType.RemoveFromWishlist:
            return CommerceEventType.ProductRemoveFromWishlist;
        case ProductActionType.Unknown:
            return EventType.Unknown;
        case ProductActionType.ViewDetail:
            return CommerceEventType.ProductViewDetail;
        default:
            logDebug$1('Could not convert product action type ' + productActionType + ' to event type');
            return null;
    }
}

function convertPromotionActionToEventType(promotionActionType) {
    switch (promotionActionType) {
        case PromotionActionType.PromotionClick:
            return CommerceEventType.PromotionClick;
        case PromotionActionType.PromotionView:
            return CommerceEventType.PromotionView;
        default:
            logDebug$1('Could not convert promotion action type ' + promotionActionType + ' to event type');
            return null;
    }
}

function expandProductAction(commerceEvent) {
    var appEvents = [];
    if (commerceEvent.ProductAction == null) {
        return appEvents;
    }
    var shouldExtractActionAttributes = false;
    if (commerceEvent.ProductAction.ProductActionType == ProductActionType.Purchase || commerceEvent.ProductAction.ProductActionType == ProductActionType.Refund) {
        var attributes = commerceEvent.EventAttributes || {};
        extractActionAttributes(attributes, commerceEvent.ProductAction);
        if (commerceEvent.CurrencyCode != null) {
            attributes['Currency Code'] = commerceEvent.CurrencyCode;
        }
        var plusOneEvent = createEventObject(MessageType.PageEvent, generateExpandedEcommerceName(ProductActionType.getExpansionName(commerceEvent.ProductAction.ProductActionType), true), attributes, EventType.Transaction);
        appEvents.push(plusOneEvent);
    } else {
        shouldExtractActionAttributes = true;
    }
    var products = commerceEvent.ProductAction.ProductList;
    if (products == null) {
        return appEvents;
    }
    for (var i = 0; i < products.length; i++) {
        var attributes = products[i].Attributes || {};
        if (shouldExtractActionAttributes) {
            extractActionAttributes(attributes, commerceEvent.ProductAction);
        } else {
            extractTransactionId(attributes, commerceEvent.ProductAction);
        }
        extractProductAttributes(attributes, products[i]);

        var productEvent = createEventObject(MessageType.PageEvent, generateExpandedEcommerceName(ProductActionType.getExpansionName(commerceEvent.ProductAction.ProductActionType)), attributes, EventType.Transaction);
        appEvents.push(productEvent);
    }
    return appEvents;
}

function extractProductAttributes(attributes, product) {
    if (product.CouponCode != null) attributes['Coupon Code'] = product.CouponCode;

    if (product.Brand != null) attributes['Brand'] = product.Brand;

    if (product.Category != null) attributes['Category'] = product.Category;

    if (product.Name != null) attributes['Name'] = product.Name;

    if (product.Sku != null) attributes['Id'] = product.Sku;

    if (product.Price != null) attributes['Item Price'] = product.Price;

    if (product.Quantity != null) attributes['Quantity'] = product.Quantity;

    if (product.Position != null) attributes['Position'] = product.Position;

    if (product.Variant != null) attributes['Variant'] = product.Variant;

    attributes['Total Product Amount'] = product.TotalAmount != null ? product.TotalAmount : 0;
}

function extractTransactionId(attributes, productAction) {
    if (productAction.TransactionId != null) attributes['Transaction Id'] = productAction.TransactionId;
}

function extractActionAttributes(attributes, productAction) {
    extractTransactionId(attributes, productAction);

    if (productAction.Affiliation != null) attributes['Affiliation'] = productAction.Affiliation;

    if (productAction.CouponCode != null) attributes['Coupon Code'] = productAction.CouponCode;

    if (productAction.TotalAmount != null) attributes['Total Amount'] = productAction.TotalAmount;

    if (productAction.ShippingAmount != null) attributes['Shipping Amount'] = productAction.ShippingAmount;

    if (productAction.TaxAmount != null) attributes['Tax Amount'] = productAction.TaxAmount;

    if (productAction.CheckoutOptions != null) attributes['Checkout Options'] = productAction.CheckoutOptions;

    if (productAction.CheckoutStep != null) attributes['Checkout Step'] = productAction.CheckoutStep;
}

function expandPromotionAction(commerceEvent) {
    var appEvents = [];
    if (commerceEvent.PromotionAction == null) {
        return appEvents;
    }
    var promotions = commerceEvent.PromotionAction.PromotionList;
    for (var i = 0; i < promotions.length; i++) {
        var attributes = commerceEvent.EventAttributes || {};
        extractPromotionAttributes(attributes, promotions[i]);

        var appEvent = createEventObject(MessageType.PageEvent, generateExpandedEcommerceName(PromotionActionType.getExpansionName(commerceEvent.PromotionAction.PromotionActionType)), attributes, EventType.Transaction);
        appEvents.push(appEvent);
    }
    return appEvents;
}

function generateExpandedEcommerceName(eventName, plusOne) {
    return 'eCommerce - ' + eventName + ' - ' + (plusOne ? "Total" : "Item");
}

function extractPromotionAttributes(attributes, promotion) {
    if (promotion.Id != null) attributes['Id'] = promotion.Id;

    if (promotion.Creative != null) attributes['Creative'] = promotion.Creative;

    if (promotion.Name != null) attributes['Name'] = promotion.Name;

    if (promotion.Position != null) attributes['Position'] = promotion.Position;
}

function expandProductImpression(commerceEvent) {
    var appEvents = [];
    if (commerceEvent.ProductImpressions == null) {
        return appEvents;
    }
    for (var i = 0; i < commerceEvent.ProductImpressions.length; i++) {
        if (commerceEvent.ProductImpressions[i].ProductList != null) {
            for (var productIndex = 0; productIndex < commerceEvent.ProductImpressions[i].ProductList.length; productIndex++) {
                var product = commerceEvent.ProductImpressions[i].ProductList[productIndex];
                var attributes = commerceEvent.EventAttributes || {};
                if (product.Attributes != null) {
                    for (var attribute in product.Attributes) {
                        attributes[attribute] = product.Attributes[attribute];
                    }
                }
                extractProductAttributes(attributes, product);
                if (commerceEvent.ProductImpressions[i].ProductImpressionList != null) {
                    attributes['Product Impression List'] = commerceEvent.ProductImpressions[i].ProductImpressionList;
                }
                var appEvent = createEventObject(MessageType.PageEvent, generateExpandedEcommerceName('Impression'), attributes, EventType.Transaction);
                appEvents.push(appEvent);
            }
        }
    }
    return appEvents;
}

function _expandCommerceEvent(event) {
    if (event == null) {
        return null;
    }
    return expandProductAction(event).concat(expandPromotionAction(event)).concat(expandProductImpression(event));
}

function createCommerceEventObject() {
    var baseEvent;

    logDebug$1(InformationMessages$1.StartingLogCommerceEvent);

    if (canLog()) {
        if (!sessionId$1) {
            mParticle.startNewSession();
        }

        baseEvent = createEventObject(MessageType.Commerce);
        baseEvent.EventName = 'eCommerce - ';
        baseEvent.CurrencyCode = currencyCode;
        baseEvent.ShoppingCart = {
            ProductList: cartProducts
        };

        return baseEvent;
    } else {
        logDebug$1(InformationMessages$1.AbandonLogEvent);
    }

    return null;
}

function logCheckoutEvent(step, options, attrs) {
    var event = createCommerceEventObject();

    if (event) {
        event.EventName += getProductActionEventName(ProductActionType.Checkout);
        event.EventCategory = CommerceEventType.ProductCheckout;
        event.ProductAction = {
            ProductActionType: ProductActionType.Checkout,
            CheckoutStep: step,
            CheckoutOptions: options,
            ProductList: event.ShoppingCart.ProductList
        };

        logCommerceEvent(event, attrs);
    }
}

function logProductActionEvent(productActionType, product, attrs) {
    var event = createCommerceEventObject();

    if (event) {
        event.EventCategory = convertProductActionToEventType(productActionType);
        event.EventName += getProductActionEventName(productActionType);
        event.ProductAction = {
            ProductActionType: productActionType,
            ProductList: Array.isArray(product) ? product : [product]
        };

        logCommerceEvent(event, attrs);
    }
}

function logPurchaseEvent(transactionAttributes, product, attrs) {
    var event = createCommerceEventObject();

    if (event) {
        event.EventName += getProductActionEventName(ProductActionType.Purchase);
        event.EventCategory = CommerceEventType.ProductPurchase;
        event.ProductAction = {
            ProductActionType: ProductActionType.Purchase
        };
        event.ProductAction.ProductList = buildProductList(event, product);

        convertTransactionAttributesToProductAction(transactionAttributes, event.ProductAction);

        logCommerceEvent(event, attrs);
    }
}

function logRefundEvent(transactionAttributes, product, attrs) {
    if (transactionAttributes == null || typeof transactionAttributes == 'undefined') {
        logDebug$1(ErrorMessages$1.TransactionRequired);
        return;
    }

    var event = createCommerceEventObject();

    if (event) {
        event.EventName += getProductActionEventName(ProductActionType.Refund);
        event.EventCategory = CommerceEventType.ProductRefund;
        event.ProductAction = {
            ProductActionType: ProductActionType.Refund
        };
        event.ProductAction.ProductList = buildProductList(event, product);

        convertTransactionAttributesToProductAction(transactionAttributes, event.ProductAction);

        logCommerceEvent(event, attrs);
    }
}

function buildProductList(event, product) {
    if (product) {
        if (Array.isArray(product)) {
            return product;
        }

        return [product];
    }

    return event.ShoppingCart.ProductList;
}

function logPromotionEvent(promotionType, promotion, attrs) {
    var event = createCommerceEventObject();

    if (event) {
        event.EventName += getPromotionActionEventName(promotionType);
        event.EventCategory = convertPromotionActionToEventType(promotionType);
        event.PromotionAction = {
            PromotionActionType: promotionType,
            PromotionList: [promotion]
        };

        logCommerceEvent(event, attrs);
    }
}

function logImpressionEvent(impression, attrs) {
    var event = createCommerceEventObject();

    if (event) {
        event.EventName += 'Impression';
        event.EventCategory = CommerceEventType.ProductImpression;
        event.ProductImpressions = [{
            ProductImpressionList: impression.Name,
            ProductList: [impression.Product]
        }];

        logCommerceEvent(event, attrs);
    }
}

function logOptOut() {
    logDebug$1(InformationMessages$1.StartingLogOptOut);

    send(createEventObject(MessageType.OptOut, null, null, EventType.Other));
}

function _logEvent(type, name, data, category, cflags) {
    logDebug$1(InformationMessages$1.StartingLogEvent + ': ' + name);

    if (canLog()) {
        if (!sessionId$1) {
            mParticle.startNewSession();
        }

        if (data) {
            data = sanitizeAttributes(data);
        }

        send(createEventObject(type, name, data, category, cflags));
        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });
    } else {
        logDebug$1(InformationMessages$1.AbandonLogEvent);
    }
}

function logCommerceEvent(commerceEvent, attrs) {
    logDebug$1(InformationMessages$1.StartingLogCommerceEvent);

    if (canLog()) {
        if (!sessionId$1) {
            mParticle.startNewSession();
        }

        if (utilities.isWebViewEmbedded(navigator)) {
            // Don't send shopping cart or product bags to parent sdks
            commerceEvent.ShoppingCart = {};
            commerceEvent.ProductBags = {};
        }

        if (attrs) {
            commerceEvent.EventAttributes = attrs;
        }

        send(commerceEvent);
        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });
    } else {
        logDebug$1(InformationMessages$1.AbandonLogEvent);
    }
}

function logLogOutEvent() {
    var evt;

    logDebug$1(InformationMessages$1.StartingLogEvent + ': logOut');

    if (canLog()) {
        if (!sessionId$1) {
            mParticle.startNewSession();
        }

        evt = createEventObject(MessageType.Profile);
        evt.ProfileMessageType = ProfileMessageType.Logout;

        send(evt);
        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });

        return evt;
    } else {
        logDebug$1(InformationMessages$1.AbandonLogEvent);
    }
}

function generateRandomValue(a) {
    if (window.hasOwnProperty('crypto')) {
        if (window.crypto && window.crypto.getRandomValues) {
            return (a ^ window.crypto.getRandomValues(new Uint8Array(1))[0] % 16 >> a / 4).toString(16);
        }
    }

    return (a ^ Math.random() * 16 >> a / 4).toString(16);
}

function generateUniqueId$1(a) {
    // https://gist.github.com/jed/982883
    // Added support for crypto for better random

    return a // if the placeholder was passed, return
    ? generateRandomValue(a) // a random number 
    : ( // or otherwise a concatenated string:
    [1e7] + // 10000000 +
    -1e3 + // -1000 +
    -4e3 + // -4000 +
    -8e3 + // -80000000 +
    -1e11 // -100000000000,
    ).replace( // replacing
    /[018]/g, // zeroes, ones, and eights with
    generateUniqueId$1 // random hex digits
    );
}

function logDebug$1(msg) {
    if (mParticle.isDebug && window.console && window.console.log) {
        window.console.log(msg);
    }
}

function isEventType(type) {
    for (var prop in EventType) {
        if (EventType.hasOwnProperty(prop)) {
            if (EventType[prop] === type) {
                return true;
            }
        }
    }
    return false;
}

function mergeConfig(config) {
    logDebug$1(InformationMessages$1.LoadingConfig);

    for (var prop in DefaultConfig) {
        if (DefaultConfig.hasOwnProperty(prop)) {
            Config[prop] = DefaultConfig[prop];
        }

        if (config.hasOwnProperty(prop)) {
            Config[prop] = config[prop];
        }
    }
}

function canLog() {
    if (isEnabled$1 && (devToken$1 || utilities.isWebViewEmbedded(navigator))) {
        return true;
    }

    return false;
}

function isObject(value) {
    return Object.prototype.toString.call(value) === "[object Object]";
}

function addEventHandler(domEvent, selector, eventName, data, eventType) {
    var elements = [],
        handler = function handler(e) {
        var timeoutHandler = function timeoutHandler() {
            if (element.href) {
                window.location.href = element.href;
            } else if (element.submit) {
                element.submit();
            }
        };

        logDebug$1('DOM event triggered, handling event');

        _logEvent(MessageType.PageEvent, typeof eventName === 'function' ? eventName(element) : eventName, typeof data === 'function' ? data(element) : data, eventType ? eventType : EventType.Other);

        // TODO: Handle middle-clicks and special keys (ctrl, alt, etc)
        if (element.href && element.target != '_blank' || element.submit) {
            // Give xmlhttprequest enough time to execute before navigating a link or submitting form

            if (e.preventDefault) {
                e.preventDefault();
            } else {
                e.returnValue = false;
            }

            setTimeout(timeoutHandler, Config.Timeout);
        }
    },
        element,
        i;

    if (!selector) {
        logDebug$1('Can\'t bind event, selector is required');
        return;
    }

    // Handle a css selector string or a dom element
    if (typeof selector === 'string') {
        elements = document.querySelectorAll(selector);
    } else if (selector.nodeType) {
        elements = [selector];
    }

    if (elements.length > 0) {
        logDebug$1('Found ' + elements.length + ' element' + (elements.length > 1 ? 's' : '') + ', attaching event handlers');

        for (i = 0; i < elements.length; i++) {
            element = elements[i];

            if (element.addEventListener) {
                element.addEventListener(domEvent, handler, false);
            } else if (element.attachEvent) {
                element.attachEvent('on' + domEvent, handler);
            } else {
                element['on' + domEvent] = handler;
            }
        }
    } else {
        logDebug$1('No elements found');
    }
}

function generateHash(name) {
    var hash = 0,
        i = 0,
        character;

    if (!name) {
        return null;
    }

    name = name.toString().toLowerCase();

    if (Array.prototype.reduce) {
        return name.split("").reduce(function (a, b) {
            a = (a << 5) - a + b.charCodeAt(0);return a & a;
        }, 0);
    }

    if (name.length === 0) {
        return hash;
    }

    for (i = 0; i < name.length; i++) {
        character = name.charCodeAt(i);
        hash = (hash << 5) - hash + character;
        hash = hash & hash;
    }

    return hash;
}

function _createProduct(name, sku, price, quantity, brand, variant, category, position, couponCode, attributes) {

    if (!name) {
        logDebug$1('Name is required when creating a product');
        return null;
    }

    if (!sku) {
        logDebug$1('SKU is required when creating a product');
        return null;
    }

    if (price !== price || price === null) {
        logDebug$1('Price is required when creating a product');
        return null;
    }

    if (!quantity) {
        quantity = 1;
    }

    return {
        Name: name,
        Sku: sku,
        Price: price,
        Quantity: quantity,
        Brand: brand,
        Variant: variant,
        Category: category,
        Position: position,
        CouponCode: couponCode,
        TotalAmount: quantity * price,
        Attributes: attributes
    };
}

function _createPromotion(id, creative, name, position) {
    return {
        Id: id,
        Creative: creative,
        Name: name,
        Position: position
    };
}

function _createImpression(name, product) {
    if (!name) {
        logDebug$1('Name is required when creating an impression.');
        return null;
    }

    if (!product) {
        logDebug$1('Product is required when creating an impression.');
        return null;
    }

    return {
        Name: name,
        Product: product
    };
}

function _createTransactionAttributes(id, affiliation, couponCode, revenue, shipping, tax) {

    if (id === null || typeof id == 'undefined') {
        logDebug$1(ErrorMessages$1.TransactionIdRequired);
        return null;
    }

    return {
        Id: id,
        Affiliation: affiliation,
        CouponCode: couponCode,
        Revenue: revenue,
        Shipping: shipping,
        Tax: tax
    };
}

function callSetUserAttributeOnForwarders(key, value) {
    if (forwarders) {
        for (var i = 0; i < forwarders.length; i++) {
            if (forwarders[i].setUserAttribute && forwarders[i].userAttributeFilters && !utilities.inArray(forwarders[i].userAttributeFilters, generateHash(key))) {

                try {
                    var result = forwarders[i].setUserAttribute(key, value);

                    if (result) {
                        logDebug$1(result);
                    }
                } catch (e) {
                    logDebug$1(e);
                }
            }
        }
    }
}

function findKeyInObject(obj, key) {
    if (key && obj) {
        for (var prop in obj) {
            if (obj.hasOwnProperty(prop) && prop.toLowerCase() === key.toLowerCase()) {
                return prop;
            }
        }
    }

    return null;
}

function isValidAttributeValue(value) {
    return !isObject(value) && !Array.isArray(value);
}

function sanitizeAttributes(attrs) {
    if (!attrs || !isObject(attrs)) {
        return null;
    }

    var sanitizedAttrs = {};

    for (var prop in attrs) {
        // Make sure that attribute values are not objects or arrays, which are not valid
        if (attrs.hasOwnProperty(prop) && isValidAttributeValue(attrs[prop])) {
            sanitizedAttrs[prop] = attrs[prop];
        }
    }

    return sanitizedAttrs;
}

var MessageType = {
    SessionStart: 1,
    SessionEnd: 2,
    PageView: 3,
    PageEvent: 4,
    CrashReport: 5,
    OptOut: 6,
    Profile: 14,
    Commerce: 16
};

var EventType = {
    Unknown: 0,
    Navigation: 1,
    Location: 2,
    Search: 3,
    Transaction: 4,
    UserContent: 5,
    UserPreference: 6,
    Social: 7,
    Other: 8,
    Media: 9
};

var ProfileMessageType = {
    Logout: 3
};

EventType.getName = function (id) {
    switch (id) {
        case EventType.Navigation:
            return 'Navigation';
        case EventType.Location:
            return 'Location';
        case EventType.Search:
            return 'Search';
        case EventType.Transaction:
            return 'Transaction';
        case EventType.UserContent:
            return 'User Content';
        case EventType.UserPreference:
            return 'User Preference';
        case EventType.Social:
            return 'Social';
        case EventType.Media:
            return 'Media';
        case CommerceEventType.ProductAddToCart:
            return 'Product Added to Cart';
        case CommerceEventType.ProductAddToWishlist:
            return 'Product Added to Wishlist';
        case CommerceEventType.ProductCheckout:
            return 'Product Checkout';
        case CommerceEventType.ProductCheckoutOption:
            return 'Product Checkout Options';
        case CommerceEventType.ProductClick:
            return 'Product Click';
        case CommerceEventType.ProductImpression:
            return 'Product Impression';
        case CommerceEventType.ProductPurchase:
            return 'Product Purchased';
        case CommerceEventType.ProductRefund:
            return 'Product Refunded';
        case CommerceEventType.ProductRemoveFromCart:
            return 'Product Removed From Cart';
        case CommerceEventType.ProductRemoveFromWishlist:
            return 'Product Removed from Wishlist';
        case CommerceEventType.ProductViewDetail:
            return 'Product View Details';
        case CommerceEventType.PromotionClick:
            return 'Promotion Click';
        case CommerceEventType.PromotionView:
            return 'Promotion View';
        default:
            return 'Other';
    }
};

// Continuation of enum above, but in seperate object since we don't expose these to end user
var CommerceEventType = {
    ProductAddToCart: 10,
    ProductRemoveFromCart: 11,
    ProductCheckout: 12,
    ProductCheckoutOption: 13,
    ProductClick: 14,
    ProductViewDetail: 15,
    ProductPurchase: 16,
    ProductRefund: 17,
    PromotionView: 18,
    PromotionClick: 19,
    ProductAddToWishlist: 20,
    ProductRemoveFromWishlist: 21,
    ProductImpression: 22
};

var IdentityType = {
    Other: 0,
    CustomerId: 1,
    Facebook: 2,
    Twitter: 3,
    Google: 4,
    Microsoft: 5,
    Yahoo: 6,
    Email: 7,
    Alias: 8,
    FacebookCustomAudienceId: 9
};

IdentityType.getName = function (identityType) {
    switch (identityType) {
        case window.mParticle.IdentityType.CustomerId:
            return 'Customer ID';
        case window.mParticle.IdentityType.Facebook:
            return 'Facebook ID';
        case window.mParticle.IdentityType.Twitter:
            return 'Twitter ID';
        case window.mParticle.IdentityType.Google:
            return 'Google ID';
        case window.mParticle.IdentityType.Microsoft:
            return 'Microsoft ID';
        case window.mParticle.IdentityType.Yahoo:
            return 'Yahoo ID';
        case window.mParticle.IdentityType.Email:
            return 'Email';
        case window.mParticle.IdentityType.Alias:
            return 'Alias ID';
        case window.mParticle.IdentityType.FacebookCustomAudienceId:
            return 'Facebook App User ID';
        default:
            return 'Other ID';
    }
};

var DefaultConfig = {
    CookieName: 'mprtcl-api', // Name of the cookie stored on the user's machine
    CookieDomain: null, // If null, defaults to current location.host
    Debug: false, // If true, will print debug messages to browser console
    CookieExpiration: 365, // Cookie expiration time in days
    Verbose: false, // Whether the server will return verbose responses
    IncludeReferrer: true, // Include user's referrer
    IncludeGoogleAdwords: true, // Include utm_source and utm_properties
    Timeout: 300, // Timeout in milliseconds for logging functions
    SessionTimeout: 30, // Session timeout in minutes
    Sandbox: false, // Events are marked as debug and only forwarded to debug forwarders,
    Version: null // The version of this website/app
};

var Config = {};

var ErrorMessages$1 = {
    NoToken: 'A token must be specified.',
    EventNameInvalidType: 'Event name must be a valid string value.',
    EventDataInvalidType: 'Event data must be a valid object hash.',
    LoggingDisabled: 'Event logging is currently disabled.',
    CookieParseError: 'Could not parse cookie',
    EventEmpty: 'Event object is null or undefined, cancelling send',
    NoEventType: 'Event type must be specified.',
    TransactionIdRequired: 'Transaction ID is required',
    TransactionRequired: 'A transaction attributes object is required',
    BadAttribute: 'Attribute value cannot be object or array'
};

var InformationMessages$1 = {
    CookieSearch: 'Searching for cookie',
    CookieFound: 'Cookie found, parsing values',
    CookieSet: 'Setting cookie',
    SendBegin: 'Starting to send event',
    SendWindowsPhone: 'Sending event to Windows Phone container',
    SendIOS: 'Calling iOS path: ',
    SendAndroid: 'Calling Android JS interface method: ',
    SendHttp: 'Sending event to mParticle HTTP service',
    StartingNewSession: 'Starting new Session',
    StartingLogEvent: 'Starting to log event',
    StartingLogOptOut: 'Starting to log user opt in/out',
    StartingEndSession: 'Starting to end session',
    StartingInitialization: 'Starting to initialize',
    StartingLogCommerceEvent: 'Starting to log commerce event',
    LoadingConfig: 'Loading configuration options',
    AbandonLogEvent: 'Cannot log event, logging disabled or developer token not set',
    AbandonStartSession: 'Cannot start session, logging disabled or developer token not set',
    AbandonEndSession: 'Cannot end session, logging disabled or developer token not set',
    NoSessionToEnd: 'Cannot end session, no active session found'
};

var NativeSdkPaths = {
    LogEvent: 'logEvent',
    SetUserIdentity: 'setUserIdentity',
    RemoveUserIdentity: 'removeUserIdentity',
    SetUserTag: 'setUserTag',
    RemoveUserTag: 'removeUserTag',
    SetUserAttribute: 'setUserAttribute',
    RemoveUserAttribute: 'removeUserAttribute',
    SetSessionAttribute: 'setSessionAttribute',
    AddToProductBag: 'addToProductBag',
    RemoveFromProductBag: 'removeFromProductBag',
    ClearProductBag: 'clearProductBag',
    AddToCart: 'addToCart',
    RemoveFromCart: 'removeFromCart',
    ClearCart: 'clearCart',
    LogOut: 'logOut',
    SetUserAttributeList: 'setUserAttributeList',
    RemoveAllUserAttributes: 'removeAllUserAttributes',
    GetUserAttributesLists: 'getUserAttributesLists',
    GetAllUserAttributes: 'getAllUserAttributes'
};

var ProductActionType = {
    Unknown: 0,
    AddToCart: 1,
    RemoveFromCart: 2,
    Checkout: 3,
    CheckoutOption: 4,
    Click: 5,
    ViewDetail: 6,
    Purchase: 7,
    Refund: 8,
    AddToWishlist: 9,
    RemoveFromWishlist: 10
};

ProductActionType.getName = function (id) {
    switch (id) {
        case ProductActionType.AddToCart:
            return 'Add to Cart';
        case ProductActionType.RemoveFromCart:
            return 'Remove from Cart';
        case ProductActionType.Checkout:
            return 'Checkout';
        case ProductActionType.CheckoutOption:
            return 'Checkout Option';
        case ProductActionType.Click:
            return 'Click';
        case ProductActionType.ViewDetail:
            return 'View Detail';
        case ProductActionType.Purchase:
            return 'Purchase';
        case ProductActionType.Refund:
            return 'Refund';
        case ProductActionType.AddToWishlist:
            return 'Add to Wishlist';
        case ProductActionType.RemoveFromWishlist:
            return 'Remove from Wishlist';
        default:
            return 'Unknown';
    }
};

//these are the action names used by server and mobile SDKs when expanding a CommerceEvent
ProductActionType.getExpansionName = function (id) {
    switch (id) {
        case ProductActionType.AddToCart:
            return 'add_to_cart';
        case ProductActionType.RemoveFromCart:
            return 'remove_from_cart';
        case ProductActionType.Checkout:
            return 'checkout';
        case ProductActionType.CheckoutOption:
            return 'checkout_option';
        case ProductActionType.Click:
            return 'click';
        case ProductActionType.ViewDetail:
            return 'view_detail';
        case ProductActionType.Purchase:
            return 'purchase';
        case ProductActionType.Refund:
            return 'refund';
        case ProductActionType.AddToWishlist:
            return 'add_to_wishlist';
        case ProductActionType.RemoveFromWishlist:
            return 'remove_from_wishlist';
        default:
            return 'Unknown';
    }
};

var PromotionActionType = {
    Unknown: 0,
    PromotionView: 1,
    PromotionClick: 2
};

PromotionActionType.getName = function (id) {
    switch (id) {
        case PromotionActionType.PromotionView:
            return 'Promotion View';
        case PromotionActionType.PromotionClick:
            return 'Promotion Click';
        default:
            return 'Unknown';
    }
};

//these are the names that the server and mobile SDKs use while expanding CommerceEvent
PromotionActionType.getExpansionName = function (id) {
    switch (id) {
        case PromotionActionType.PromotionView:
            return 'view';
        case PromotionActionType.PromotionClick:
            return 'click';
        default:
            return 'Unknown';
    }
};

var mParticle = {
    isIOS: false,
    isDebug: false,
    isSandbox: false,
    generateHash: generateHash,
    IdentityType: IdentityType,
    EventType: EventType,
    CommerceEventType: CommerceEventType,
    PromotionType: PromotionActionType,
    ProductActionType: ProductActionType,
    init: function init() {
        var token, config;

        logDebug$1(InformationMessages$1.StartingInitialization);

        // Set configuration to default settings
        mergeConfig({});
        // Load any settings/identities/attributes from cookie
        cookie.getCookie();

        if (arguments && arguments.length > 0) {
            if (typeof arguments[0] == 'string') {
                // This is the dev token
                token = arguments[0];

                if (devToken$1 !== token) {
                    mParticle.endSession();
                    devToken$1 = token;
                }

                initForwarders();
            }

            if (_typeof(arguments[0]) == 'object') {
                config = arguments[0];
            } else if (arguments.length > 1 && _typeof(arguments[1]) == 'object') {
                config = arguments[1];
            }

            if (config) {
                mergeConfig(config);
            }
        }

        // Call any functions that are waiting for the library to be initialized
        if (readyQueue && readyQueue.length) {
            for (var i = 0; i < readyQueue.length; i++) {
                if (typeof readyQueue[i] == 'function') {
                    readyQueue[i]();
                }
            }

            readyQueue = [];
        }

        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });
        isInitialized = true;
    },
    reset: function reset() {
        // Completely resets the state of the SDK. mParticle.init() will need to be called again.

        isEnabled$1 = true;
        stopTracking();
        devToken$1 = null;
        sessionId$1 = null;
        appName = null;
        appVersion = null;
        sessionAttributes$1 = {};
        userAttributes$1 = {};
        userIdentities$1 = [];
        forwarders = [];
        forwarderConstructors = [];
        productsBags = {};
        cartProducts = [];
        serverSettings$1 = null;
        mergeConfig({});
        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });

        isInitialized = false;
    },
    ready: function ready(f) {
        if (isInitialized && typeof f == 'function') {
            f();
        } else {
            readyQueue.push(f);
        }
    },
    getVersion: function getVersion() {
        return sdkVersion;
    },
    setAppVersion: function setAppVersion(version) {
        appVersion = version;
        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });
    },
    getAppName: function getAppName() {
        return appName;
    },
    setAppName: function setAppName(name) {
        appName = name;
    },
    getAppVersion: function getAppVersion() {
        return appVersion;
    },
    stopTrackingLocation: function stopTrackingLocation() {
        stopTracking();
    },
    startTrackingLocation: function startTrackingLocation() {
        startTracking();
    },
    setPosition: function setPosition(lat, lng) {
        if (typeof lat === 'number' && typeof lng === 'number') {
            currentPosition = {
                lat: lat,
                lng: lng
            };
        } else {
            logDebug$1('Position latitude and/or longitude are invalid');
        }
    },
    setUserIdentity: function setUserIdentity(id, type) {
        if (canLog()) {
            var userIdentity = {
                Identity: id,
                Type: type
            };

            mParticle.removeUserIdentity(id);
            userIdentities$1.push(userIdentity);

            if (!tryNativeSdk(NativeSdkPaths.SetUserIdentity, JSON.stringify(userIdentity))) {
                if (forwarders) {
                    for (var i = 0; i < forwarders.length; i++) {
                        if (forwarders[i].setUserIdentity && (!forwarders[i].userIdentityFilters || !utilities.inArray(forwarders[i].userIdentityFilters, type))) {

                            var result = forwarders[i].setUserIdentity(id, type);

                            if (result) {
                                logDebug$1(result);
                            }
                        }
                    }
                }
            }

            cookie.setCookie(Config, {
                sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
                ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
                les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
                av: appVersion,
                cgid: clientId$1
            });
        }
    },
    getUserIdentity: function getUserIdentity(id) {
        var foundIdentity = null;

        userIdentities$1.forEach(function (identity) {
            if (identity.Identity === id) {
                foundIdentity = identity;
            }
        });

        return foundIdentity;
    },
    removeUserIdentity: function removeUserIdentity(id) {
        var i = 0;

        for (i = 0; i < userIdentities$1.length; i++) {
            if (userIdentities$1[i].Identity === id) {
                userIdentities$1.splice(i, 1);
                i--;
            }
        }

        tryNativeSdk(NativeSdkPaths.RemoveUserIdentity, id);
        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });
    },
    startNewSession: function startNewSession() {
        // Ends the current session if one is in progress

        logDebug$1(InformationMessages$1.StartingNewSession);

        if (canLog()) {
            mParticle.endSession();
            sessionId$1 = generateUniqueId$1();

            if (!lastEventSent$1) {
                lastEventSent$1 = new Date();
            }

            _logEvent(MessageType.SessionStart);
        } else {
            logDebug$1(InformationMessages$1.AbandonStartSession);
        }
    },
    endSession: function endSession() {
        logDebug$1(InformationMessages$1.StartingEndSession);

        // Ends the current session.
        if (canLog()) {
            if (!sessionId$1) {
                logDebug$1(InformationMessages$1.NoSessionToEnd);
                return;
            }

            _logEvent(MessageType.SessionEnd);

            sessionId$1 = null;
            sessionAttributes$1 = {};
        } else {
            logDebug$1(InformationMessages$1.AbandonEndSession);
        }
    },
    logEvent: function logEvent(eventName, eventType, eventInfo, customFlags) {
        if (typeof eventName != 'string') {
            logDebug$1(ErrorMessages$1.EventNameInvalidType);
            return;
        }

        if (!eventType) {
            eventType = EventType.Unknown;
        }

        if (!isEventType(eventType)) {
            logDebug$1('Invalid event type: ' + eventType + ', must be one of: \n' + JSON.stringify(EventType));
            return;
        }

        if (!canLog()) {
            logDebug$1(ErrorMessages$1.LoggingDisabled);
            return;
        }

        if (!lastEventSent$1) {
            lastEventSent$1 = new Date();
        } else if (new Date() > new Date(lastEventSent$1.getTime() + Config.SessionTimeout * 60000)) {
            // Session has timed out, start a new one
            mParticle.startNewSession();
        }

        _logEvent(MessageType.PageEvent, eventName, eventInfo, eventType, customFlags);
    },
    logError: function logError(error) {
        if (!error) {
            return;
        }

        if (typeof error == 'string') {
            error = {
                message: error
            };
        }

        _logEvent(MessageType.CrashReport, error.name ? error.name : 'Error', {
            m: error.message ? error.message : error,
            s: 'Error',
            t: error.stack
        }, EventType.Other);
    },
    logLink: function logLink(selector, eventName, eventType, eventInfo) {
        addEventHandler('click', selector, eventName, eventInfo, eventType);
    },
    logForm: function logForm(selector, eventName, eventType, eventInfo) {
        addEventHandler('submit', selector, eventName, eventInfo, eventType);
    },
    logPageView: function logPageView() {
        var eventName = null,
            attrs = null,
            flags = null;

        if (canLog()) {
            if (arguments.length <= 1) {
                // Handle original function signature

                eventName = window.location.pathname;
                attrs = {
                    hostname: window.location.hostname,
                    title: window.document.title
                };

                if (arguments.length == 1) {
                    flags = arguments[0];
                }
            } else if (arguments.length > 1) {
                eventName = arguments[0];
                attrs = arguments[1];

                if (arguments.length == 3) {
                    flags = arguments[2];
                }
            }

            _logEvent(MessageType.PageView, eventName, attrs, EventType.Unknown, flags);
        }
    },
    eCommerce: {
        ProductBags: {
            add: function add(productBagName, product) {
                if (!productsBags[productBagName]) {
                    productsBags[productBagName] = [];
                }

                productsBags[productBagName].push(product);

                tryNativeSdk(NativeSdkPaths.AddToProductBag, JSON.stringify(product));
            },
            remove: function remove(productBagName, product) {
                var productIndex = -1;

                if (productsBags[productBagName]) {
                    productsBags[productBagName].forEach(function (item, index) {
                        if (item.sku === product.sku) {
                            productIndex = index;
                        }
                    });

                    if (productIndex > -1) {
                        productsBags[productBagName].splice(productIndex, 1);
                    }
                }

                tryNativeSdk(NativeSdkPaths.RemoveFromProductBag, JSON.stringify(product));
            },
            clear: function clear(productBagName) {
                productsBags[productBagName] = [];

                tryNativeSdk(NativeSdkPaths.ClearProductBag, productBagName);
            }
        },
        Cart: {
            add: function add(product, logEvent) {
                var arrayCopy = [];

                if (Array.isArray(product)) {
                    for (var i = 0; i < product.length; i++) {
                        arrayCopy.push(product[i]);
                    }
                } else {
                    arrayCopy.push(product);
                }

                cartProducts = cartProducts.concat(arrayCopy);

                if (utilities.isWebViewEmbedded(navigator)) {
                    tryNativeSdk(NativeSdkPaths.AddToCart, JSON.stringify(arrayCopy));
                } else if (logEvent === true) {
                    logProductActionEvent(ProductActionType.AddToCart, arrayCopy);
                }
            },
            remove: function remove(product, logEvent) {
                var cartIndex = -1,
                    cartItem = null;

                if (cartProducts) {
                    cartProducts.forEach(function (item, index) {
                        if (item.Sku === product.Sku) {
                            cartIndex = index;
                            cartItem = item;
                        }
                    });

                    if (cartIndex > -1) {
                        cartProducts.splice(cartIndex, 1);

                        if (utilities.isWebViewEmbedded(navigator)) {
                            tryNativeSdk(NativeSdkPaths.RemoveFromCart, JSON.stringify(cartItem));
                        } else if (logEvent === true) {
                            logProductActionEvent(ProductActionType.RemoveFromCart, cartItem);
                        }
                    }
                }
            },
            clear: function clear() {
                cartProducts = [];
                tryNativeSdk(NativeSdkPaths.ClearCart);
            }
        },
        setCurrencyCode: function setCurrencyCode(code) {
            currencyCode = code;
        },
        createProduct: function createProduct(name, sku, price, quantity, variant, category, brand, position, coupon, attributes) {
            return _createProduct(name, sku, price, quantity, variant, category, brand, position, coupon, attributes);
        },
        createPromotion: function createPromotion(id, creative, name, position) {
            return _createPromotion(id, creative, name, position);
        },
        createImpression: function createImpression(name, product) {
            return _createImpression(name, product);
        },
        createTransactionAttributes: function createTransactionAttributes(id, affiliation, couponCode, revenue, shipping, tax) {
            return _createTransactionAttributes(id, affiliation, couponCode, revenue, shipping, tax);
        },
        logCheckout: function logCheckout(step, paymentMethod, attrs) {
            logCheckoutEvent(step, paymentMethod, attrs);
        },
        logProductAction: function logProductAction(productActionType, product, attrs) {
            logProductActionEvent(productActionType, product, attrs);
        },
        logPurchase: function logPurchase(transactionAttributes, product, clearCart, attrs) {
            logPurchaseEvent(transactionAttributes, product, attrs);

            if (clearCart === true) {
                mParticle.eCommerce.Cart.clear();
            }
        },
        logPromotion: function logPromotion(type, promotion, attrs) {
            logPromotionEvent(type, promotion, attrs);
        },
        logImpression: function logImpression(impression, attrs) {
            logImpressionEvent(impression, attrs);
        },
        logRefund: function logRefund(transactionAttributes, product, clearCart, attrs) {
            logRefundEvent(transactionAttributes, product, attrs);

            if (clearCart === true) {
                mParticle.eCommerce.Cart.clear();
            }
        },
        expandCommerceEvent: function expandCommerceEvent(event) {
            return _expandCommerceEvent(event);
        }
    },
    logEcommerceTransaction: function logEcommerceTransaction(productName, productSKU, productUnitPrice, productQuantity, productCategory, revenueAmount, taxAmount, shippingAmount, currencyCode, affiliation, transactionId) {

        var attributes = {};
        attributes.$MethodName = 'LogEcommerceTransaction';

        attributes.ProductName = productName ? productName : '';
        attributes.ProductSKU = productSKU ? productSKU : '';
        attributes.ProductUnitPrice = productUnitPrice ? productUnitPrice : 0;
        attributes.ProductQuantity = productQuantity ? productQuantity : 0;
        attributes.ProductCategory = productCategory ? productCategory : '';
        attributes.RevenueAmount = revenueAmount ? revenueAmount : 0;
        attributes.TaxAmount = taxAmount ? taxAmount : 0;
        attributes.ShippingAmount = shippingAmount ? shippingAmount : 0;
        attributes.CurrencyCode = currencyCode ? currencyCode : 'USD';
        attributes.TransactionAffiliation = affiliation ? affiliation : '';
        attributes.TransactionID = transactionId ? transactionId : generateUniqueId$1();

        _logEvent(MessageType.PageEvent, 'Ecommerce', attributes, EventType.Transaction);
    },
    logLTVIncrease: function logLTVIncrease(amount, eventName, attributes) {
        if (amount == null || typeof amount == "undefined") {
            logDebug$1('A valid amount must be passed to logLTVIncrease.');
            return;
        }

        if (!attributes) {
            attributes = {};
        }

        attributes[RESERVED_KEY_LTV] = amount;
        attributes[METHOD_NAME] = LOG_LTV;

        _logEvent(MessageType.PageEvent, !eventName ? 'Increase LTV' : eventName, attributes, EventType.Transaction);
    },
    setUserTag: function setUserTag(tagName) {
        window.mParticle.setUserAttribute(tagName, null);
    },
    removeUserTag: function removeUserTag(tagName) {
        var existingProp = findKeyInObject(userAttributes$1, tagName);

        if (existingProp != null) {
            tagName = existingProp;
        }

        delete userAttributes$1[tagName];
        tryNativeSdk(NativeSdkPaths.RemoveUserTag, JSON.stringify({ key: tagName, value: null }));
        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });
    },
    setUserAttribute: function setUserAttribute(key, value) {
        // Logs to cookie
        // And logs to in-memory object
        // Example: mParticle.setUserAttribute('email', 'tbreffni@mparticle.com');
        if (canLog()) {
            if (!isValidAttributeValue(value)) {
                logDebug$1(ErrorMessages$1.BadAttribute);
                return;
            }

            var existingProp = findKeyInObject(userAttributes$1, key);

            if (existingProp != null) {
                key = existingProp;
            }

            userAttributes$1[key] = value;
            cookie.setCookie(Config, {
                sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
                ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
                les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
                av: appVersion,
                cgid: clientId$1
            });

            if (!tryNativeSdk(NativeSdkPaths.SetUserAttribute, JSON.stringify({ key: key, value: value }))) {
                callSetUserAttributeOnForwarders(key, value);
            }
        }
    },
    removeUserAttribute: function removeUserAttribute(key) {
        var existingProp = findKeyInObject(userAttributes$1, key);

        if (existingProp != null) {
            key = existingProp;
        }

        delete userAttributes$1[key];

        if (!tryNativeSdk(NativeSdkPaths.RemoveUserAttribute, JSON.stringify({ key: key, value: null }))) {
            applyToForwarders('removeUserAttribute', key, null);
        }

        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });
    },
    setUserAttributeList: function setUserAttributeList(key, value) {
        var arrayCopy = [];

        if (Array.isArray(value)) {
            for (var i = 0; i < value.length; i++) {
                arrayCopy.push(value[i]);
            }

            var existingProp = findKeyInObject(userAttributes$1, key);

            if (existingProp != null) {
                key = existingProp;
            }

            userAttributes$1[key] = arrayCopy;
            cookie.setCookie(Config, {
                sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
                ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
                les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
                av: appVersion,
                cgid: clientId$1
            });

            if (!tryNativeSdk(NativeSdkPaths.SetUserAttributeList, JSON.stringify({ key: key, value: arrayCopy }))) {
                callSetUserAttributeOnForwarders(key, arrayCopy);
            }
        }
    },
    removeAllUserAttributes: function removeAllUserAttributes() {
        if (!tryNativeSdk(NativeSdkPaths.RemoveAllUserAttributes)) {
            if (userAttributes$1) {
                for (var prop in userAttributes$1) {
                    if (userAttributes$1.hasOwnProperty(prop)) {
                        applyToForwarders('removeUserAttribute', userAttributes$1[prop]);
                    }
                }
            }
        }

        userAttributes$1 = {};
        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });
    },
    getUserAttributesLists: function getUserAttributesLists() {
        var userAttributeLists = {},
            arrayCopy;

        for (var key in userAttributes$1) {
            if (userAttributes$1.hasOwnProperty(key) && Array.isArray(userAttributes$1[key])) {
                arrayCopy = [];

                for (var i = 0; i < userAttributes$1[key].length; i++) {
                    arrayCopy.push(userAttributes$1[key][i]);
                }

                userAttributeLists[key] = arrayCopy;
            }
        }

        return userAttributeLists;
    },
    getAllUserAttributes: function getAllUserAttributes() {
        var userAttributesCopy = {},
            arrayCopy;

        if (userAttributes$1) {
            for (var prop in userAttributes$1) {
                if (userAttributes$1.hasOwnProperty(prop)) {
                    if (Array.isArray(userAttributes$1[prop])) {
                        arrayCopy = [];

                        for (var i = 0; i < userAttributes$1[prop].length; i++) {
                            arrayCopy.push(userAttributes$1[prop][i]);
                        }

                        userAttributesCopy[prop] = arrayCopy;
                    } else {
                        userAttributesCopy[prop] = userAttributes$1[prop];
                    }
                }
            }
        }

        return userAttributesCopy;
    },
    setSessionAttribute: function setSessionAttribute(key, value) {
        // Logs to cookie
        // And logs to in-memory object
        // Example: mParticle.setSessionAttribute('location', '33431');
        if (canLog()) {
            if (!isValidAttributeValue(value)) {
                logDebug$1(ErrorMessages$1.BadAttribute);
                return;
            }

            var existingProp = findKeyInObject(sessionAttributes$1, key);

            if (existingProp != null) {
                key = existingProp;
            }

            sessionAttributes$1[key] = value;
            cookie.setCookie(Config, {
                sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
                ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
                les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
                av: appVersion,
                cgid: clientId$1
            });
            if (!tryNativeSdk(NativeSdkPaths.SetSessionAttribute, JSON.stringify({ key: key, value: value }))) {
                applyToForwarders('setSessionAttribute', [key, value]);
            }
        }
    },
    setOptOut: function setOptOut(isOptingOut) {
        isEnabled$1 = !isOptingOut;

        logOptOut();
        cookie.setCookie(Config, {
            sid: sessionId$1, ie: isEnabled$1, sa: sessionAttributes$1,
            ua: userAttributes$1, ui: userIdentities$1, ss: serverSettings$1, dt: devToken$1,
            les: lastEventSent$1 ? lastEventSent$1.getTime() : null,
            av: appVersion,
            cgid: clientId$1
        });

        if (forwarders) {
            for (var i = 0; i < forwarders.length; i++) {
                if (forwarders[i].setOptOut) {
                    var result = forwarders[i].setOptOut(isOptingOut);

                    if (result) {
                        logDebug$1(result);
                    }
                }
            }
        }
    },
    logOut: function logOut() {
        var evt;

        if (canLog()) {
            if (!tryNativeSdk(NativeSdkPaths.LogOut)) {
                evt = logLogOutEvent();

                if (forwarders) {
                    for (var i = 0; i < forwarders.length; i++) {
                        if (forwarders[i].logOut) {
                            forwarders[i].logOut(evt);
                        }
                    }
                }
            }
        }
    },
    addForwarder: function addForwarder(forwarderProcessor) {
        forwarderConstructors.push(forwarderProcessor);
    },
    configureForwarder: function configureForwarder() {
        var newForwarder = null,
            config = null;

        if (arguments.length === 1) {
            config = arguments[0];
        } else {
            /*  Added for backwards compatibility
                Old signature for reference:
            
            configureForwarder: function (name,
                settings,
                eventNameFilters,
                eventTypeFilters,
                attributeFilters,
                pageViewFilters,
                pageViewAttributeFilters,
                userIdentityFilters,
                userAttributeFilters,
                id,
                isSandbox,
                hasSandbox,
                isVisible)
            */
            config = {
                name: arguments[0],
                settings: arguments[1],
                eventNameFilters: arguments[2],
                eventTypeFilters: arguments[3],
                attributeFilters: arguments[4],
                pageViewFilters: arguments[5],
                pageViewAttributeFilters: arguments[6],
                userIdentityFilters: arguments[7],
                userAttributeFilters: arguments[8],
                moduleId: arguments[9],
                isSandbox: arguments[10],
                hasSandbox: arguments[11],
                isVisible: arguments[12],
                filteringEventAttributeValue: null
            };
        }

        for (var i = 0; i < forwarderConstructors.length; i++) {
            if (forwarderConstructors[i].name == config.name) {
                newForwarder = new forwarderConstructors[i].constructor();

                newForwarder.id = config.moduleId;
                newForwarder.isSandbox = config.isDebug;
                newForwarder.hasSandbox = config.hasDebugString === 'true' ? true : false;
                newForwarder.isVisible = config.isVisible;
                newForwarder.settings = config.settings;

                newForwarder.eventNameFilters = config.eventNameFilters;
                newForwarder.eventTypeFilters = config.eventTypeFilters;
                newForwarder.attributeFilters = config.attributeFilters;

                newForwarder.pageViewFilters = config.pageViewFilters;
                newForwarder.pageViewAttributeFilters = config.pageViewAttributeFilters;

                newForwarder.userIdentityFilters = config.userIdentityFilters;
                newForwarder.userAttributeFilters = config.userAttributeFilters;

                newForwarder.filteringEventAttributeValue = config.filteringEventAttributeValue;

                forwarders.push(newForwarder);

                break;
            }
        }
    }
};

// Read existing configuration if present
if (window.mParticle && window.mParticle.config) {
    if (window.mParticle.config.serviceUrl) {
        serviceUrl = window.mParticle.config.serviceUrl;
    }

    if (window.mParticle.config.secureServiceUrl) {
        secureServiceUrl = window.mParticle.config.secureServiceUrl;
    }

    // Check for any functions queued
    if (window.mParticle.config.rq) {
        readyQueue = window.mParticle.config.rq;
    }

    if (window.mParticle.config.hasOwnProperty('isDebug')) {
        mParticle.isDebug = window.mParticle.config.isDebug;
    }

    if (window.mParticle.config.hasOwnProperty('isSandbox')) {
        mParticle.isSandbox = window.mParticle.config.isSandbox;
    }

    if (window.mParticle.config.hasOwnProperty('appName')) {
        appName = window.mParticle.config.appName;
    }

    if (window.mParticle.config.hasOwnProperty('appVersion')) {
        appVersion = window.mParticle.config.appVersion;
    }

    // Some forwarders require custom flags on initialization, so allow them to be set using config object
    if (window.mParticle.config.hasOwnProperty('customFlags')) {
        customFlags = window.mParticle.config.customFlags;
    }
}

window.mParticle = mParticle;

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlsaXRpZXMuanMiLCIuLi9zcmMvY29va2llLmpzIiwiLi4vc3JjL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgVXRpbGl0aWVzIHtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0XG5cdH1cblxuXHRjcmVhdGVYSFIoY2IsIGxvZ0RlYnVnKSB7XG4gICAgICAgIHZhciB4aHI7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHhociA9IG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nRGVidWcoJ0Vycm9yIGNyZWF0aW5nIFhNTEh0dHBSZXF1ZXN0IG9iamVjdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh4aHIgJiYgY2IgJiYgXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiB4aHIpIHtcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBjYjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygd2luZG93LlhEb21haW5SZXF1ZXN0ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBsb2dEZWJ1ZygnQ3JlYXRpbmcgWERvbWFpblJlcXVlc3Qgb2JqZWN0Jyk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgeGhyID0gbmV3IHdpbmRvdy5YRG9tYWluUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSBjYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nRGVidWcoJ0Vycm9yIGNyZWF0aW5nIFhEb21haW5SZXF1ZXN0IG9iamVjdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHhocjtcbiAgICB9XG5cbiAgICBjcmVhdGVTZXJ2aWNlVXJsKHNlcnZpY2VTY2hlbWUsIHNlY3VyZVNlcnZpY2VVcmwsIHNlcnZpY2VVcmwsIGRldlRva2VuKSB7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlU2NoZW1lICsgKCh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonKSBcbiAgICAgICAgXHQ/IHNlY3VyZVNlcnZpY2VVcmwgOiBzZXJ2aWNlVXJsKSArIGRldlRva2VuO1xuICAgIH1cblxuICAgIGluQXJyYXkoaXRlbXMsIG5hbWUpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGl0ZW1zLmZpbmRJbmRleChuYW1lKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCAhPT0gLTE7XG4gICAgfVxuXG4gICAgaXNVSVdlYlZpZXcobmF2aWdhdG9yKSB7XG4gICAgICAgIHJldHVybiAvKGlQaG9uZXxpUG9kfGlQYWQpLipBcHBsZVdlYktpdCg/IS4qU2FmYXJpKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgfVxuXG4gICAgaXNXZWJWaWV3RW1iZWRkZWQobmF2aWdhdG9yKSB7XG4gICAgICAgIHJldHVybiAod2luZG93LmV4dGVybmFsICYmIHR5cGVvZiAod2luZG93LmV4dGVybmFsLk5vdGlmeSkgPT09ICd1bmtub3duJylcbiAgICAgICAgICAgIHx8IHdpbmRvdy5tUGFydGljbGVBbmRyb2lkXG4gICAgICAgICAgICB8fCBpc1VJV2ViVmlldyhuYXZpZ2F0b3IpXG4gICAgICAgICAgICB8fCB3aW5kb3cubVBhcnRpY2xlLmlzSU9TO1xuICAgIH1cblxufVxuXG5leHBvcnQgbGV0IHV0aWxpdGllcyA9IG5ldyBVdGlsaXRpZXMoKTsiLCJjbGFzcyBDb29raWV7XG5cblx0Y29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0ge307XG4gICAgICAgIHRoaXMudmFsdWUgPSB7fTtcblx0fVxuXG5cdGdldENvb2tpZSgpIHtcbiAgICAgICAgbGV0IGNvb2tpZXMgPSB3aW5kb3cuZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5jb25maWcuQ29va2llTmFtZSA/IHVuZGVmaW5lZCA6IHt9O1xuXG4gICAgICAgIGxvZ0RlYnVnKEluZm9ybWF0aW9uTWVzc2FnZXMuQ29va2llU2VhcmNoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcbiAgICAgICAgICAgIGxldCBuYW1lID0gZGVjb2RlZChwYXJ0cy5zaGlmdCgpKTtcbiAgICAgICAgICAgIGxldCBjb29raWUgPSBkZWNvZGVkKHBhcnRzLmpvaW4oJz0nKSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5Db29raWVOYW1lICYmIHRoaXMuY29uZmlnLkNvb2tpZU5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjb252ZXJ0ZWQoY29va2llKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5Db29raWVOYW1lKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gY29udmVydGVkKGNvb2tpZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhJbmZvcm1hdGlvbk1lc3NhZ2VzLkNvb2tpZUZvdW5kKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgb2JqID0gSlNPTi5wYXJzZShyZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgLy8gTG9uZ2VyIG5hbWVzIGFyZSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQgPSBvYmouc2lkIHx8IG9iai5TZXNzaW9uSWQgfHwgc2Vzc2lvbklkO1xuICAgICAgICAgICAgICAgIGlzRW5hYmxlZCA9ICh0eXBlb2Ygb2JqLmllICE9ICd1bmRlZmluZWQnKSA/IG9iai5pZSA6IG9iai5Jc0VuYWJsZWQ7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbkF0dHJpYnV0ZXMgPSBvYmouc2EgfHwgb2JqLlNlc3Npb25BdHRyaWJ1dGVzIHx8IHNlc3Npb25BdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgIHVzZXJBdHRyaWJ1dGVzID0gb2JqLnVhIHx8IG9iai5Vc2VyQXR0cmlidXRlcyB8fCB1c2VyQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICB1c2VySWRlbnRpdGllcyA9IG9iai51aSB8fCBvYmouVXNlcklkZW50aXRpZXMgfHwgdXNlcklkZW50aXRpZXM7XG4gICAgICAgICAgICAgICAgc2VydmVyU2V0dGluZ3MgPSBvYmouc3MgfHwgb2JqLlNlcnZlclNldHRpbmdzIHx8IHNlcnZlclNldHRpbmdzO1xuICAgICAgICAgICAgICAgIGRldlRva2VuID0gb2JqLmR0IHx8IG9iai5EZXZlbG9wZXJUb2tlbiB8fCBkZXZUb2tlbjtcblxuICAgICAgICAgICAgICAgIGNsaWVudElkID0gb2JqLmNnaWQgfHwgZ2VuZXJhdGVVbmlxdWVJZCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzRW5hYmxlZCAhPT0gZmFsc2UgfHwgaXNFbmFibGVkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9iai5sZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEV2ZW50U2VudCA9IG5ldyBEYXRlKG9iai5sZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvYmouTGFzdEV2ZW50U2VudCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0RXZlbnRTZW50ID0gbmV3IERhdGUob2JqLkxhc3RFdmVudFNlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nRGVidWcoRXJyb3JNZXNzYWdlcy5Db29raWVQYXJzZUVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldENvb2tpZShjb25maWcsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IGV4cGlyZXMgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSArXG4gICAgICAgICAgICAgICAgKHRoaXMuY29uZmlnLkNvb2tpZUV4cGlyYXRpb24gKiAyNCAqIDYwICogNjAgKiAxMDAwKSkudG9HTVRTdHJpbmcoKTtcbiAgICAgICAgbGV0IGRvbWFpbiA9IHRoaXMuY29uZmlnLkNvb2tpZURvbWFpbiA/ICc7ZG9tYWluPScgKyB0aGlzLmNvbmZpZy5Db29raWVEb21haW4gOiAnJztcblxuICAgICAgICBsb2dEZWJ1ZyhJbmZvcm1hdGlvbk1lc3NhZ2VzLkNvb2tpZVNldCk7XG5cbiAgICAgICAgd2luZG93LmRvY3VtZW50LmNvb2tpZSA9XG4gICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb25maWcuQ29va2llTmFtZSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZSkpICtcbiAgICAgICAgICAgICc7ZXhwaXJlcz0nICsgZXhwaXJlcyArXG4gICAgICAgICAgICAnO3BhdGg9LycgKyBkb21haW47XG4gICAgfVxufVxuXG5leHBvcnQgbGV0IGNvb2tpZSA9IG5ldyBDb29raWUoKTsiLCIvL1xuLy8gIENvcHlyaWdodCAyMDE1IG1QYXJ0aWNsZSwgSW5jLlxuLy9cbi8vICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8gIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLyAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8gIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbi8vXG4vLyAgVXNlcyBwb3J0aW9ucyBvZiBjb2RlIGZyb20galF1ZXJ5XG4vLyAgalF1ZXJ5IHYxLjEwLjIgfCAoYykgMjAwNSwgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZVxuXG5pbXBvcnQge3V0aWxpdGllc30gZnJvbSAnLi91dGlsaXRpZXMuanMnO1xuaW1wb3J0IHtjb29raWV9IGZyb20gJy4vY29va2llLmpzJztcblxudmFyIHNlcnZpY2VVcmwgPSBcImpzc2RrLm1wYXJ0aWNsZS5jb20vdjEvSlMvXCIsXG4gICAgc2VjdXJlU2VydmljZVVybCA9IFwianNzZGtzLm1wYXJ0aWNsZS5jb20vdjEvSlMvXCIsXG4gICAgc2VydmljZVNjaGVtZSA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycsXG4gICAgc2RrVmVyc2lvbiA9ICcxLjguNycsXG4gICAgaXNFbmFibGVkID0gdHJ1ZSxcbiAgICBwbHVzZXMgPSAvXFwrL2csXG4gICAgc2Vzc2lvbkF0dHJpYnV0ZXMgPSB7fSxcbiAgICB1c2VyQXR0cmlidXRlcyA9IHt9LFxuICAgIHVzZXJJZGVudGl0aWVzID0gW10sXG4gICAgZm9yd2FyZGVyQ29uc3RydWN0b3JzID0gW10sXG4gICAgZm9yd2FyZGVycyA9IFtdLFxuICAgIHNlc3Npb25JZCxcbiAgICBjbGllbnRJZCxcbiAgICBkZXZUb2tlbixcbiAgICBzZXJ2ZXJTZXR0aW5ncyA9IG51bGwsXG4gICAgbGFzdEV2ZW50U2VudCxcbiAgICBjdXJyZW50UG9zaXRpb24sXG4gICAgaXNUcmFja2luZyA9IGZhbHNlLFxuICAgIHdhdGNoUG9zaXRpb25JZCxcbiAgICByZWFkeVF1ZXVlID0gW10sXG4gICAgaXNJbml0aWFsaXplZCA9IGZhbHNlLFxuICAgIHByb2R1Y3RzQmFncyA9IHt9LFxuICAgIGNhcnRQcm9kdWN0cyA9IFtdLFxuICAgIGN1cnJlbmN5Q29kZSA9IG51bGwsXG4gICAgTW9ja0h0dHBSZXF1ZXN0ID0gbnVsbCxcbiAgICBhcHBWZXJzaW9uID0gbnVsbCxcbiAgICBhcHBOYW1lID0gbnVsbCxcbiAgICBjdXN0b21GbGFncyA9IG51bGwsXG4gICAgTUVUSE9EX05BTUUgPSAnJE1ldGhvZE5hbWUnLFxuICAgIExPR19MVFYgPSAnTG9nTFRWSW5jcmVhc2UnLFxuICAgIFJFU0VSVkVEX0tFWV9MVFYgPSAnJEFtb3VudCc7XG5cbi8vIGZvckVhY2ggcG9seWZpbGxcbi8vIFByb2R1Y3Rpb24gc3RlcHMgb2YgRUNNQS0yNjIsIEVkaXRpb24gNSwgMTUuNC40LjE4XG4vLyBSZWZlcmVuY2U6IGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuNC40LjE4XG4vLyBcbmlmICghQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciBULCBrO1xuXG4gICAgICAgIGlmICh0aGlzID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyB0aGlzIGlzIG51bGwgb3Igbm90IGRlZmluZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBPID0gT2JqZWN0KHRoaXMpO1xuICAgICAgICB2YXIgbGVuID0gTy5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGNhbGxiYWNrICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBUID0gdGhpc0FyZztcbiAgICAgICAgfVxuXG4gICAgICAgIGsgPSAwO1xuXG4gICAgICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgICAgICB2YXIga1ZhbHVlO1xuICAgICAgICAgICAgaWYgKGsgaW4gTykge1xuICAgICAgICAgICAgICAgIGtWYWx1ZSA9IE9ba107XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChULCBrVmFsdWUsIGssIE8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaysrO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuLy8gUHJvZHVjdGlvbiBzdGVwcyBvZiBFQ01BLTI2MiwgRWRpdGlvbiA1LCAxNS40LjQuMTlcbi8vIFJlZmVyZW5jZTogaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS40LjQuMTlcbmlmICghQXJyYXkucHJvdG90eXBlLm1hcCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgICB2YXIgVCwgQSwgaztcblxuICAgICAgICBpZiAodGhpcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIiB0aGlzIGlzIG51bGwgb3Igbm90IGRlZmluZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgTyA9IE9iamVjdCh0aGlzKTtcbiAgICAgICAgdmFyIGxlbiA9IE8ubGVuZ3RoID4+PiAwO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihjYWxsYmFjayArIFwiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBUID0gdGhpc0FyZztcbiAgICAgICAgfVxuXG4gICAgICAgIEEgPSBuZXcgQXJyYXkobGVuKTtcblxuICAgICAgICBrID0gMDtcblxuICAgICAgICB3aGlsZSAoayA8IGxlbikge1xuXG4gICAgICAgICAgICB2YXIga1ZhbHVlLCBtYXBwZWRWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKGsgaW4gTykge1xuXG4gICAgICAgICAgICAgICAga1ZhbHVlID0gT1trXTtcblxuICAgICAgICAgICAgICAgIG1hcHBlZFZhbHVlID0gY2FsbGJhY2suY2FsbChULCBrVmFsdWUsIGssIE8pO1xuXG4gICAgICAgICAgICAgICAgQVtrXSA9IG1hcHBlZFZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBrKys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gQTtcbiAgICB9O1xufVxuXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pc0FycmF5XG5pZiAoIUFycmF5LmlzQXJyYXkpIHtcbiAgICBBcnJheS5pc0FycmF5ID0gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfTtcbn1cblxuLy8gU3RhbmRhbG9uZSB2ZXJzaW9uIG9mIGpRdWVyeS5leHRlbmQsIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2RhbnNkb20vZXh0ZW5kXG5mdW5jdGlvbiBleHRlbmQoKSB7XG4gICAgdmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lLFxuICAgICAgICB0YXJnZXQgPSBhcmd1bWVudHNbMF0gfHwge30sXG4gICAgICAgIGkgPSAxLFxuICAgICAgICBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICBkZWVwID0gZmFsc2UsXG4gICAgICAgIC8vIGhlbHBlciB3aGljaCByZXBsaWNhdGVzIHRoZSBqcXVlcnkgaW50ZXJuYWwgZnVuY3Rpb25zXG4gICAgICAgIG9iamVjdEhlbHBlciA9IHtcbiAgICAgICAgICAgIGhhc093bjogT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxcbiAgICAgICAgICAgIGNsYXNzMnR5cGU6IHt9LFxuICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iaiA9PSBudWxsID9cbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nKG9iaikgOlxuICAgICAgICAgICAgICAgICAgICBvYmplY3RIZWxwZXIuY2xhc3MydHlwZVtPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKV0gfHwgXCJvYmplY3RcIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0OiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9iaiB8fCBvYmplY3RIZWxwZXIudHlwZShvYmopICE9PSBcIm9iamVjdFwiIHx8IG9iai5ub2RlVHlwZSB8fCBvYmplY3RIZWxwZXIuaXNXaW5kb3cob2JqKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIW9iamVjdEhlbHBlci5oYXNPd24uY2FsbChvYmosIFwiY29uc3RydWN0b3JcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFvYmplY3RIZWxwZXIuaGFzT3duLmNhbGwob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJpc1Byb3RvdHlwZU9mXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIG9iaikgeyB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgfHwgb2JqZWN0SGVscGVyLmhhc093bi5jYWxsKG9iaiwga2V5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3RIZWxwZXIudHlwZShvYmopID09PSBcImFycmF5XCI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNGdW5jdGlvbjogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdEhlbHBlci50eXBlKG9iaikgPT09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc1dpbmRvdzogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PSBvYmoud2luZG93O1xuICAgICAgICAgICAgfVxuICAgICAgICB9OyAgLy8gZW5kIG9mIG9iamVjdEhlbHBlclxuXG4gICAgLy8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICBkZWVwID0gdGFyZ2V0O1xuICAgICAgICB0YXJnZXQgPSBhcmd1bWVudHNbMV0gfHwge307XG4gICAgICAgIC8vIHNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcbiAgICAgICAgaSA9IDI7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIgJiYgIW9iamVjdEhlbHBlci5pc0Z1bmN0aW9uKHRhcmdldCkpIHtcbiAgICAgICAgdGFyZ2V0ID0ge307XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gc2Vjb25kIGFyZ3VtZW50IGlzIHVzZWQgdGhlbiB0aGlzIGNhbiBleHRlbmQgYW4gb2JqZWN0IHRoYXQgaXMgdXNpbmcgdGhpcyBtZXRob2RcbiAgICBpZiAobGVuZ3RoID09PSBpKSB7XG4gICAgICAgIHRhcmdldCA9IHRoaXM7XG4gICAgICAgIC0taTtcbiAgICB9XG5cbiAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcbiAgICAgICAgaWYgKChvcHRpb25zID0gYXJndW1lbnRzW2ldKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG4gICAgICAgICAgICBmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHNyYyA9IHRhcmdldFtuYW1lXTtcbiAgICAgICAgICAgICAgICBjb3B5ID0gb3B0aW9uc1tuYW1lXTtcblxuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3BcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ID09PSBjb3B5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuICAgICAgICAgICAgICAgIGlmIChkZWVwICYmIGNvcHkgJiYgKG9iamVjdEhlbHBlci5pc1BsYWluT2JqZWN0KGNvcHkpIHx8IChjb3B5SXNBcnJheSA9IG9iamVjdEhlbHBlci5pc0FycmF5KGNvcHkpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvcHlJc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5SXNBcnJheSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSBzcmMgJiYgb2JqZWN0SGVscGVyLmlzQXJyYXkoc3JjKSA/IHNyYyA6IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IHNyYyAmJiBvYmplY3RIZWxwZXIuaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW1cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gZXh0ZW5kKGRlZXAsIGNsb25lLCBjb3B5KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3B5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gY29weTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIHRyeU5hdGl2ZVNkayhwYXRoLCB2YWx1ZSkge1xuICAgIGlmICh3aW5kb3cubVBhcnRpY2xlQW5kcm9pZCkge1xuICAgICAgICBsb2dEZWJ1ZyhJbmZvcm1hdGlvbk1lc3NhZ2VzLlNlbmRBbmRyb2lkICsgcGF0aCk7XG4gICAgICAgIHdpbmRvdy5tUGFydGljbGVBbmRyb2lkW3BhdGhdKHZhbHVlKTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAod2luZG93Lm1QYXJ0aWNsZS5pc0lPUyB8fCB1dGlsaXRpZXMuaXNVSVdlYlZpZXcobmF2aWdhdG9yKSkge1xuICAgICAgICBsb2dEZWJ1ZyhJbmZvcm1hdGlvbk1lc3NhZ2VzLlNlbmRJT1MgKyBwYXRoKTtcbiAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJJRlJBTUVcIik7XG4gICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgJ21wLXNkazovLycgKyBwYXRoICsgJy8nICsgdmFsdWUpO1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgaWZyYW1lID0gbnVsbDtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNlbmQoZXZlbnQpIHtcbiAgICB2YXIgeGhyLFxuICAgICAgICB4aHJDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgICAgICAgbG9nRGVidWcoJ1JlY2VpdmVkICcgKyB4aHIuc3RhdHVzVGV4dCArICcgZnJvbSBzZXJ2ZXInKTtcblxuICAgICAgICAgICAgICAgIHBhcnNlUmVzcG9uc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICBsb2dEZWJ1ZyhJbmZvcm1hdGlvbk1lc3NhZ2VzLlNlbmRCZWdpbik7XG5cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgIGxvZ0RlYnVnKEVycm9yTWVzc2FnZXMuRXZlbnRFbXB0eSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRyeU5hdGl2ZVNkayhOYXRpdmVTZGtQYXRocy5Mb2dFdmVudCwgSlNPTi5zdHJpbmdpZnkoZXZlbnQpKSkge1xuICAgICAgICBsb2dEZWJ1ZyhJbmZvcm1hdGlvbk1lc3NhZ2VzLlNlbmRIdHRwKTtcbiAgICAgICAgXG4gICAgICAgIHhociA9IHV0aWxpdGllcy5jcmVhdGVYSFIoeGhyQ2FsbGJhY2ssIGxvZ0RlYnVnKTtcblxuICAgICAgICBpZiAoeGhyKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHhoci5vcGVuKCdwb3N0JywgdXRpbGl0aWVzLmNyZWF0ZVNlcnZpY2VVcmwoc2VydmljZVNjaGVtZSwgc2VjdXJlU2VydmljZVVybCwgc2VydmljZVVybCwgZGV2VG9rZW4pICsgJy9FdmVudHMnKTtcbiAgICAgICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShjb252ZXJ0RXZlbnRUb0RUTyhldmVudCkpKTtcblxuICAgICAgICAgICAgICAgIHNlbmRFdmVudFRvRm9yd2FyZGVycyhldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZ0RlYnVnKCdFcnJvciBzZW5kaW5nIGV2ZW50IHRvIG1QYXJ0aWNsZSBzZXJ2ZXJzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZW5kRm9yd2FyZGluZ1N0YXRzKGZvcndhcmRlciwgZXZlbnQpIHtcbiAgICB2YXIgeGhyLFxuICAgICAgICBmb3J3YXJkaW5nU3RhdDtcblxuICAgIGlmIChmb3J3YXJkZXIgJiYgZm9yd2FyZGVyLmlzVmlzaWJsZSkge1xuICAgICAgICB4aHIgPSB1dGlsaXRpZXMuY3JlYXRlWEhSKGxvZ0RlYnVnKTtcbiAgICAgICAgZm9yd2FyZGluZ1N0YXQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBtaWQ6IGZvcndhcmRlci5pZCxcbiAgICAgICAgICAgIG46IGV2ZW50LkV2ZW50TmFtZSxcbiAgICAgICAgICAgIGF0dHJzOiBldmVudC5FdmVudEF0dHJpYnV0ZXMsXG4gICAgICAgICAgICBzZGs6IGV2ZW50LlNES1ZlcnNpb24sXG4gICAgICAgICAgICBkdDogZXZlbnQuRXZlbnREYXRhVHlwZSxcbiAgICAgICAgICAgIGV0OiBldmVudC5FdmVudENhdGVnb3J5LFxuICAgICAgICAgICAgZGJnOiBldmVudC5EZWJ1ZyxcbiAgICAgICAgICAgIGN0OiBldmVudC5UaW1lc3RhbXAsXG4gICAgICAgICAgICBlZWM6IGV2ZW50LkV4cGFuZGVkRXZlbnRDb3VudFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoeGhyKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHhoci5vcGVuKCdwb3N0JywgdXRpbGl0aWVzLmNyZWF0ZVNlcnZpY2VVcmwoc2VydmljZVNjaGVtZSwgc2VjdXJlU2VydmljZVVybCwgc2VydmljZVVybCwgZGV2VG9rZW4pICsgJy9Gb3J3YXJkaW5nJyk7XG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoZm9yd2FyZGluZ1N0YXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2dEZWJ1ZygnRXJyb3Igc2VuZGluZyBmb3J3YXJkaW5nIHN0YXRzIHRvIG1QYXJ0aWNsZSBzZXJ2ZXJzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvRm9yd2FyZGVycyhmdW5jdGlvbk5hbWUsIGZ1bmN0aW9uQXJncykge1xuICAgIGlmIChmb3J3YXJkZXJzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9yd2FyZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGZvcndhcmRlckZ1bmN0aW9uID0gZm9yd2FyZGVyc1tpXVtmdW5jdGlvbk5hbWVdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZm9yd2FyZGVyRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZm9yd2FyZGVyc1tpXVtmdW5jdGlvbk5hbWVdKGZvcndhcmRlcnNbaV0sIGZ1bmN0aW9uQXJncyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRGVidWcocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ0RlYnVnKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gc2VuZEV2ZW50VG9Gb3J3YXJkZXJzKGV2ZW50KSB7XG4gICAgdmFyIGNsb25lZEV2ZW50LFxuICAgICAgICBoYXNoZWROYW1lLFxuICAgICAgICBoYXNoZWRUeXBlLFxuICAgICAgICBmaWx0ZXJVc2VyQXR0cmlidXRlcyA9IGZ1bmN0aW9uKGV2ZW50LCBmaWx0ZXJMaXN0KSB7XG4gICAgICAgICAgICB2YXIgaGFzaDtcblxuICAgICAgICAgICAgaWYgKGV2ZW50LlVzZXJBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYXR0ck5hbWUgaW4gZXZlbnQuVXNlckF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LlVzZXJBdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9IGdlbmVyYXRlSGFzaChhdHRyTmFtZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1dGlsaXRpZXMuaW5BcnJheShmaWx0ZXJMaXN0LCBoYXNoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBldmVudC5Vc2VyQXR0cmlidXRlc1thdHRyTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZpbHRlclVzZXJJZGVudGl0aWVzID0gZnVuY3Rpb24oZXZlbnQsIGZpbHRlckxpc3QpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5Vc2VySWRlbnRpdGllcyAmJiBldmVudC5Vc2VySWRlbnRpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5Vc2VySWRlbnRpdGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbGl0aWVzLmluQXJyYXkoZmlsdGVyTGlzdCwgZXZlbnQuVXNlcklkZW50aXRpZXNbaV0uVHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LlVzZXJJZGVudGl0aWVzLnNwbGljZShpLCAxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBmaWx0ZXJBdHRyaWJ1dGVzID0gZnVuY3Rpb24oZXZlbnQsIGZpbHRlckxpc3QpIHtcbiAgICAgICAgICAgIHZhciBoYXNoO1xuXG4gICAgICAgICAgICBpZiAoIWZpbHRlckxpc3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGF0dHJOYW1lIGluIGV2ZW50LkV2ZW50QXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5FdmVudEF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoYXR0ck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggPSBnZW5lcmF0ZUhhc2goZXZlbnQuRXZlbnRDYXRlZ29yeSArIGV2ZW50LkV2ZW50TmFtZSArIGF0dHJOYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbGl0aWVzLmluQXJyYXkoZmlsdGVyTGlzdCwgaGFzaCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBldmVudC5FdmVudEF0dHJpYnV0ZXNbYXR0ck5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbkZpbHRlcmVkTGlzdCA9IGZ1bmN0aW9uKGZpbHRlckxpc3QsIGhhc2gpIHtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJMaXN0ICYmIGZpbHRlckxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh1dGlsaXRpZXMuaW5BcnJheShmaWx0ZXJMaXN0LCBoYXNoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZm9yd2FyZGluZ1J1bGVNZXNzYWdlVHlwZXMgPSBbXG4gICAgICAgICAgICBNZXNzYWdlVHlwZS5QYWdlRXZlbnQsXG4gICAgICAgICAgICBNZXNzYWdlVHlwZS5QYWdlVmlldyxcbiAgICAgICAgICAgIE1lc3NhZ2VUeXBlLkNvbW1lcmNlXG4gICAgICAgIF07XG5cbiAgICBpZiAoIXV0aWxpdGllcy5pc1dlYlZpZXdFbWJlZGRlZChuYXZpZ2F0b3IpICYmIGZvcndhcmRlcnMpIHtcbiAgICAgICAgaGFzaGVkTmFtZSA9IGdlbmVyYXRlSGFzaChldmVudC5FdmVudENhdGVnb3J5ICsgZXZlbnQuRXZlbnROYW1lKTtcbiAgICAgICAgaGFzaGVkVHlwZSA9IGdlbmVyYXRlSGFzaChldmVudC5FdmVudENhdGVnb3J5KTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcndhcmRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChldmVudC5EZWJ1ZyA9PT0gdHJ1ZSAmJiBmb3J3YXJkZXJzW2ldLmlzU2FuZGJveCA9PT0gZmFsc2UgJiYgZm9yd2FyZGVyc1tpXS5oYXNTYW5kYm94ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5EZWJ1ZyA9PT0gZmFsc2UgJiYgZm9yd2FyZGVyc1tpXS5pc1NhbmRib3ggPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgYXR0cmlidXRlIGZvcndhcmRpbmcgcnVsZS4gVGhpcyBydWxlIGFsbG93cyB1c2VycyB0byBvbmx5IGZvcndhcmQgYW4gZXZlbnQgaWYgYSBcbiAgICAgICAgICAgIC8vIHNwZWNpZmljIGF0dHJpYnV0ZSBleGlzdHMgYW5kIGhhcyBhIHNwZWNpZmljIHZhbHVlLiBBbHRlcm5hdGl2ZWx5LCB0aGV5IGNhbiBzcGVjaWZ5IFxuICAgICAgICAgICAgLy8gdGhhdCBhbiBldmVudCBub3QgYmUgZm9yd2FyZGVkIGlmIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlIG5hbWUgYW5kIHZhbHVlIGV4aXN0cy5cbiAgICAgICAgICAgIC8vIFRoZSB0d28gY2FzZXMgYXJlIGNvbnRyb2xsZWQgYnkgdGhlIFwiaW5jbHVkZU9uTWF0Y2hcIiBib29sZWFuIHZhbHVlLlxuICAgICAgICAgICAgLy8gU3VwcG9ydGVkIG1lc3NhZ2UgdHlwZXMgZm9yIGF0dHJpYnV0ZSBmb3J3YXJkaW5nIHJ1bGVzIGFyZSBkZWZpbmVkIGluIHRoZSBmb3J3YXJkaW5nUnVsZU1lc3NhZ2VUeXBlcyBhcnJheVxuXG4gICAgICAgICAgICBpZiAoZm9yd2FyZGluZ1J1bGVNZXNzYWdlVHlwZXMuaW5kZXhPZihldmVudC5FdmVudERhdGFUeXBlKSA+IC0xXG4gICAgICAgICAgICAgICAgJiYgZm9yd2FyZGVyc1tpXS5maWx0ZXJpbmdFdmVudEF0dHJpYnV0ZVZhbHVlXG4gICAgICAgICAgICAgICAgJiYgZm9yd2FyZGVyc1tpXS5maWx0ZXJpbmdFdmVudEF0dHJpYnV0ZVZhbHVlLmV2ZW50QXR0cmlidXRlTmFtZVxuICAgICAgICAgICAgICAgICYmIGZvcndhcmRlcnNbaV0uZmlsdGVyaW5nRXZlbnRBdHRyaWJ1dGVWYWx1ZS5ldmVudEF0dHJpYnV0ZVZhbHVlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZm91bmRQcm9wID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZmluZCB0aGUgYXR0cmlidXRlIGluIHRoZSBjb2xsZWN0aW9uIG9mIGV2ZW50IGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuRXZlbnRBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZXZlbnQuRXZlbnRBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFzaGVkTmFtZSA9IGdlbmVyYXRlSGFzaChwcm9wKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc2hlZE5hbWUgPT0gZm9yd2FyZGVyc1tpXS5maWx0ZXJpbmdFdmVudEF0dHJpYnV0ZVZhbHVlLmV2ZW50QXR0cmlidXRlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kUHJvcCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaGFzaGVkTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGdlbmVyYXRlSGFzaChldmVudC5FdmVudEF0dHJpYnV0ZXNbcHJvcF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgaXNNYXRjaCA9IGZvdW5kUHJvcCAhPSBudWxsXG4gICAgICAgICAgICAgICAgICAgICYmIGZvdW5kUHJvcC52YWx1ZSA9PSBmb3J3YXJkZXJzW2ldLmZpbHRlcmluZ0V2ZW50QXR0cmlidXRlVmFsdWUuZXZlbnRBdHRyaWJ1dGVWYWx1ZTtcblxuICAgICAgICAgICAgICAgIHZhciBzaG91bGRJbmNsdWRlID1cbiAgICAgICAgICAgICAgICAgICAgZm9yd2FyZGVyc1tpXS5maWx0ZXJpbmdFdmVudEF0dHJpYnV0ZVZhbHVlLmluY2x1ZGVPbk1hdGNoID09PSB0cnVlID8gaXNNYXRjaCA6ICFpc01hdGNoO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2xvbmUgdGhlIGV2ZW50IG9iamVjdCwgYXMgd2UgY291bGQgYmUgc2VuZGluZyBkaWZmZXJlbnQgYXR0cmlidXRlcyB0byBlYWNoIGZvcndhcmRlclxuICAgICAgICAgICAgY2xvbmVkRXZlbnQgPSB7fTtcbiAgICAgICAgICAgIGNsb25lZEV2ZW50ID0gZXh0ZW5kKHRydWUsIGNsb25lZEV2ZW50LCBldmVudCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGV2ZW50IGZpbHRlcmluZyBydWxlc1xuICAgICAgICAgICAgaWYgKGV2ZW50LkV2ZW50RGF0YVR5cGUgPT0gTWVzc2FnZVR5cGUuUGFnZUV2ZW50XG4gICAgICAgICAgICAgICAgJiYgKGluRmlsdGVyZWRMaXN0KGZvcndhcmRlcnNbaV0uZXZlbnROYW1lRmlsdGVycywgaGFzaGVkTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgfHwgaW5GaWx0ZXJlZExpc3QoZm9yd2FyZGVyc1tpXS5ldmVudFR5cGVGaWx0ZXJzLCBoYXNoZWRUeXBlKSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LkV2ZW50RGF0YVR5cGUgPT0gTWVzc2FnZVR5cGUuQ29tbWVyY2UgJiYgaW5GaWx0ZXJlZExpc3QoZm9yd2FyZGVyc1tpXS5ldmVudFR5cGVGaWx0ZXJzLCBoYXNoZWRUeXBlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQuRXZlbnREYXRhVHlwZSA9PSBNZXNzYWdlVHlwZS5QYWdlVmlldyAmJiBpbkZpbHRlcmVkTGlzdChmb3J3YXJkZXJzW2ldLnBhZ2VWaWV3RmlsdGVycywgaGFzaGVkTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgYXR0cmlidXRlIGZpbHRlcmluZyBydWxlc1xuICAgICAgICAgICAgaWYgKGNsb25lZEV2ZW50LkV2ZW50QXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5FdmVudERhdGFUeXBlID09IE1lc3NhZ2VUeXBlLlBhZ2VFdmVudCkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJBdHRyaWJ1dGVzKGNsb25lZEV2ZW50LCBmb3J3YXJkZXJzW2ldLmF0dHJpYnV0ZUZpbHRlcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudC5FdmVudERhdGFUeXBlID09IE1lc3NhZ2VUeXBlLlBhZ2VWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckF0dHJpYnV0ZXMoY2xvbmVkRXZlbnQsIGZvcndhcmRlcnNbaV0ucGFnZVZpZXdBdHRyaWJ1dGVGaWx0ZXJzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIHVzZXIgaWRlbnRpdHkgZmlsdGVyaW5nIHJ1bGVzXG4gICAgICAgICAgICBmaWx0ZXJVc2VySWRlbnRpdGllcyhjbG9uZWRFdmVudCwgZm9yd2FyZGVyc1tpXS51c2VySWRlbnRpdHlGaWx0ZXJzKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgdXNlciBhdHRyaWJ1dGUgZmlsdGVyaW5nIHJ1bGVzXG4gICAgICAgICAgICBmaWx0ZXJVc2VyQXR0cmlidXRlcyhjbG9uZWRFdmVudCwgZm9yd2FyZGVyc1tpXS51c2VyQXR0cmlidXRlRmlsdGVycyk7XG5cbiAgICAgICAgICAgIGxvZ0RlYnVnKCdTZW5kaW5nIG1lc3NhZ2UgdG8gZm9yd2FyZGVyOiAnICsgZm9yd2FyZGVyc1tpXS5uYW1lKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmb3J3YXJkZXJzW2ldLnByb2Nlc3MoY2xvbmVkRXZlbnQpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgbG9nRGVidWcocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdEZvcndhcmRlcnMoKSB7XG4gICAgaWYgKCF1dGlsaXRpZXMuaXNXZWJWaWV3RW1iZWRkZWQobmF2aWdhdG9yKSAmJiBmb3J3YXJkZXJzKSB7XG5cbiAgICAgICAgLy8gU29tZSBqcyBsaWJyYXJpZXMgcmVxdWlyZSB0aGF0IHRoZXkgYmUgbG9hZGVkIGZpcnN0LCBvciBsYXN0LCBldGNcbiAgICAgICAgZm9yd2FyZGVycy5zb3J0KGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgICAgIHguc2V0dGluZ3MuUHJpb3JpdHlWYWx1ZSA9IHguc2V0dGluZ3MuUHJpb3JpdHlWYWx1ZSB8fCAwO1xuICAgICAgICAgICAgeS5zZXR0aW5ncy5Qcmlvcml0eVZhbHVlID0geS5zZXR0aW5ncy5Qcmlvcml0eVZhbHVlIHx8IDA7XG4gICAgICAgICAgICByZXR1cm4gLTEgKiAoeC5zZXR0aW5ncy5Qcmlvcml0eVZhbHVlIC0geS5zZXR0aW5ncy5Qcmlvcml0eVZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3J3YXJkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZm9yd2FyZGVyc1tpXS5pc1NhbmRib3ggPT09IG1QYXJ0aWNsZS5pc1NhbmRib3ggfHxcbiAgICAgICAgICAgICAgICAoIWZvcndhcmRlcnNbaV0uaXNTYW5kYm94ICYmICFmb3J3YXJkZXJzW2ldLmhhc1NhbmRib3gpKSB7XG4gICAgICAgICAgICAgICAgZm9yd2FyZGVyc1tpXS5pbml0KGZvcndhcmRlcnNbaV0uc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgIHNlbmRGb3J3YXJkaW5nU3RhdHMsXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICB1c2VyQXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkZW50aXRpZXMsXG4gICAgICAgICAgICAgICAgICAgIGFwcFZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGFwcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbUZsYWdzLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlUmVzcG9uc2UocmVzcG9uc2VUZXh0KSB7XG4gICAgdmFyIG5vdyA9IG5ldyBEYXRlKCksXG4gICAgICAgIHNldHRpbmdzLFxuICAgICAgICBwcm9wLFxuICAgICAgICBmdWxsUHJvcDtcblxuICAgIGlmICghcmVzcG9uc2VUZXh0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBsb2dEZWJ1ZygnUGFyc2luZyByZXNwb25zZSBmcm9tIHNlcnZlcicpO1xuXG4gICAgICAgIHNldHRpbmdzID0gSlNPTi5wYXJzZShyZXNwb25zZVRleHQpO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncyAmJiBzZXR0aW5ncy5TdG9yZSkge1xuICAgICAgICAgICAgbG9nRGVidWcoJ1BhcnNlZCBzdG9yZSBmcm9tIHJlc3BvbnNlLCB1cGRhdGluZyBsb2NhbCBzZXR0aW5ncycpO1xuXG4gICAgICAgICAgICBpZihzZXJ2ZXJTZXR0aW5ncyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNlcnZlclNldHRpbmdzID0ge307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAocHJvcCBpbiBzZXR0aW5ncy5TdG9yZSkge1xuICAgICAgICAgICAgICAgIGlmICghc2V0dGluZ3MuU3RvcmUuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVsbFByb3AgPSBzZXR0aW5ncy5TdG9yZVtwcm9wXTtcblxuICAgICAgICAgICAgICAgIGlmICghZnVsbFByb3AuVmFsdWUgfHwgbmV3IERhdGUoZnVsbFByb3AuRXhwaXJlcykgPCBub3cpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzZXR0aW5nIHNob3VsZCBiZSBkZWxldGVkIGZyb20gdGhlIGxvY2FsIHN0b3JlIGlmIGl0IGV4aXN0c1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJTZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNlcnZlclNldHRpbmdzW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgdmFsaWQgc2V0dGluZ1xuXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclNldHRpbmdzW3Byb3BdID0gZnVsbFByb3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb29raWUuc2V0Q29va2llKFxuICAgICAgICAgICAgICAgIENvbmZpZyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNpZDogc2Vzc2lvbklkLCBpZTogaXNFbmFibGVkLCBzYTogc2Vzc2lvbkF0dHJpYnV0ZXMsIFxuICAgICAgICAgICAgICAgICAgICB1YTogdXNlckF0dHJpYnV0ZXMsIHVpOiB1c2VySWRlbnRpdGllcywgc3M6IHNlcnZlclNldHRpbmdzLCBkdDogZGV2VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGxlczogbGFzdEV2ZW50U2VudCA/IGxhc3RFdmVudFNlbnQuZ2V0VGltZSgpIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgYXY6IGFwcFZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGNnaWQ6IGNsaWVudElkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBsb2dEZWJ1ZyhcIkVycm9yIHBhcnNpbmcgSlNPTiByZXNwb25zZSBmcm9tIHNlcnZlcjogXCIgKyBlLm5hbWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3RhcnRUcmFja2luZygpIHtcbiAgICBpZiAoIWlzVHJhY2tpbmcpIHtcbiAgICAgICAgaWYgKFwiZ2VvbG9jYXRpb25cIiBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgICAgICAgIHdhdGNoUG9zaXRpb25JZCA9IG5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uKGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgbG5nOiBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpc1RyYWNraW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gc3RvcFRyYWNraW5nKCkge1xuICAgIGlmIChpc1RyYWNraW5nKSB7XG4gICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHdhdGNoUG9zaXRpb25JZCk7XG4gICAgICAgIGN1cnJlbnRQb3NpdGlvbiA9IG51bGw7XG4gICAgICAgIGlzVHJhY2tpbmcgPSBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRDdXN0b21GbGFncyhldmVudCwgZHRvKSB7XG4gICAgdmFyIHZhbHVlQXJyYXkgPSBbXTtcbiAgICBkdG8uZmxhZ3MgPSB7fTtcblxuICAgIGZvciAodmFyIHByb3AgaW4gZXZlbnQuQ3VzdG9tRmxhZ3MpIHtcbiAgICAgICAgdmFsdWVBcnJheSA9IFtdO1xuXG4gICAgICAgIGlmIChldmVudC5DdXN0b21GbGFncy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQuQ3VzdG9tRmxhZ3NbcHJvcF0pKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5DdXN0b21GbGFnc1twcm9wXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50LkN1c3RvbUZsYWdzW3Byb3BdW2ldID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfHwgdHlwZW9mIGV2ZW50LkN1c3RvbUZsYWdzW3Byb3BdW2ldID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfHwgdHlwZW9mIGV2ZW50LkN1c3RvbUZsYWdzW3Byb3BdW2ldID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlQXJyYXkucHVzaChldmVudC5DdXN0b21GbGFnc1twcm9wXVtpXS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBldmVudC5DdXN0b21GbGFnc1twcm9wXSA9PT0gJ251bWJlcidcbiAgICAgICAgICAgICAgICB8fCB0eXBlb2YgZXZlbnQuQ3VzdG9tRmxhZ3NbcHJvcF0gPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgfHwgdHlwZW9mIGV2ZW50LkN1c3RvbUZsYWdzW3Byb3BdID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZUFycmF5LnB1c2goZXZlbnQuQ3VzdG9tRmxhZ3NbcHJvcF0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZUFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBkdG8uZmxhZ3NbcHJvcF0gPSB2YWx1ZUFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0RXZlbnRUb0RUTyhldmVudCkge1xuICAgIHZhciBkdG8gPSB7XG4gICAgICAgIG46IGV2ZW50LkV2ZW50TmFtZSxcbiAgICAgICAgZXQ6IGV2ZW50LkV2ZW50Q2F0ZWdvcnksXG4gICAgICAgIHVhOiBldmVudC5Vc2VyQXR0cmlidXRlcyxcbiAgICAgICAgc2E6IGV2ZW50LlNlc3Npb25BdHRyaWJ1dGVzLFxuICAgICAgICB1aTogZXZlbnQuVXNlcklkZW50aXRpZXMsXG4gICAgICAgIHN0cjogZXZlbnQuU3RvcmUsXG4gICAgICAgIGF0dHJzOiBldmVudC5FdmVudEF0dHJpYnV0ZXMsXG4gICAgICAgIHNkazogZXZlbnQuU0RLVmVyc2lvbixcbiAgICAgICAgc2lkOiBldmVudC5TZXNzaW9uSWQsXG4gICAgICAgIGR0OiBldmVudC5FdmVudERhdGFUeXBlLFxuICAgICAgICBkYmc6IGV2ZW50LkRlYnVnLFxuICAgICAgICBjdDogZXZlbnQuVGltZXN0YW1wLFxuICAgICAgICBsYzogZXZlbnQuTG9jYXRpb24sXG4gICAgICAgIG86IGV2ZW50Lk9wdE91dCxcbiAgICAgICAgZWVjOiBldmVudC5FeHBhbmRlZEV2ZW50Q291bnQsXG4gICAgICAgIGF2OiBldmVudC5BcHBWZXJzaW9uLFxuICAgICAgICBjZ2lkOiBldmVudC5DbGllbnRHZW5lcmF0ZWRJZFxuICAgIH07XG5cbiAgICBpZiAoZXZlbnQuQ3VzdG9tRmxhZ3MpIHtcbiAgICAgICAgY29udmVydEN1c3RvbUZsYWdzKGV2ZW50LCBkdG8pO1xuICAgIH1cblxuICAgIGR0by5wYiA9IGNvbnZlcnRQcm9kdWN0QmFnVG9EVE8oKTtcblxuICAgIGlmIChldmVudC5FdmVudERhdGFUeXBlID09IE1lc3NhZ2VUeXBlLkNvbW1lcmNlKSB7XG4gICAgICAgIGR0by5jdSA9IGN1cnJlbmN5Q29kZTtcblxuICAgICAgICBpZiAoZXZlbnQuU2hvcHBpbmdDYXJ0KSB7XG4gICAgICAgICAgICBkdG8uc2MgPSB7XG4gICAgICAgICAgICAgICAgcGw6IGNvbnZlcnRQcm9kdWN0TGlzdFRvRFRPKGV2ZW50LlNob3BwaW5nQ2FydC5Qcm9kdWN0TGlzdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5Qcm9kdWN0QWN0aW9uKSB7XG4gICAgICAgICAgICBkdG8ucGQgPSB7XG4gICAgICAgICAgICAgICAgYW46IGV2ZW50LlByb2R1Y3RBY3Rpb24uUHJvZHVjdEFjdGlvblR5cGUsXG4gICAgICAgICAgICAgICAgY3M6IGV2ZW50LlByb2R1Y3RBY3Rpb24uQ2hlY2tvdXRTdGVwLFxuICAgICAgICAgICAgICAgIGNvOiBldmVudC5Qcm9kdWN0QWN0aW9uLkNoZWNrb3V0T3B0aW9ucyxcbiAgICAgICAgICAgICAgICBwbDogY29udmVydFByb2R1Y3RMaXN0VG9EVE8oZXZlbnQuUHJvZHVjdEFjdGlvbi5Qcm9kdWN0TGlzdCksXG4gICAgICAgICAgICAgICAgdGk6IGV2ZW50LlByb2R1Y3RBY3Rpb24uVHJhbnNhY3Rpb25JZCxcbiAgICAgICAgICAgICAgICB0YTogZXZlbnQuUHJvZHVjdEFjdGlvbi5BZmZpbGlhdGlvbixcbiAgICAgICAgICAgICAgICB0Y2M6IGV2ZW50LlByb2R1Y3RBY3Rpb24uQ291cG9uQ29kZSxcbiAgICAgICAgICAgICAgICB0cjogZXZlbnQuUHJvZHVjdEFjdGlvbi5Ub3RhbEFtb3VudCxcbiAgICAgICAgICAgICAgICB0czogZXZlbnQuUHJvZHVjdEFjdGlvbi5TaGlwcGluZ0Ftb3VudCxcbiAgICAgICAgICAgICAgICB0dDogZXZlbnQuUHJvZHVjdEFjdGlvbi5UYXhBbW91bnRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnQuUHJvbW90aW9uQWN0aW9uKSB7XG4gICAgICAgICAgICBkdG8ucG0gPSB7XG4gICAgICAgICAgICAgICAgYW46IGV2ZW50LlByb21vdGlvbkFjdGlvbi5Qcm9tb3Rpb25BY3Rpb25UeXBlLFxuICAgICAgICAgICAgICAgIHBsOiBldmVudC5Qcm9tb3Rpb25BY3Rpb24uUHJvbW90aW9uTGlzdC5tYXAoZnVuY3Rpb24ocHJvbW90aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcHJvbW90aW9uLklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm06IHByb21vdGlvbi5OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3I6IHByb21vdGlvbi5DcmVhdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBzOiBwcm9tb3Rpb24uUG9zaXRpb24gPT0gbnVsbCA/IDAgOiBwcm9tb3Rpb24uUG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudC5Qcm9kdWN0SW1wcmVzc2lvbnMpIHtcbiAgICAgICAgICAgIGR0by5waSA9IGV2ZW50LlByb2R1Y3RJbXByZXNzaW9ucy5tYXAoZnVuY3Rpb24oaW1wcmVzc2lvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHBpbDogaW1wcmVzc2lvbi5Qcm9kdWN0SW1wcmVzc2lvbkxpc3QsXG4gICAgICAgICAgICAgICAgICAgIHBsOiBjb252ZXJ0UHJvZHVjdExpc3RUb0RUTyhpbXByZXNzaW9uLlByb2R1Y3RMaXN0KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LkV2ZW50RGF0YVR5cGUgPT0gTWVzc2FnZVR5cGUuUHJvZmlsZSkge1xuICAgICAgICBkdG8ucGV0ID0gZXZlbnQuUHJvZmlsZU1lc3NhZ2VUeXBlO1xuICAgIH1cblxuICAgIHJldHVybiBkdG87XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRQcm9kdWN0TGlzdFRvRFRPKHByb2R1Y3RMaXN0KSB7XG4gICAgaWYgKCFwcm9kdWN0TGlzdCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2R1Y3RMaXN0Lm1hcChmdW5jdGlvbihwcm9kdWN0KSB7XG4gICAgICAgIHJldHVybiBjb252ZXJ0UHJvZHVjdFRvRFRPKHByb2R1Y3QpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0UHJvZHVjdFRvRFRPKHByb2R1Y3QpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpZDogcHJvZHVjdC5Ta3UsXG4gICAgICAgIG5tOiBwcm9kdWN0Lk5hbWUsXG4gICAgICAgIHByOiBwcm9kdWN0LlByaWNlID09IG51bGwgPyAwIDogcHJvZHVjdC5QcmljZSxcbiAgICAgICAgcXQ6IHByb2R1Y3QuUXVhbnRpdHkgPT0gbnVsbCA/IDAgOiBwcm9kdWN0LlF1YW50aXR5LFxuICAgICAgICBicjogcHJvZHVjdC5CcmFuZCxcbiAgICAgICAgdmE6IHByb2R1Y3QuVmFyaWFudCxcbiAgICAgICAgY2E6IHByb2R1Y3QuQ2F0ZWdvcnksXG4gICAgICAgIHBzOiBwcm9kdWN0LlBvc2l0aW9uID09IG51bGwgPyAwIDogcHJvZHVjdC5Qb3NpdGlvbixcbiAgICAgICAgY2M6IHByb2R1Y3QuQ291cG9uQ29kZSxcbiAgICAgICAgdHBhOiBwcm9kdWN0LlRvdGFsQW1vdW50ID09IG51bGwgPyAwIDogcHJvZHVjdC5Ub3RhbEFtb3VudCxcbiAgICAgICAgYXR0cnM6IHByb2R1Y3QuQXR0cmlidXRlc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRQcm9kdWN0QmFnVG9EVE8oKSB7XG4gICAgdmFyIGNvbnZlcnRlZEJhZyA9IHt9LFxuICAgICAgICBsaXN0O1xuXG4gICAgZm9yICh2YXIgcHJvcCBpbiBwcm9kdWN0c0JhZ3MpIHtcbiAgICAgICAgaWYgKCFwcm9kdWN0c0JhZ3MuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGlzdCA9IHByb2R1Y3RzQmFnc1twcm9wXS5tYXAoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRQcm9kdWN0VG9EVE8oaXRlbSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh1dGlsaXRpZXMuaXNXZWJWaWV3RW1iZWRkZWQobmF2aWdhdG9yKSkge1xuICAgICAgICAgICAgY29udmVydGVkQmFnW3Byb3BdID0ge1xuICAgICAgICAgICAgICAgIFByb2R1Y3RMaXN0OiBsaXN0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udmVydGVkQmFnW3Byb3BdID0ge1xuICAgICAgICAgICAgICAgIHBsOiBsaXN0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnZlcnRlZEJhZztcbn1cblxuZnVuY3Rpb24gY29udmVydFRyYW5zYWN0aW9uQXR0cmlidXRlc1RvUHJvZHVjdEFjdGlvbih0cmFuc2FjdGlvbkF0dHJpYnV0ZXMsIHByb2R1Y3RBY3Rpb24pIHtcbiAgICBwcm9kdWN0QWN0aW9uLlRyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbkF0dHJpYnV0ZXMuSWQ7XG4gICAgcHJvZHVjdEFjdGlvbi5BZmZpbGlhdGlvbiA9IHRyYW5zYWN0aW9uQXR0cmlidXRlcy5BZmZpbGlhdGlvbjtcbiAgICBwcm9kdWN0QWN0aW9uLkNvdXBvbkNvZGUgPSB0cmFuc2FjdGlvbkF0dHJpYnV0ZXMuQ291cG9uQ29kZTtcbiAgICBwcm9kdWN0QWN0aW9uLlRvdGFsQW1vdW50ID0gdHJhbnNhY3Rpb25BdHRyaWJ1dGVzLlJldmVudWU7XG4gICAgcHJvZHVjdEFjdGlvbi5TaGlwcGluZ0Ftb3VudCA9IHRyYW5zYWN0aW9uQXR0cmlidXRlcy5TaGlwcGluZztcbiAgICBwcm9kdWN0QWN0aW9uLlRheEFtb3VudCA9IHRyYW5zYWN0aW9uQXR0cmlidXRlcy5UYXg7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50T2JqZWN0KG1lc3NhZ2VUeXBlLCBuYW1lLCBkYXRhLCBldmVudFR5cGUsIGN1c3RvbUZsYWdzKSB7XG4gICAgdmFyIG9wdE91dCA9IChtZXNzYWdlVHlwZSA9PSBNZXNzYWdlVHlwZS5PcHRPdXQgPyAhaXNFbmFibGVkIDogbnVsbCk7XG5cbiAgICBpZiAoc2Vzc2lvbklkIHx8IG1lc3NhZ2VUeXBlID09IE1lc3NhZ2VUeXBlLk9wdE91dCkge1xuICAgICAgICBsYXN0RXZlbnRTZW50ID0gbmV3IERhdGUoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgRXZlbnROYW1lOiBuYW1lID8gbmFtZSA6IG1lc3NhZ2VUeXBlLFxuICAgICAgICAgICAgRXZlbnRDYXRlZ29yeTogZXZlbnRUeXBlLFxuICAgICAgICAgICAgVXNlckF0dHJpYnV0ZXM6IHVzZXJBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgU2Vzc2lvbkF0dHJpYnV0ZXM6IHNlc3Npb25BdHRyaWJ1dGVzLFxuICAgICAgICAgICAgVXNlcklkZW50aXRpZXM6IHVzZXJJZGVudGl0aWVzLFxuICAgICAgICAgICAgU3RvcmU6IHNlcnZlclNldHRpbmdzLFxuICAgICAgICAgICAgRXZlbnRBdHRyaWJ1dGVzOiBkYXRhLFxuICAgICAgICAgICAgU0RLVmVyc2lvbjogc2RrVmVyc2lvbixcbiAgICAgICAgICAgIFNlc3Npb25JZDogc2Vzc2lvbklkLFxuICAgICAgICAgICAgRXZlbnREYXRhVHlwZTogbWVzc2FnZVR5cGUsXG4gICAgICAgICAgICBEZWJ1ZzogbVBhcnRpY2xlLmlzU2FuZGJveCxcbiAgICAgICAgICAgIFRpbWVzdGFtcDogbGFzdEV2ZW50U2VudC5nZXRUaW1lKCksXG4gICAgICAgICAgICBMb2NhdGlvbjogY3VycmVudFBvc2l0aW9uLFxuICAgICAgICAgICAgT3B0T3V0OiBvcHRPdXQsXG4gICAgICAgICAgICBQcm9kdWN0QmFnczogcHJvZHVjdHNCYWdzLFxuICAgICAgICAgICAgRXhwYW5kZWRFdmVudENvdW50OiAwLFxuICAgICAgICAgICAgQ3VzdG9tRmxhZ3M6IGN1c3RvbUZsYWdzLFxuICAgICAgICAgICAgQXBwVmVyc2lvbjogYXBwVmVyc2lvbixcbiAgICAgICAgICAgIENsaWVudEdlbmVyYXRlZElkOiBjbGllbnRJZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBnZXRQcm9kdWN0QWN0aW9uRXZlbnROYW1lKHByb2R1Y3RBY3Rpb25UeXBlKSB7XG4gICAgc3dpdGNoIChwcm9kdWN0QWN0aW9uVHlwZSkge1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkFkZFRvQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnQWRkVG9DYXJ0JztcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5BZGRUb1dpc2hsaXN0OlxuICAgICAgICAgICAgcmV0dXJuICdBZGRUb1dpc2hsaXN0JztcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5DaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnQ2hlY2tvdXQnO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkNsaWNrOlxuICAgICAgICAgICAgcmV0dXJuICdDbGljayc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuUHVyY2hhc2U6XG4gICAgICAgICAgICByZXR1cm4gJ1B1cmNoYXNlJztcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5SZWZ1bmQ6XG4gICAgICAgICAgICByZXR1cm4gJ1JlZnVuZCc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuUmVtb3ZlRnJvbUNhcnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1JlbW92ZUZyb21DYXJ0JztcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5SZW1vdmVGcm9tV2lzaGxpc3Q6XG4gICAgICAgICAgICByZXR1cm4gJ1JlbW92ZUZyb21XaXNobGlzdCc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuVmlld0RldGFpbDpcbiAgICAgICAgICAgIHJldHVybiAnVmlld0RldGFpbCc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuVW5rbm93bjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5rbm93bic7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRQcm9tb3Rpb25BY3Rpb25FdmVudE5hbWUocHJvbW90aW9uQWN0aW9uVHlwZSkge1xuICAgIHN3aXRjaCAocHJvbW90aW9uQWN0aW9uVHlwZSkge1xuICAgICAgICBjYXNlIFByb21vdGlvbkFjdGlvblR5cGUuUHJvbW90aW9uQ2xpY2s6XG4gICAgICAgICAgICByZXR1cm4gJ1Byb21vdGlvbkNsaWNrJztcbiAgICAgICAgY2FzZSBQcm9tb3Rpb25BY3Rpb25UeXBlLlByb21vdGlvblZpZXc6XG4gICAgICAgICAgICByZXR1cm4gJ1Byb21vdGlvblZpZXcnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmtub3duJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRQcm9kdWN0QWN0aW9uVG9FdmVudFR5cGUocHJvZHVjdEFjdGlvblR5cGUpIHtcbiAgICBzd2l0Y2ggKHByb2R1Y3RBY3Rpb25UeXBlKSB7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuQWRkVG9DYXJ0OlxuICAgICAgICAgICAgcmV0dXJuIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RBZGRUb0NhcnQ7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuQWRkVG9XaXNobGlzdDpcbiAgICAgICAgICAgIHJldHVybiBDb21tZXJjZUV2ZW50VHlwZS5Qcm9kdWN0QWRkVG9XaXNobGlzdDtcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5DaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiBDb21tZXJjZUV2ZW50VHlwZS5Qcm9kdWN0Q2hlY2tvdXQ7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuQ2xpY2s6XG4gICAgICAgICAgICByZXR1cm4gQ29tbWVyY2VFdmVudFR5cGUuUHJvZHVjdENsaWNrO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLlB1cmNoYXNlOlxuICAgICAgICAgICAgcmV0dXJuIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RQdXJjaGFzZTtcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5SZWZ1bmQ6XG4gICAgICAgICAgICByZXR1cm4gQ29tbWVyY2VFdmVudFR5cGUuUHJvZHVjdFJlZnVuZDtcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5SZW1vdmVGcm9tQ2FydDpcbiAgICAgICAgICAgIHJldHVybiBDb21tZXJjZUV2ZW50VHlwZS5Qcm9kdWN0UmVtb3ZlRnJvbUNhcnQ7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuUmVtb3ZlRnJvbVdpc2hsaXN0OlxuICAgICAgICAgICAgcmV0dXJuIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RSZW1vdmVGcm9tV2lzaGxpc3Q7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuVW5rbm93bjpcbiAgICAgICAgICAgIHJldHVybiBFdmVudFR5cGUuVW5rbm93bjtcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5WaWV3RGV0YWlsOlxuICAgICAgICAgICAgcmV0dXJuIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RWaWV3RGV0YWlsO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbG9nRGVidWcoJ0NvdWxkIG5vdCBjb252ZXJ0IHByb2R1Y3QgYWN0aW9uIHR5cGUgJyArIHByb2R1Y3RBY3Rpb25UeXBlICsgJyB0byBldmVudCB0eXBlJyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRQcm9tb3Rpb25BY3Rpb25Ub0V2ZW50VHlwZShwcm9tb3Rpb25BY3Rpb25UeXBlKSB7XG4gICAgc3dpdGNoIChwcm9tb3Rpb25BY3Rpb25UeXBlKSB7XG4gICAgICAgIGNhc2UgUHJvbW90aW9uQWN0aW9uVHlwZS5Qcm9tb3Rpb25DbGljazpcbiAgICAgICAgICAgIHJldHVybiBDb21tZXJjZUV2ZW50VHlwZS5Qcm9tb3Rpb25DbGljaztcbiAgICAgICAgY2FzZSBQcm9tb3Rpb25BY3Rpb25UeXBlLlByb21vdGlvblZpZXc6XG4gICAgICAgICAgICByZXR1cm4gQ29tbWVyY2VFdmVudFR5cGUuUHJvbW90aW9uVmlldztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGxvZ0RlYnVnKCdDb3VsZCBub3QgY29udmVydCBwcm9tb3Rpb24gYWN0aW9uIHR5cGUgJyArIHByb21vdGlvbkFjdGlvblR5cGUgKyAnIHRvIGV2ZW50IHR5cGUnKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBleHBhbmRQcm9kdWN0QWN0aW9uKGNvbW1lcmNlRXZlbnQpIHtcbiAgICB2YXIgYXBwRXZlbnRzID0gW107XG4gICAgaWYgKGNvbW1lcmNlRXZlbnQuUHJvZHVjdEFjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhcHBFdmVudHM7XG4gICAgfVxuICAgIHZhciBzaG91bGRFeHRyYWN0QWN0aW9uQXR0cmlidXRlcyA9IGZhbHNlO1xuICAgIGlmIChjb21tZXJjZUV2ZW50LlByb2R1Y3RBY3Rpb24uUHJvZHVjdEFjdGlvblR5cGUgPT0gUHJvZHVjdEFjdGlvblR5cGUuUHVyY2hhc2UgfHwgXG4gICAgICAgIGNvbW1lcmNlRXZlbnQuUHJvZHVjdEFjdGlvbi5Qcm9kdWN0QWN0aW9uVHlwZSA9PSBQcm9kdWN0QWN0aW9uVHlwZS5SZWZ1bmQpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBjb21tZXJjZUV2ZW50LkV2ZW50QXR0cmlidXRlcyB8fCB7fTtcbiAgICAgICAgZXh0cmFjdEFjdGlvbkF0dHJpYnV0ZXMoYXR0cmlidXRlcywgY29tbWVyY2VFdmVudC5Qcm9kdWN0QWN0aW9uKTtcbiAgICAgICAgaWYgKGNvbW1lcmNlRXZlbnQuQ3VycmVuY3lDb2RlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXNbJ0N1cnJlbmN5IENvZGUnXSA9IGNvbW1lcmNlRXZlbnQuQ3VycmVuY3lDb2RlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwbHVzT25lRXZlbnQgPSBjcmVhdGVFdmVudE9iamVjdChNZXNzYWdlVHlwZS5QYWdlRXZlbnQsXG4gICAgICAgICAgICBnZW5lcmF0ZUV4cGFuZGVkRWNvbW1lcmNlTmFtZShQcm9kdWN0QWN0aW9uVHlwZS5nZXRFeHBhbnNpb25OYW1lKGNvbW1lcmNlRXZlbnQuUHJvZHVjdEFjdGlvbi5Qcm9kdWN0QWN0aW9uVHlwZSksIHRydWUpLFxuICAgICAgICAgICAgYXR0cmlidXRlcyxcbiAgICAgICAgICAgIEV2ZW50VHlwZS5UcmFuc2FjdGlvblxuICAgICAgICApO1xuICAgICAgICBhcHBFdmVudHMucHVzaChwbHVzT25lRXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNob3VsZEV4dHJhY3RBY3Rpb25BdHRyaWJ1dGVzID0gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIHByb2R1Y3RzID0gY29tbWVyY2VFdmVudC5Qcm9kdWN0QWN0aW9uLlByb2R1Y3RMaXN0O1xuICAgIGlmIChwcm9kdWN0cyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhcHBFdmVudHM7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBwcm9kdWN0c1tpXS5BdHRyaWJ1dGVzIHx8IHt9O1xuICAgICAgICBpZiAoc2hvdWxkRXh0cmFjdEFjdGlvbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGV4dHJhY3RBY3Rpb25BdHRyaWJ1dGVzKGF0dHJpYnV0ZXMsIGNvbW1lcmNlRXZlbnQuUHJvZHVjdEFjdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHRyYWN0VHJhbnNhY3Rpb25JZChhdHRyaWJ1dGVzLCBjb21tZXJjZUV2ZW50LlByb2R1Y3RBY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGV4dHJhY3RQcm9kdWN0QXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBwcm9kdWN0c1tpXSk7XG5cbiAgICAgICAgdmFyIHByb2R1Y3RFdmVudCA9IGNyZWF0ZUV2ZW50T2JqZWN0KE1lc3NhZ2VUeXBlLlBhZ2VFdmVudCxcbiAgICAgICAgICAgIGdlbmVyYXRlRXhwYW5kZWRFY29tbWVyY2VOYW1lKFByb2R1Y3RBY3Rpb25UeXBlLmdldEV4cGFuc2lvbk5hbWUoY29tbWVyY2VFdmVudC5Qcm9kdWN0QWN0aW9uLlByb2R1Y3RBY3Rpb25UeXBlKSksXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLFxuICAgICAgICAgICAgRXZlbnRUeXBlLlRyYW5zYWN0aW9uXG4gICAgICAgICk7XG4gICAgICAgIGFwcEV2ZW50cy5wdXNoKHByb2R1Y3RFdmVudCk7XG4gICAgfVxuICAgIHJldHVybiBhcHBFdmVudHM7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RQcm9kdWN0QXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBwcm9kdWN0KSB7XG4gICAgaWYgKHByb2R1Y3QuQ291cG9uQ29kZSAhPSBudWxsKVxuICAgICAgICBhdHRyaWJ1dGVzWydDb3Vwb24gQ29kZSddID0gcHJvZHVjdC5Db3Vwb25Db2RlO1xuXG4gICAgaWYgKHByb2R1Y3QuQnJhbmQgIT0gbnVsbClcbiAgICAgICAgYXR0cmlidXRlc1snQnJhbmQnXSA9IHByb2R1Y3QuQnJhbmQ7XG5cbiAgICBpZiAocHJvZHVjdC5DYXRlZ29yeSAhPSBudWxsKVxuICAgICAgICBhdHRyaWJ1dGVzWydDYXRlZ29yeSddID0gcHJvZHVjdC5DYXRlZ29yeTtcblxuICAgIGlmIChwcm9kdWN0Lk5hbWUgIT0gbnVsbClcbiAgICAgICAgYXR0cmlidXRlc1snTmFtZSddID0gcHJvZHVjdC5OYW1lO1xuXG4gICAgaWYgKHByb2R1Y3QuU2t1ICE9IG51bGwpXG4gICAgICAgIGF0dHJpYnV0ZXNbJ0lkJ10gPSBwcm9kdWN0LlNrdTtcblxuICAgIGlmIChwcm9kdWN0LlByaWNlICE9IG51bGwpXG4gICAgICAgIGF0dHJpYnV0ZXNbJ0l0ZW0gUHJpY2UnXSA9IHByb2R1Y3QuUHJpY2U7XG5cbiAgICBpZiAocHJvZHVjdC5RdWFudGl0eSAhPSBudWxsKVxuICAgICAgICBhdHRyaWJ1dGVzWydRdWFudGl0eSddID0gcHJvZHVjdC5RdWFudGl0eTtcblxuICAgIGlmIChwcm9kdWN0LlBvc2l0aW9uICE9IG51bGwpXG4gICAgICAgIGF0dHJpYnV0ZXNbJ1Bvc2l0aW9uJ10gPSBwcm9kdWN0LlBvc2l0aW9uO1xuXG4gICAgaWYgKHByb2R1Y3QuVmFyaWFudCAhPSBudWxsKVxuICAgICAgICBhdHRyaWJ1dGVzWydWYXJpYW50J10gPSBwcm9kdWN0LlZhcmlhbnQ7XG5cbiAgICBhdHRyaWJ1dGVzWydUb3RhbCBQcm9kdWN0IEFtb3VudCddID0gcHJvZHVjdC5Ub3RhbEFtb3VudCAhPSBudWxsID8gcHJvZHVjdC5Ub3RhbEFtb3VudCA6IDA7XG5cbn1cblxuZnVuY3Rpb24gZXh0cmFjdFRyYW5zYWN0aW9uSWQoYXR0cmlidXRlcywgcHJvZHVjdEFjdGlvbikge1xuICAgIGlmIChwcm9kdWN0QWN0aW9uLlRyYW5zYWN0aW9uSWQgIT0gbnVsbClcbiAgICAgICAgYXR0cmlidXRlc1snVHJhbnNhY3Rpb24gSWQnXSA9IHByb2R1Y3RBY3Rpb24uVHJhbnNhY3Rpb25JZDtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEFjdGlvbkF0dHJpYnV0ZXMoYXR0cmlidXRlcywgcHJvZHVjdEFjdGlvbikge1xuICAgIGV4dHJhY3RUcmFuc2FjdGlvbklkKGF0dHJpYnV0ZXMsIHByb2R1Y3RBY3Rpb24pO1xuXG4gICAgaWYgKHByb2R1Y3RBY3Rpb24uQWZmaWxpYXRpb24gIT0gbnVsbClcbiAgICAgICAgYXR0cmlidXRlc1snQWZmaWxpYXRpb24nXSA9IHByb2R1Y3RBY3Rpb24uQWZmaWxpYXRpb247XG5cbiAgICBpZiAocHJvZHVjdEFjdGlvbi5Db3Vwb25Db2RlICE9IG51bGwpXG4gICAgICAgIGF0dHJpYnV0ZXNbJ0NvdXBvbiBDb2RlJ10gPSBwcm9kdWN0QWN0aW9uLkNvdXBvbkNvZGU7XG4gICAgXG4gICAgaWYgKHByb2R1Y3RBY3Rpb24uVG90YWxBbW91bnQgIT0gbnVsbClcbiAgICAgICAgYXR0cmlidXRlc1snVG90YWwgQW1vdW50J10gPSBwcm9kdWN0QWN0aW9uLlRvdGFsQW1vdW50O1xuXG4gICAgaWYgKHByb2R1Y3RBY3Rpb24uU2hpcHBpbmdBbW91bnQgIT0gbnVsbClcbiAgICAgICAgYXR0cmlidXRlc1snU2hpcHBpbmcgQW1vdW50J10gPSBwcm9kdWN0QWN0aW9uLlNoaXBwaW5nQW1vdW50O1xuICAgIFxuICAgIGlmIChwcm9kdWN0QWN0aW9uLlRheEFtb3VudCAhPSBudWxsKVxuICAgICAgICBhdHRyaWJ1dGVzWydUYXggQW1vdW50J10gPSBwcm9kdWN0QWN0aW9uLlRheEFtb3VudDtcblxuICAgIGlmIChwcm9kdWN0QWN0aW9uLkNoZWNrb3V0T3B0aW9ucyAhPSBudWxsKVxuICAgICAgICBhdHRyaWJ1dGVzWydDaGVja291dCBPcHRpb25zJ10gPSBwcm9kdWN0QWN0aW9uLkNoZWNrb3V0T3B0aW9ucztcblxuICAgIGlmIChwcm9kdWN0QWN0aW9uLkNoZWNrb3V0U3RlcCAhPSBudWxsKVxuICAgICAgICBhdHRyaWJ1dGVzWydDaGVja291dCBTdGVwJ10gPSBwcm9kdWN0QWN0aW9uLkNoZWNrb3V0U3RlcDtcbn1cblxuZnVuY3Rpb24gZXhwYW5kUHJvbW90aW9uQWN0aW9uKGNvbW1lcmNlRXZlbnQpIHtcbiAgICB2YXIgYXBwRXZlbnRzID0gW107XG4gICAgaWYgKGNvbW1lcmNlRXZlbnQuUHJvbW90aW9uQWN0aW9uID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGFwcEV2ZW50cztcbiAgICB9XG4gICAgdmFyIHByb21vdGlvbnMgPSBjb21tZXJjZUV2ZW50LlByb21vdGlvbkFjdGlvbi5Qcm9tb3Rpb25MaXN0O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvbW90aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IGNvbW1lcmNlRXZlbnQuRXZlbnRBdHRyaWJ1dGVzIHx8IHt9O1xuICAgICAgICBleHRyYWN0UHJvbW90aW9uQXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBwcm9tb3Rpb25zW2ldKTtcblxuICAgICAgICB2YXIgYXBwRXZlbnQgPSBjcmVhdGVFdmVudE9iamVjdChNZXNzYWdlVHlwZS5QYWdlRXZlbnQsXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVFeHBhbmRlZEVjb21tZXJjZU5hbWUoUHJvbW90aW9uQWN0aW9uVHlwZS5nZXRFeHBhbnNpb25OYW1lKGNvbW1lcmNlRXZlbnQuUHJvbW90aW9uQWN0aW9uLlByb21vdGlvbkFjdGlvblR5cGUpKSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgIEV2ZW50VHlwZS5UcmFuc2FjdGlvblxuICAgICAgICAgICAgKTtcbiAgICAgICAgYXBwRXZlbnRzLnB1c2goYXBwRXZlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gYXBwRXZlbnRzO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUV4cGFuZGVkRWNvbW1lcmNlTmFtZShldmVudE5hbWUsIHBsdXNPbmUpIHtcbiAgICByZXR1cm4gJ2VDb21tZXJjZSAtICcgKyBldmVudE5hbWUgKyAnIC0gJyArIChwbHVzT25lID8gXCJUb3RhbFwiIDogXCJJdGVtXCIpO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0UHJvbW90aW9uQXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBwcm9tb3Rpb24pIHtcbiAgICBpZiAocHJvbW90aW9uLklkICE9IG51bGwpXG4gICAgICAgIGF0dHJpYnV0ZXNbJ0lkJ10gPSBwcm9tb3Rpb24uSWQ7XG5cbiAgICBpZiAocHJvbW90aW9uLkNyZWF0aXZlICE9IG51bGwpIFxuICAgICAgICBhdHRyaWJ1dGVzWydDcmVhdGl2ZSddID0gcHJvbW90aW9uLkNyZWF0aXZlO1xuXG4gICAgaWYgKHByb21vdGlvbi5OYW1lICE9IG51bGwpXG4gICAgICAgIGF0dHJpYnV0ZXNbJ05hbWUnXSA9IHByb21vdGlvbi5OYW1lO1xuXG4gICAgaWYgKHByb21vdGlvbi5Qb3NpdGlvbiAhPSBudWxsKVxuICAgICAgICBhdHRyaWJ1dGVzWydQb3NpdGlvbiddID0gcHJvbW90aW9uLlBvc2l0aW9uO1xufVxuXG5mdW5jdGlvbiBleHBhbmRQcm9kdWN0SW1wcmVzc2lvbihjb21tZXJjZUV2ZW50KSB7XG4gICAgdmFyIGFwcEV2ZW50cyA9IFtdO1xuICAgIGlmIChjb21tZXJjZUV2ZW50LlByb2R1Y3RJbXByZXNzaW9ucyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhcHBFdmVudHM7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29tbWVyY2VFdmVudC5Qcm9kdWN0SW1wcmVzc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGNvbW1lcmNlRXZlbnQuUHJvZHVjdEltcHJlc3Npb25zW2ldLlByb2R1Y3RMaXN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHByb2R1Y3RJbmRleCA9IDA7IHByb2R1Y3RJbmRleCA8IGNvbW1lcmNlRXZlbnQuUHJvZHVjdEltcHJlc3Npb25zW2ldLlByb2R1Y3RMaXN0Lmxlbmd0aDsgcHJvZHVjdEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdCA9IGNvbW1lcmNlRXZlbnQuUHJvZHVjdEltcHJlc3Npb25zW2ldLlByb2R1Y3RMaXN0W3Byb2R1Y3RJbmRleF07XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBjb21tZXJjZUV2ZW50LkV2ZW50QXR0cmlidXRlcyB8fCB7fTtcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdC5BdHRyaWJ1dGVzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYXR0cmlidXRlIGluIHByb2R1Y3QuQXR0cmlidXRlcykgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbYXR0cmlidXRlXSA9IHByb2R1Y3QuQXR0cmlidXRlc1thdHRyaWJ1dGVdOyBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBleHRyYWN0UHJvZHVjdEF0dHJpYnV0ZXMoYXR0cmlidXRlcywgcHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbW1lcmNlRXZlbnQuUHJvZHVjdEltcHJlc3Npb25zW2ldLlByb2R1Y3RJbXByZXNzaW9uTGlzdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbJ1Byb2R1Y3QgSW1wcmVzc2lvbiBMaXN0J10gPSBjb21tZXJjZUV2ZW50LlByb2R1Y3RJbXByZXNzaW9uc1tpXS5Qcm9kdWN0SW1wcmVzc2lvbkxpc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBhcHBFdmVudCA9IGNyZWF0ZUV2ZW50T2JqZWN0KE1lc3NhZ2VUeXBlLlBhZ2VFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlRXhwYW5kZWRFY29tbWVyY2VOYW1lKCdJbXByZXNzaW9uJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRUeXBlLlRyYW5zYWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYXBwRXZlbnRzLnB1c2goYXBwRXZlbnQpXG4gICAgICAgICAgICB9ICAgXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFwcEV2ZW50cztcbn1cblxuZnVuY3Rpb24gZXhwYW5kQ29tbWVyY2VFdmVudChldmVudCkge1xuICAgIGlmIChldmVudCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gZXhwYW5kUHJvZHVjdEFjdGlvbihldmVudClcbiAgICAgICAgICAgIC5jb25jYXQoZXhwYW5kUHJvbW90aW9uQWN0aW9uKGV2ZW50KSlcbiAgICAgICAgICAgIC5jb25jYXQoZXhwYW5kUHJvZHVjdEltcHJlc3Npb24oZXZlbnQpKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29tbWVyY2VFdmVudE9iamVjdCgpIHtcbiAgICB2YXIgYmFzZUV2ZW50O1xuXG4gICAgbG9nRGVidWcoSW5mb3JtYXRpb25NZXNzYWdlcy5TdGFydGluZ0xvZ0NvbW1lcmNlRXZlbnQpO1xuXG4gICAgaWYgKGNhbkxvZygpKSB7XG4gICAgICAgIGlmICghc2Vzc2lvbklkKSB7XG4gICAgICAgICAgICBtUGFydGljbGUuc3RhcnROZXdTZXNzaW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICBiYXNlRXZlbnQgPSBjcmVhdGVFdmVudE9iamVjdChNZXNzYWdlVHlwZS5Db21tZXJjZSk7XG4gICAgICAgIGJhc2VFdmVudC5FdmVudE5hbWUgPSAnZUNvbW1lcmNlIC0gJztcbiAgICAgICAgYmFzZUV2ZW50LkN1cnJlbmN5Q29kZSA9IGN1cnJlbmN5Q29kZTtcbiAgICAgICAgYmFzZUV2ZW50LlNob3BwaW5nQ2FydCA9IHtcbiAgICAgICAgICAgIFByb2R1Y3RMaXN0OiBjYXJ0UHJvZHVjdHNcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gYmFzZUV2ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbG9nRGVidWcoSW5mb3JtYXRpb25NZXNzYWdlcy5BYmFuZG9uTG9nRXZlbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufTtcblxuZnVuY3Rpb24gbG9nQ2hlY2tvdXRFdmVudChzdGVwLCBvcHRpb25zLCBhdHRycykge1xuICAgIHZhciBldmVudCA9IGNyZWF0ZUNvbW1lcmNlRXZlbnRPYmplY3QoKTtcblxuICAgIGlmIChldmVudCkge1xuICAgICAgICBldmVudC5FdmVudE5hbWUgKz0gZ2V0UHJvZHVjdEFjdGlvbkV2ZW50TmFtZShQcm9kdWN0QWN0aW9uVHlwZS5DaGVja291dCk7XG4gICAgICAgIGV2ZW50LkV2ZW50Q2F0ZWdvcnkgPSBDb21tZXJjZUV2ZW50VHlwZS5Qcm9kdWN0Q2hlY2tvdXQ7XG4gICAgICAgIGV2ZW50LlByb2R1Y3RBY3Rpb24gPSB7XG4gICAgICAgICAgICBQcm9kdWN0QWN0aW9uVHlwZTogUHJvZHVjdEFjdGlvblR5cGUuQ2hlY2tvdXQsXG4gICAgICAgICAgICBDaGVja291dFN0ZXA6IHN0ZXAsXG4gICAgICAgICAgICBDaGVja291dE9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgICAgICBQcm9kdWN0TGlzdDogZXZlbnQuU2hvcHBpbmdDYXJ0LlByb2R1Y3RMaXN0XG4gICAgICAgIH07XG5cbiAgICAgICAgbG9nQ29tbWVyY2VFdmVudChldmVudCwgYXR0cnMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbG9nUHJvZHVjdEFjdGlvbkV2ZW50KHByb2R1Y3RBY3Rpb25UeXBlLCBwcm9kdWN0LCBhdHRycykge1xuICAgIHZhciBldmVudCA9IGNyZWF0ZUNvbW1lcmNlRXZlbnRPYmplY3QoKTtcblxuICAgIGlmIChldmVudCkge1xuICAgICAgICBldmVudC5FdmVudENhdGVnb3J5ID0gY29udmVydFByb2R1Y3RBY3Rpb25Ub0V2ZW50VHlwZShwcm9kdWN0QWN0aW9uVHlwZSk7XG4gICAgICAgIGV2ZW50LkV2ZW50TmFtZSArPSBnZXRQcm9kdWN0QWN0aW9uRXZlbnROYW1lKHByb2R1Y3RBY3Rpb25UeXBlKTtcbiAgICAgICAgZXZlbnQuUHJvZHVjdEFjdGlvbiA9IHtcbiAgICAgICAgICAgIFByb2R1Y3RBY3Rpb25UeXBlOiBwcm9kdWN0QWN0aW9uVHlwZSxcbiAgICAgICAgICAgIFByb2R1Y3RMaXN0OiBBcnJheS5pc0FycmF5KHByb2R1Y3QpID8gcHJvZHVjdCA6IFtwcm9kdWN0XVxuICAgICAgICB9O1xuXG4gICAgICAgIGxvZ0NvbW1lcmNlRXZlbnQoZXZlbnQsIGF0dHJzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxvZ1B1cmNoYXNlRXZlbnQodHJhbnNhY3Rpb25BdHRyaWJ1dGVzLCBwcm9kdWN0LCBhdHRycykge1xuICAgIHZhciBldmVudCA9IGNyZWF0ZUNvbW1lcmNlRXZlbnRPYmplY3QoKTtcblxuICAgIGlmIChldmVudCkge1xuICAgICAgICBldmVudC5FdmVudE5hbWUgKz0gZ2V0UHJvZHVjdEFjdGlvbkV2ZW50TmFtZShQcm9kdWN0QWN0aW9uVHlwZS5QdXJjaGFzZSk7XG4gICAgICAgIGV2ZW50LkV2ZW50Q2F0ZWdvcnkgPSBDb21tZXJjZUV2ZW50VHlwZS5Qcm9kdWN0UHVyY2hhc2U7XG4gICAgICAgIGV2ZW50LlByb2R1Y3RBY3Rpb24gPSB7XG4gICAgICAgICAgICBQcm9kdWN0QWN0aW9uVHlwZTogUHJvZHVjdEFjdGlvblR5cGUuUHVyY2hhc2VcbiAgICAgICAgfTtcbiAgICAgICAgZXZlbnQuUHJvZHVjdEFjdGlvbi5Qcm9kdWN0TGlzdCA9IGJ1aWxkUHJvZHVjdExpc3QoZXZlbnQsIHByb2R1Y3QpO1xuXG4gICAgICAgIGNvbnZlcnRUcmFuc2FjdGlvbkF0dHJpYnV0ZXNUb1Byb2R1Y3RBY3Rpb24odHJhbnNhY3Rpb25BdHRyaWJ1dGVzLCBldmVudC5Qcm9kdWN0QWN0aW9uKTtcblxuICAgICAgICBsb2dDb21tZXJjZUV2ZW50KGV2ZW50LCBhdHRycyk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gbG9nUmVmdW5kRXZlbnQodHJhbnNhY3Rpb25BdHRyaWJ1dGVzLCBwcm9kdWN0LCBhdHRycykge1xuICAgIGlmICh0cmFuc2FjdGlvbkF0dHJpYnV0ZXMgPT0gbnVsbCB8fCB0eXBlb2YgdHJhbnNhY3Rpb25BdHRyaWJ1dGVzID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvZ0RlYnVnKEVycm9yTWVzc2FnZXMuVHJhbnNhY3Rpb25SZXF1aXJlZCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZXZlbnQgPSBjcmVhdGVDb21tZXJjZUV2ZW50T2JqZWN0KCk7XG5cbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuRXZlbnROYW1lICs9IGdldFByb2R1Y3RBY3Rpb25FdmVudE5hbWUoUHJvZHVjdEFjdGlvblR5cGUuUmVmdW5kKTtcbiAgICAgICAgZXZlbnQuRXZlbnRDYXRlZ29yeSA9IENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RSZWZ1bmQ7XG4gICAgICAgIGV2ZW50LlByb2R1Y3RBY3Rpb24gPSB7XG4gICAgICAgICAgICBQcm9kdWN0QWN0aW9uVHlwZTogUHJvZHVjdEFjdGlvblR5cGUuUmVmdW5kXG4gICAgICAgIH07XG4gICAgICAgIGV2ZW50LlByb2R1Y3RBY3Rpb24uUHJvZHVjdExpc3QgPSBidWlsZFByb2R1Y3RMaXN0KGV2ZW50LCBwcm9kdWN0KTtcblxuICAgICAgICBjb252ZXJ0VHJhbnNhY3Rpb25BdHRyaWJ1dGVzVG9Qcm9kdWN0QWN0aW9uKHRyYW5zYWN0aW9uQXR0cmlidXRlcywgZXZlbnQuUHJvZHVjdEFjdGlvbik7XG5cbiAgICAgICAgbG9nQ29tbWVyY2VFdmVudChldmVudCwgYXR0cnMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYnVpbGRQcm9kdWN0TGlzdChldmVudCwgcHJvZHVjdCkge1xuICAgIGlmIChwcm9kdWN0KSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb2R1Y3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvZHVjdDtcbiAgICAgICAgfVxuICAgICAgICAgXG4gICAgICAgIHJldHVybiBbcHJvZHVjdF07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBldmVudC5TaG9wcGluZ0NhcnQuUHJvZHVjdExpc3Q7XG59XG5cbmZ1bmN0aW9uIGxvZ1Byb21vdGlvbkV2ZW50KHByb21vdGlvblR5cGUsIHByb21vdGlvbiwgYXR0cnMpIHtcbiAgICB2YXIgZXZlbnQgPSBjcmVhdGVDb21tZXJjZUV2ZW50T2JqZWN0KCk7XG5cbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuRXZlbnROYW1lICs9IGdldFByb21vdGlvbkFjdGlvbkV2ZW50TmFtZShwcm9tb3Rpb25UeXBlKTtcbiAgICAgICAgZXZlbnQuRXZlbnRDYXRlZ29yeSA9IGNvbnZlcnRQcm9tb3Rpb25BY3Rpb25Ub0V2ZW50VHlwZShwcm9tb3Rpb25UeXBlKTtcbiAgICAgICAgZXZlbnQuUHJvbW90aW9uQWN0aW9uID0ge1xuICAgICAgICAgICAgUHJvbW90aW9uQWN0aW9uVHlwZTogcHJvbW90aW9uVHlwZSxcbiAgICAgICAgICAgIFByb21vdGlvbkxpc3Q6IFtwcm9tb3Rpb25dXG4gICAgICAgIH07XG5cbiAgICAgICAgbG9nQ29tbWVyY2VFdmVudChldmVudCwgYXR0cnMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbG9nSW1wcmVzc2lvbkV2ZW50KGltcHJlc3Npb24sIGF0dHJzKSB7XG4gICAgdmFyIGV2ZW50ID0gY3JlYXRlQ29tbWVyY2VFdmVudE9iamVjdCgpO1xuXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LkV2ZW50TmFtZSArPSAnSW1wcmVzc2lvbic7XG4gICAgICAgIGV2ZW50LkV2ZW50Q2F0ZWdvcnkgPSBDb21tZXJjZUV2ZW50VHlwZS5Qcm9kdWN0SW1wcmVzc2lvbjtcbiAgICAgICAgZXZlbnQuUHJvZHVjdEltcHJlc3Npb25zID0gW3tcbiAgICAgICAgICAgIFByb2R1Y3RJbXByZXNzaW9uTGlzdDogaW1wcmVzc2lvbi5OYW1lLFxuICAgICAgICAgICAgUHJvZHVjdExpc3Q6IFtpbXByZXNzaW9uLlByb2R1Y3RdXG4gICAgICAgIH1dO1xuXG4gICAgICAgIGxvZ0NvbW1lcmNlRXZlbnQoZXZlbnQsIGF0dHJzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxvZ09wdE91dCgpIHtcbiAgICBsb2dEZWJ1ZyhJbmZvcm1hdGlvbk1lc3NhZ2VzLlN0YXJ0aW5nTG9nT3B0T3V0KTtcblxuICAgIHNlbmQoY3JlYXRlRXZlbnRPYmplY3QoTWVzc2FnZVR5cGUuT3B0T3V0LCBudWxsLCBudWxsLCBFdmVudFR5cGUuT3RoZXIpKTtcbn1cblxuZnVuY3Rpb24gbG9nRXZlbnQodHlwZSwgbmFtZSwgZGF0YSwgY2F0ZWdvcnksIGNmbGFncykge1xuICAgIGxvZ0RlYnVnKEluZm9ybWF0aW9uTWVzc2FnZXMuU3RhcnRpbmdMb2dFdmVudCArICc6ICcgKyBuYW1lKTtcblxuICAgIGlmIChjYW5Mb2coKSkge1xuICAgICAgICBpZiAoIXNlc3Npb25JZCkge1xuICAgICAgICAgICAgbVBhcnRpY2xlLnN0YXJ0TmV3U2Vzc2lvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZGF0YSkge1xuICAgICAgICAgICAgZGF0YSA9IHNhbml0aXplQXR0cmlidXRlcyhkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbmQoY3JlYXRlRXZlbnRPYmplY3QodHlwZSwgbmFtZSwgZGF0YSwgY2F0ZWdvcnksIGNmbGFncykpO1xuICAgICAgICBjb29raWUuc2V0Q29va2llKFxuICAgICAgICAgICAgICAgIENvbmZpZyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNpZDogc2Vzc2lvbklkLCBpZTogaXNFbmFibGVkLCBzYTogc2Vzc2lvbkF0dHJpYnV0ZXMsIFxuICAgICAgICAgICAgICAgICAgICB1YTogdXNlckF0dHJpYnV0ZXMsIHVpOiB1c2VySWRlbnRpdGllcywgc3M6IHNlcnZlclNldHRpbmdzLCBkdDogZGV2VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGxlczogbGFzdEV2ZW50U2VudCA/IGxhc3RFdmVudFNlbnQuZ2V0VGltZSgpIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgYXY6IGFwcFZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGNnaWQ6IGNsaWVudElkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxvZ0RlYnVnKEluZm9ybWF0aW9uTWVzc2FnZXMuQWJhbmRvbkxvZ0V2ZW50KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxvZ0NvbW1lcmNlRXZlbnQoY29tbWVyY2VFdmVudCwgYXR0cnMpIHtcbiAgICBsb2dEZWJ1ZyhJbmZvcm1hdGlvbk1lc3NhZ2VzLlN0YXJ0aW5nTG9nQ29tbWVyY2VFdmVudCk7XG5cbiAgICBpZiAoY2FuTG9nKCkpIHtcbiAgICAgICAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICAgICAgICAgIG1QYXJ0aWNsZS5zdGFydE5ld1Nlc3Npb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlsaXRpZXMuaXNXZWJWaWV3RW1iZWRkZWQobmF2aWdhdG9yKSkge1xuICAgICAgICAgICAgLy8gRG9uJ3Qgc2VuZCBzaG9wcGluZyBjYXJ0IG9yIHByb2R1Y3QgYmFncyB0byBwYXJlbnQgc2Rrc1xuICAgICAgICAgICAgY29tbWVyY2VFdmVudC5TaG9wcGluZ0NhcnQgPSB7fTtcbiAgICAgICAgICAgIGNvbW1lcmNlRXZlbnQuUHJvZHVjdEJhZ3MgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhdHRycykge1xuICAgICAgICAgICAgY29tbWVyY2VFdmVudC5FdmVudEF0dHJpYnV0ZXMgPSBhdHRycztcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbmQoY29tbWVyY2VFdmVudCk7XG4gICAgICAgIGNvb2tpZS5zZXRDb29raWUoXG4gICAgICAgICAgICAgICAgQ29uZmlnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc2lkOiBzZXNzaW9uSWQsIGllOiBpc0VuYWJsZWQsIHNhOiBzZXNzaW9uQXR0cmlidXRlcywgXG4gICAgICAgICAgICAgICAgICAgIHVhOiB1c2VyQXR0cmlidXRlcywgdWk6IHVzZXJJZGVudGl0aWVzLCBzczogc2VydmVyU2V0dGluZ3MsIGR0OiBkZXZUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgbGVzOiBsYXN0RXZlbnRTZW50ID8gbGFzdEV2ZW50U2VudC5nZXRUaW1lKCkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBhdjogYXBwVmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgY2dpZDogY2xpZW50SWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbG9nRGVidWcoSW5mb3JtYXRpb25NZXNzYWdlcy5BYmFuZG9uTG9nRXZlbnQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbG9nTG9nT3V0RXZlbnQoKSB7XG4gICAgdmFyIGV2dDtcblxuICAgIGxvZ0RlYnVnKEluZm9ybWF0aW9uTWVzc2FnZXMuU3RhcnRpbmdMb2dFdmVudCArICc6IGxvZ091dCcpO1xuXG4gICAgaWYgKGNhbkxvZygpKSB7XG4gICAgICAgIGlmICghc2Vzc2lvbklkKSB7XG4gICAgICAgICAgICBtUGFydGljbGUuc3RhcnROZXdTZXNzaW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICBldnQgPSBjcmVhdGVFdmVudE9iamVjdChNZXNzYWdlVHlwZS5Qcm9maWxlKTtcbiAgICAgICAgZXZ0LlByb2ZpbGVNZXNzYWdlVHlwZSA9IFByb2ZpbGVNZXNzYWdlVHlwZS5Mb2dvdXQ7XG5cbiAgICAgICAgc2VuZChldnQpO1xuICAgICAgICBjb29raWUuc2V0Q29va2llKFxuICAgICAgICAgICAgICAgIENvbmZpZyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNpZDogc2Vzc2lvbklkLCBpZTogaXNFbmFibGVkLCBzYTogc2Vzc2lvbkF0dHJpYnV0ZXMsIFxuICAgICAgICAgICAgICAgICAgICB1YTogdXNlckF0dHJpYnV0ZXMsIHVpOiB1c2VySWRlbnRpdGllcywgc3M6IHNlcnZlclNldHRpbmdzLCBkdDogZGV2VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGxlczogbGFzdEV2ZW50U2VudCA/IGxhc3RFdmVudFNlbnQuZ2V0VGltZSgpIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgYXY6IGFwcFZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGNnaWQ6IGNsaWVudElkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gZXZ0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbG9nRGVidWcoSW5mb3JtYXRpb25NZXNzYWdlcy5BYmFuZG9uTG9nRXZlbnQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVjb2RlZChzKSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzLnJlcGxhY2UocGx1c2VzLCAnICcpKTtcbn1cblxuZnVuY3Rpb24gY29udmVydGVkKHMpIHtcbiAgICBpZiAocy5pbmRleE9mKCdcIicpID09PSAwKSB7XG4gICAgICAgIHMgPSBzLnNsaWNlKDEsIC0xKS5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykucmVwbGFjZSgvXFxcXFxcXFwvZywgJ1xcXFwnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21WYWx1ZShhKSB7XG4gICAgaWYod2luZG93Lmhhc093blByb3BlcnR5KCdjcnlwdG8nKSkge1xuICAgICAgICBpZih3aW5kb3cuY3J5cHRvICYmIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gKGEgXiB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0gJSAxNiA+PiBhLzQpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAoYSBeIE1hdGgucmFuZG9tKCkgKiAxNiA+PiBhLzQpLnRvU3RyaW5nKDE2KTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVVbmlxdWVJZChhKSB7XG4gICAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vamVkLzk4Mjg4M1xuICAgIC8vIEFkZGVkIHN1cHBvcnQgZm9yIGNyeXB0byBmb3IgYmV0dGVyIHJhbmRvbVxuXG4gICAgcmV0dXJuIGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHBsYWNlaG9sZGVyIHdhcyBwYXNzZWQsIHJldHVyblxuICAgICAgICAgICAgPyBnZW5lcmF0ZVJhbmRvbVZhbHVlKGEpICAgIC8vIGEgcmFuZG9tIG51bWJlciBcbiAgICAgICAgICAgIDogKCAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvciBvdGhlcndpc2UgYSBjb25jYXRlbmF0ZWQgc3RyaW5nOlxuICAgICAgICAgICAgWzFlN10gKyAgICAgICAgICAgICAgICAgICAgIC8vIDEwMDAwMDAwICtcbiAgICAgICAgICAgIC0xZTMgKyAgICAgICAgICAgICAgICAgICAgICAvLyAtMTAwMCArXG4gICAgICAgICAgICAtNGUzICsgICAgICAgICAgICAgICAgICAgICAgLy8gLTQwMDAgK1xuICAgICAgICAgICAgLThlMyArICAgICAgICAgICAgICAgICAgICAgIC8vIC04MDAwMDAwMCArXG4gICAgICAgICAgICAtMWUxMSAgICAgICAgICAgICAgICAgICAgICAgLy8gLTEwMDAwMDAwMDAwMCxcbiAgICAgICAgICAgICkucmVwbGFjZSggICAgICAgICAgICAgICAgICAvLyByZXBsYWNpbmdcbiAgICAgICAgICAgICAgICAvWzAxOF0vZywgICAgICAgICAgICAgICAvLyB6ZXJvZXMsIG9uZXMsIGFuZCBlaWdodHMgd2l0aFxuICAgICAgICAgICAgICAgIGdlbmVyYXRlVW5pcXVlSWQgICAgICAgIC8vIHJhbmRvbSBoZXggZGlnaXRzXG4gICAgICAgICAgICApO1xufVxuXG5mdW5jdGlvbiBsb2dEZWJ1Zyhtc2cpIHtcbiAgICBpZiAobVBhcnRpY2xlLmlzRGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgd2luZG93LmNvbnNvbGUubG9nKSB7XG4gICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhtc2cpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNFdmVudFR5cGUodHlwZSkge1xuICAgIGZvciAodmFyIHByb3AgaW4gRXZlbnRUeXBlKSB7XG4gICAgICAgIGlmIChFdmVudFR5cGUuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgIGlmIChFdmVudFR5cGVbcHJvcF0gPT09IHR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIG1lcmdlQ29uZmlnKGNvbmZpZykge1xuICAgIGxvZ0RlYnVnKEluZm9ybWF0aW9uTWVzc2FnZXMuTG9hZGluZ0NvbmZpZyk7XG5cbiAgICBmb3IgKHZhciBwcm9wIGluIERlZmF1bHRDb25maWcpIHtcbiAgICAgICAgaWYgKERlZmF1bHRDb25maWcuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgIENvbmZpZ1twcm9wXSA9IERlZmF1bHRDb25maWdbcHJvcF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgICAgICBDb25maWdbcHJvcF0gPSBjb25maWdbcHJvcF07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNhbkxvZygpIHtcbiAgICBpZiAoaXNFbmFibGVkICYmIChkZXZUb2tlbiB8fCB1dGlsaXRpZXMuaXNXZWJWaWV3RW1iZWRkZWQobmF2aWdhdG9yKSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBcIltvYmplY3QgT2JqZWN0XVwiO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudEhhbmRsZXIoZG9tRXZlbnQsIHNlbGVjdG9yLCBldmVudE5hbWUsIGRhdGEsIGV2ZW50VHlwZSkge1xuICAgIHZhciBlbGVtZW50cyA9IFtdLFxuICAgICAgICBoYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIHRpbWVvdXRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuaHJlZikge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGVsZW1lbnQuaHJlZjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZWxlbWVudC5zdWJtaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsb2dEZWJ1ZygnRE9NIGV2ZW50IHRyaWdnZXJlZCwgaGFuZGxpbmcgZXZlbnQnKTtcblxuICAgICAgICAgICAgbG9nRXZlbnQoTWVzc2FnZVR5cGUuUGFnZUV2ZW50LFxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudE5hbWUgPT09ICdmdW5jdGlvbicgPyBldmVudE5hbWUoZWxlbWVudCkgOiBldmVudE5hbWUsXG4gICAgICAgICAgICAgICAgdHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicgPyBkYXRhKGVsZW1lbnQpIDogZGF0YSxcbiAgICAgICAgICAgICAgICBldmVudFR5cGUgPyBldmVudFR5cGUgOiBFdmVudFR5cGUuT3RoZXIpO1xuXG4gICAgICAgICAgICAvLyBUT0RPOiBIYW5kbGUgbWlkZGxlLWNsaWNrcyBhbmQgc3BlY2lhbCBrZXlzIChjdHJsLCBhbHQsIGV0YylcbiAgICAgICAgICAgIGlmICgoZWxlbWVudC5ocmVmICYmIGVsZW1lbnQudGFyZ2V0ICE9ICdfYmxhbmsnKSB8fCBlbGVtZW50LnN1Ym1pdCkge1xuICAgICAgICAgICAgICAgIC8vIEdpdmUgeG1saHR0cHJlcXVlc3QgZW5vdWdoIHRpbWUgdG8gZXhlY3V0ZSBiZWZvcmUgbmF2aWdhdGluZyBhIGxpbmsgb3Igc3VibWl0dGluZyBmb3JtXG5cbiAgICAgICAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aW1lb3V0SGFuZGxlciwgQ29uZmlnLlRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbGVtZW50LFxuICAgICAgICBpO1xuXG4gICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgICBsb2dEZWJ1ZygnQ2FuXFwndCBiaW5kIGV2ZW50LCBzZWxlY3RvciBpcyByZXF1aXJlZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGEgY3NzIHNlbGVjdG9yIHN0cmluZyBvciBhIGRvbSBlbGVtZW50XG4gICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2VsZWN0b3Iubm9kZVR5cGUpIHtcbiAgICAgICAgZWxlbWVudHMgPSBbc2VsZWN0b3JdO1xuICAgIH1cblxuICAgIGlmIChlbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxvZ0RlYnVnKCdGb3VuZCAnICtcbiAgICAgICAgICAgIGVsZW1lbnRzLmxlbmd0aCArXG4gICAgICAgICAgICAnIGVsZW1lbnQnICtcbiAgICAgICAgICAgIChlbGVtZW50cy5sZW5ndGggPiAxID8gJ3MnIDogJycpICtcbiAgICAgICAgICAgICcsIGF0dGFjaGluZyBldmVudCBoYW5kbGVycycpO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGRvbUV2ZW50LCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGVtZW50LmF0dGFjaEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZG9tRXZlbnQsIGhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudFsnb24nICsgZG9tRXZlbnRdID0gaGFuZGxlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbG9nRGVidWcoJ05vIGVsZW1lbnRzIGZvdW5kJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUhhc2gobmFtZSkge1xuICAgIHZhciBoYXNoID0gMCxcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGNoYXJhY3RlcjtcblxuICAgIGlmICghbmFtZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBuYW1lID0gbmFtZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAoQXJyYXkucHJvdG90eXBlLnJlZHVjZSkge1xuICAgICAgICByZXR1cm4gbmFtZS5zcGxpdChcIlwiKS5yZWR1Y2UoZnVuY3Rpb24oYSwgYikgeyBhID0gKChhIDw8IDUpIC0gYSkgKyBiLmNoYXJDb2RlQXQoMCk7IHJldHVybiBhICYgYTsgfSwgMCk7XG4gICAgfVxuXG4gICAgaWYgKG5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBoYXNoO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBuYW1lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNoYXJhY3RlciA9IG5hbWUuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hhcmFjdGVyO1xuICAgICAgICBoYXNoID0gaGFzaCAmIGhhc2g7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc2g7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3QobmFtZSxcbiAgICBza3UsXG4gICAgcHJpY2UsXG4gICAgcXVhbnRpdHksXG4gICAgYnJhbmQsXG4gICAgdmFyaWFudCxcbiAgICBjYXRlZ29yeSxcbiAgICBwb3NpdGlvbixcbiAgICBjb3Vwb25Db2RlLFxuICAgIGF0dHJpYnV0ZXMpIHtcblxuICAgIGlmICghbmFtZSkge1xuICAgICAgICBsb2dEZWJ1ZygnTmFtZSBpcyByZXF1aXJlZCB3aGVuIGNyZWF0aW5nIGEgcHJvZHVjdCcpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXNrdSkge1xuICAgICAgICBsb2dEZWJ1ZygnU0tVIGlzIHJlcXVpcmVkIHdoZW4gY3JlYXRpbmcgYSBwcm9kdWN0Jyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChwcmljZSAhPT0gcHJpY2UgfHwgcHJpY2UgPT09IG51bGwpIHtcbiAgICAgICAgbG9nRGVidWcoJ1ByaWNlIGlzIHJlcXVpcmVkIHdoZW4gY3JlYXRpbmcgYSBwcm9kdWN0Jyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghcXVhbnRpdHkpIHtcbiAgICAgICAgcXVhbnRpdHkgPSAxO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIE5hbWU6IG5hbWUsXG4gICAgICAgIFNrdTogc2t1LFxuICAgICAgICBQcmljZTogcHJpY2UsXG4gICAgICAgIFF1YW50aXR5OiBxdWFudGl0eSxcbiAgICAgICAgQnJhbmQ6IGJyYW5kLFxuICAgICAgICBWYXJpYW50OiB2YXJpYW50LFxuICAgICAgICBDYXRlZ29yeTogY2F0ZWdvcnksXG4gICAgICAgIFBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICAgICAgQ291cG9uQ29kZTogY291cG9uQ29kZSxcbiAgICAgICAgVG90YWxBbW91bnQ6IHF1YW50aXR5ICogcHJpY2UsXG4gICAgICAgIEF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9tb3Rpb24oaWQsIGNyZWF0aXZlLCBuYW1lLCBwb3NpdGlvbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIElkOiBpZCxcbiAgICAgICAgQ3JlYXRpdmU6IGNyZWF0aXZlLFxuICAgICAgICBOYW1lOiBuYW1lLFxuICAgICAgICBQb3NpdGlvbjogcG9zaXRpb25cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVJbXByZXNzaW9uKG5hbWUsIHByb2R1Y3QpIHtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgbG9nRGVidWcoJ05hbWUgaXMgcmVxdWlyZWQgd2hlbiBjcmVhdGluZyBhbiBpbXByZXNzaW9uLicpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghcHJvZHVjdCkge1xuICAgICAgICBsb2dEZWJ1ZygnUHJvZHVjdCBpcyByZXF1aXJlZCB3aGVuIGNyZWF0aW5nIGFuIGltcHJlc3Npb24uJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIE5hbWU6IG5hbWUsXG4gICAgICAgIFByb2R1Y3Q6IHByb2R1Y3RcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbkF0dHJpYnV0ZXMoaWQsXG4gICAgYWZmaWxpYXRpb24sXG4gICAgY291cG9uQ29kZSxcbiAgICByZXZlbnVlLFxuICAgIHNoaXBwaW5nLFxuICAgIHRheCkge1xuXG4gICAgaWYgKGlkID09PSBudWxsIHx8IHR5cGVvZiBpZCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2dEZWJ1ZyhFcnJvck1lc3NhZ2VzLlRyYW5zYWN0aW9uSWRSZXF1aXJlZCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIElkOiBpZCxcbiAgICAgICAgQWZmaWxpYXRpb246IGFmZmlsaWF0aW9uLFxuICAgICAgICBDb3Vwb25Db2RlOiBjb3Vwb25Db2RlLFxuICAgICAgICBSZXZlbnVlOiByZXZlbnVlLFxuICAgICAgICBTaGlwcGluZzogc2hpcHBpbmcsXG4gICAgICAgIFRheDogdGF4XG4gICAgfTtcbn1cblxuXG5mdW5jdGlvbiBjYWxsU2V0VXNlckF0dHJpYnV0ZU9uRm9yd2FyZGVycyhrZXksIHZhbHVlKSB7XG4gICAgaWYgKGZvcndhcmRlcnMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3J3YXJkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZm9yd2FyZGVyc1tpXS5zZXRVc2VyQXR0cmlidXRlICYmXG4gICAgICAgICAgICAgICAgZm9yd2FyZGVyc1tpXS51c2VyQXR0cmlidXRlRmlsdGVycyAmJlxuICAgICAgICAgICAgICAgICF1dGlsaXRpZXMuaW5BcnJheShmb3J3YXJkZXJzW2ldLnVzZXJBdHRyaWJ1dGVGaWx0ZXJzLCBnZW5lcmF0ZUhhc2goa2V5KSkpIHtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmb3J3YXJkZXJzW2ldLnNldFVzZXJBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRGVidWcocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dEZWJ1ZyhlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRLZXlJbk9iamVjdChvYmosIGtleSkge1xuICAgIGlmKGtleSAmJiBvYmopIHtcbiAgICAgICAgZm9yKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgaWYob2JqLmhhc093blByb3BlcnR5KHByb3ApICYmIHByb3AudG9Mb3dlckNhc2UoKSA9PT0ga2V5LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkQXR0cmlidXRlVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gIWlzT2JqZWN0KHZhbHVlKSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplQXR0cmlidXRlcyhhdHRycykge1xuICAgIGlmKCFhdHRycyB8fCAhaXNPYmplY3QoYXR0cnMpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBzYW5pdGl6ZWRBdHRycyA9IHt9O1xuXG4gICAgZm9yKHZhciBwcm9wIGluIGF0dHJzKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGF0dHJpYnV0ZSB2YWx1ZXMgYXJlIG5vdCBvYmplY3RzIG9yIGFycmF5cywgd2hpY2ggYXJlIG5vdCB2YWxpZFxuICAgICAgICBpZihhdHRycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBpc1ZhbGlkQXR0cmlidXRlVmFsdWUoYXR0cnNbcHJvcF0pKSB7XG4gICAgICAgICAgICBzYW5pdGl6ZWRBdHRyc1twcm9wXSA9IGF0dHJzW3Byb3BdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNhbml0aXplZEF0dHJzO1xufVxuXG52YXIgTWVzc2FnZVR5cGUgPSB7XG4gICAgU2Vzc2lvblN0YXJ0OiAxLFxuICAgIFNlc3Npb25FbmQ6IDIsXG4gICAgUGFnZVZpZXc6IDMsXG4gICAgUGFnZUV2ZW50OiA0LFxuICAgIENyYXNoUmVwb3J0OiA1LFxuICAgIE9wdE91dDogNixcbiAgICBQcm9maWxlOiAxNCxcbiAgICBDb21tZXJjZTogMTZcbn07XG5cbnZhciBFdmVudFR5cGUgPSB7XG4gICAgVW5rbm93bjogMCxcbiAgICBOYXZpZ2F0aW9uOiAxLFxuICAgIExvY2F0aW9uOiAyLFxuICAgIFNlYXJjaDogMyxcbiAgICBUcmFuc2FjdGlvbjogNCxcbiAgICBVc2VyQ29udGVudDogNSxcbiAgICBVc2VyUHJlZmVyZW5jZTogNixcbiAgICBTb2NpYWw6IDcsXG4gICAgT3RoZXI6IDgsXG4gICAgTWVkaWE6IDlcbn07XG5cbnZhciBQcm9maWxlTWVzc2FnZVR5cGUgPSB7XG4gICAgTG9nb3V0OiAzXG59O1xuXG5FdmVudFR5cGUuZ2V0TmFtZSA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgc3dpdGNoIChpZCkge1xuICAgICAgICBjYXNlIEV2ZW50VHlwZS5OYXZpZ2F0aW9uOlxuICAgICAgICAgICAgcmV0dXJuICdOYXZpZ2F0aW9uJztcbiAgICAgICAgY2FzZSBFdmVudFR5cGUuTG9jYXRpb246XG4gICAgICAgICAgICByZXR1cm4gJ0xvY2F0aW9uJztcbiAgICAgICAgY2FzZSBFdmVudFR5cGUuU2VhcmNoOlxuICAgICAgICAgICAgcmV0dXJuICdTZWFyY2gnO1xuICAgICAgICBjYXNlIEV2ZW50VHlwZS5UcmFuc2FjdGlvbjpcbiAgICAgICAgICAgIHJldHVybiAnVHJhbnNhY3Rpb24nO1xuICAgICAgICBjYXNlIEV2ZW50VHlwZS5Vc2VyQ29udGVudDpcbiAgICAgICAgICAgIHJldHVybiAnVXNlciBDb250ZW50JztcbiAgICAgICAgY2FzZSBFdmVudFR5cGUuVXNlclByZWZlcmVuY2U6XG4gICAgICAgICAgICByZXR1cm4gJ1VzZXIgUHJlZmVyZW5jZSc7XG4gICAgICAgIGNhc2UgRXZlbnRUeXBlLlNvY2lhbDpcbiAgICAgICAgICAgIHJldHVybiAnU29jaWFsJztcbiAgICAgICAgY2FzZSBFdmVudFR5cGUuTWVkaWE6XG4gICAgICAgICAgICByZXR1cm4gJ01lZGlhJztcbiAgICAgICAgY2FzZSBDb21tZXJjZUV2ZW50VHlwZS5Qcm9kdWN0QWRkVG9DYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdQcm9kdWN0IEFkZGVkIHRvIENhcnQnO1xuICAgICAgICBjYXNlIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RBZGRUb1dpc2hsaXN0OlxuICAgICAgICAgICAgcmV0dXJuICdQcm9kdWN0IEFkZGVkIHRvIFdpc2hsaXN0JztcbiAgICAgICAgY2FzZSBDb21tZXJjZUV2ZW50VHlwZS5Qcm9kdWN0Q2hlY2tvdXQ6XG4gICAgICAgICAgICByZXR1cm4gJ1Byb2R1Y3QgQ2hlY2tvdXQnO1xuICAgICAgICBjYXNlIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RDaGVja291dE9wdGlvbjpcbiAgICAgICAgICAgIHJldHVybiAnUHJvZHVjdCBDaGVja291dCBPcHRpb25zJztcbiAgICAgICAgY2FzZSBDb21tZXJjZUV2ZW50VHlwZS5Qcm9kdWN0Q2xpY2s6XG4gICAgICAgICAgICByZXR1cm4gJ1Byb2R1Y3QgQ2xpY2snO1xuICAgICAgICBjYXNlIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RJbXByZXNzaW9uOlxuICAgICAgICAgICAgcmV0dXJuICdQcm9kdWN0IEltcHJlc3Npb24nO1xuICAgICAgICBjYXNlIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RQdXJjaGFzZTpcbiAgICAgICAgICAgIHJldHVybiAnUHJvZHVjdCBQdXJjaGFzZWQnO1xuICAgICAgICBjYXNlIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RSZWZ1bmQ6XG4gICAgICAgICAgICByZXR1cm4gJ1Byb2R1Y3QgUmVmdW5kZWQnO1xuICAgICAgICBjYXNlIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RSZW1vdmVGcm9tQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnUHJvZHVjdCBSZW1vdmVkIEZyb20gQ2FydCc7XG4gICAgICAgIGNhc2UgQ29tbWVyY2VFdmVudFR5cGUuUHJvZHVjdFJlbW92ZUZyb21XaXNobGlzdDpcbiAgICAgICAgICAgIHJldHVybiAnUHJvZHVjdCBSZW1vdmVkIGZyb20gV2lzaGxpc3QnO1xuICAgICAgICBjYXNlIENvbW1lcmNlRXZlbnRUeXBlLlByb2R1Y3RWaWV3RGV0YWlsOlxuICAgICAgICAgICAgcmV0dXJuICdQcm9kdWN0IFZpZXcgRGV0YWlscyc7XG4gICAgICAgIGNhc2UgQ29tbWVyY2VFdmVudFR5cGUuUHJvbW90aW9uQ2xpY2s6XG4gICAgICAgICAgICByZXR1cm4gJ1Byb21vdGlvbiBDbGljayc7XG4gICAgICAgIGNhc2UgQ29tbWVyY2VFdmVudFR5cGUuUHJvbW90aW9uVmlldzpcbiAgICAgICAgICAgIHJldHVybiAnUHJvbW90aW9uIFZpZXcnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdPdGhlcic7XG4gICAgfVxufTtcblxuLy8gQ29udGludWF0aW9uIG9mIGVudW0gYWJvdmUsIGJ1dCBpbiBzZXBlcmF0ZSBvYmplY3Qgc2luY2Ugd2UgZG9uJ3QgZXhwb3NlIHRoZXNlIHRvIGVuZCB1c2VyXG52YXIgQ29tbWVyY2VFdmVudFR5cGUgPSB7XG4gICAgUHJvZHVjdEFkZFRvQ2FydDogMTAsXG4gICAgUHJvZHVjdFJlbW92ZUZyb21DYXJ0OiAxMSxcbiAgICBQcm9kdWN0Q2hlY2tvdXQ6IDEyLFxuICAgIFByb2R1Y3RDaGVja291dE9wdGlvbjogMTMsXG4gICAgUHJvZHVjdENsaWNrOiAxNCxcbiAgICBQcm9kdWN0Vmlld0RldGFpbDogMTUsXG4gICAgUHJvZHVjdFB1cmNoYXNlOiAxNixcbiAgICBQcm9kdWN0UmVmdW5kOiAxNyxcbiAgICBQcm9tb3Rpb25WaWV3OiAxOCxcbiAgICBQcm9tb3Rpb25DbGljazogMTksXG4gICAgUHJvZHVjdEFkZFRvV2lzaGxpc3Q6IDIwLFxuICAgIFByb2R1Y3RSZW1vdmVGcm9tV2lzaGxpc3Q6IDIxLFxuICAgIFByb2R1Y3RJbXByZXNzaW9uOiAyMlxufTtcblxudmFyIElkZW50aXR5VHlwZSA9IHtcbiAgICBPdGhlcjogMCxcbiAgICBDdXN0b21lcklkOiAxLFxuICAgIEZhY2Vib29rOiAyLFxuICAgIFR3aXR0ZXI6IDMsXG4gICAgR29vZ2xlOiA0LFxuICAgIE1pY3Jvc29mdDogNSxcbiAgICBZYWhvbzogNixcbiAgICBFbWFpbDogNyxcbiAgICBBbGlhczogOCxcbiAgICBGYWNlYm9va0N1c3RvbUF1ZGllbmNlSWQ6IDlcbn07XG5cbklkZW50aXR5VHlwZS5nZXROYW1lID0gZnVuY3Rpb24oaWRlbnRpdHlUeXBlKSB7XG4gICAgc3dpdGNoIChpZGVudGl0eVR5cGUpIHtcbiAgICAgICAgY2FzZSB3aW5kb3cubVBhcnRpY2xlLklkZW50aXR5VHlwZS5DdXN0b21lcklkOlxuICAgICAgICAgICAgcmV0dXJuICdDdXN0b21lciBJRCc7XG4gICAgICAgIGNhc2Ugd2luZG93Lm1QYXJ0aWNsZS5JZGVudGl0eVR5cGUuRmFjZWJvb2s6XG4gICAgICAgICAgICByZXR1cm4gJ0ZhY2Vib29rIElEJztcbiAgICAgICAgY2FzZSB3aW5kb3cubVBhcnRpY2xlLklkZW50aXR5VHlwZS5Ud2l0dGVyOlxuICAgICAgICAgICAgcmV0dXJuICdUd2l0dGVyIElEJztcbiAgICAgICAgY2FzZSB3aW5kb3cubVBhcnRpY2xlLklkZW50aXR5VHlwZS5Hb29nbGU6XG4gICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBJRCc7XG4gICAgICAgIGNhc2Ugd2luZG93Lm1QYXJ0aWNsZS5JZGVudGl0eVR5cGUuTWljcm9zb2Z0OlxuICAgICAgICAgICAgcmV0dXJuICdNaWNyb3NvZnQgSUQnO1xuICAgICAgICBjYXNlIHdpbmRvdy5tUGFydGljbGUuSWRlbnRpdHlUeXBlLllhaG9vOlxuICAgICAgICAgICAgcmV0dXJuICdZYWhvbyBJRCc7XG4gICAgICAgIGNhc2Ugd2luZG93Lm1QYXJ0aWNsZS5JZGVudGl0eVR5cGUuRW1haWw6XG4gICAgICAgICAgICByZXR1cm4gJ0VtYWlsJztcbiAgICAgICAgY2FzZSB3aW5kb3cubVBhcnRpY2xlLklkZW50aXR5VHlwZS5BbGlhczpcbiAgICAgICAgICAgIHJldHVybiAnQWxpYXMgSUQnO1xuICAgICAgICBjYXNlIHdpbmRvdy5tUGFydGljbGUuSWRlbnRpdHlUeXBlLkZhY2Vib29rQ3VzdG9tQXVkaWVuY2VJZDpcbiAgICAgICAgICAgIHJldHVybiAnRmFjZWJvb2sgQXBwIFVzZXIgSUQnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdPdGhlciBJRCc7XG4gICAgfVxufTtcblxudmFyIERlZmF1bHRDb25maWcgPSB7XG4gICAgQ29va2llTmFtZTogJ21wcnRjbC1hcGknLFx0XHQvLyBOYW1lIG9mIHRoZSBjb29raWUgc3RvcmVkIG9uIHRoZSB1c2VyJ3MgbWFjaGluZVxuICAgIENvb2tpZURvbWFpbjogbnVsbCxcdFx0XHRcdC8vIElmIG51bGwsIGRlZmF1bHRzIHRvIGN1cnJlbnQgbG9jYXRpb24uaG9zdFxuICAgIERlYnVnOiBmYWxzZSxcdFx0XHRcdFx0Ly8gSWYgdHJ1ZSwgd2lsbCBwcmludCBkZWJ1ZyBtZXNzYWdlcyB0byBicm93c2VyIGNvbnNvbGVcbiAgICBDb29raWVFeHBpcmF0aW9uOiAzNjUsXHRcdFx0Ly8gQ29va2llIGV4cGlyYXRpb24gdGltZSBpbiBkYXlzXG4gICAgVmVyYm9zZTogZmFsc2UsXHRcdFx0XHRcdC8vIFdoZXRoZXIgdGhlIHNlcnZlciB3aWxsIHJldHVybiB2ZXJib3NlIHJlc3BvbnNlc1xuICAgIEluY2x1ZGVSZWZlcnJlcjogdHJ1ZSxcdFx0XHQvLyBJbmNsdWRlIHVzZXIncyByZWZlcnJlclxuICAgIEluY2x1ZGVHb29nbGVBZHdvcmRzOiB0cnVlLFx0XHQvLyBJbmNsdWRlIHV0bV9zb3VyY2UgYW5kIHV0bV9wcm9wZXJ0aWVzXG4gICAgVGltZW91dDogMzAwLFx0XHRcdFx0XHQvLyBUaW1lb3V0IGluIG1pbGxpc2Vjb25kcyBmb3IgbG9nZ2luZyBmdW5jdGlvbnNcbiAgICBTZXNzaW9uVGltZW91dDogMzAsXHRcdFx0XHQvLyBTZXNzaW9uIHRpbWVvdXQgaW4gbWludXRlc1xuICAgIFNhbmRib3g6IGZhbHNlLCAgICAgICAgICAgICAgICAgLy8gRXZlbnRzIGFyZSBtYXJrZWQgYXMgZGVidWcgYW5kIG9ubHkgZm9yd2FyZGVkIHRvIGRlYnVnIGZvcndhcmRlcnMsXG4gICAgVmVyc2lvbjogbnVsbCAgICAgICAgICAgICAgICAgICAvLyBUaGUgdmVyc2lvbiBvZiB0aGlzIHdlYnNpdGUvYXBwXG59O1xuXG52YXIgQ29uZmlnID0ge307XG5cbnZhciBFcnJvck1lc3NhZ2VzID0ge1xuICAgIE5vVG9rZW46ICdBIHRva2VuIG11c3QgYmUgc3BlY2lmaWVkLicsXG4gICAgRXZlbnROYW1lSW52YWxpZFR5cGU6ICdFdmVudCBuYW1lIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgdmFsdWUuJyxcbiAgICBFdmVudERhdGFJbnZhbGlkVHlwZTogJ0V2ZW50IGRhdGEgbXVzdCBiZSBhIHZhbGlkIG9iamVjdCBoYXNoLicsXG4gICAgTG9nZ2luZ0Rpc2FibGVkOiAnRXZlbnQgbG9nZ2luZyBpcyBjdXJyZW50bHkgZGlzYWJsZWQuJyxcbiAgICBDb29raWVQYXJzZUVycm9yOiAnQ291bGQgbm90IHBhcnNlIGNvb2tpZScsXG4gICAgRXZlbnRFbXB0eTogJ0V2ZW50IG9iamVjdCBpcyBudWxsIG9yIHVuZGVmaW5lZCwgY2FuY2VsbGluZyBzZW5kJyxcbiAgICBOb0V2ZW50VHlwZTogJ0V2ZW50IHR5cGUgbXVzdCBiZSBzcGVjaWZpZWQuJyxcbiAgICBUcmFuc2FjdGlvbklkUmVxdWlyZWQ6ICdUcmFuc2FjdGlvbiBJRCBpcyByZXF1aXJlZCcsXG4gICAgVHJhbnNhY3Rpb25SZXF1aXJlZDogJ0EgdHJhbnNhY3Rpb24gYXR0cmlidXRlcyBvYmplY3QgaXMgcmVxdWlyZWQnLFxuICAgIEJhZEF0dHJpYnV0ZTogJ0F0dHJpYnV0ZSB2YWx1ZSBjYW5ub3QgYmUgb2JqZWN0IG9yIGFycmF5J1xufTtcblxudmFyIEluZm9ybWF0aW9uTWVzc2FnZXMgPSB7XG4gICAgQ29va2llU2VhcmNoOiAnU2VhcmNoaW5nIGZvciBjb29raWUnLFxuICAgIENvb2tpZUZvdW5kOiAnQ29va2llIGZvdW5kLCBwYXJzaW5nIHZhbHVlcycsXG4gICAgQ29va2llU2V0OiAnU2V0dGluZyBjb29raWUnLFxuICAgIFNlbmRCZWdpbjogJ1N0YXJ0aW5nIHRvIHNlbmQgZXZlbnQnLFxuICAgIFNlbmRXaW5kb3dzUGhvbmU6ICdTZW5kaW5nIGV2ZW50IHRvIFdpbmRvd3MgUGhvbmUgY29udGFpbmVyJyxcbiAgICBTZW5kSU9TOiAnQ2FsbGluZyBpT1MgcGF0aDogJyxcbiAgICBTZW5kQW5kcm9pZDogJ0NhbGxpbmcgQW5kcm9pZCBKUyBpbnRlcmZhY2UgbWV0aG9kOiAnLFxuICAgIFNlbmRIdHRwOiAnU2VuZGluZyBldmVudCB0byBtUGFydGljbGUgSFRUUCBzZXJ2aWNlJyxcbiAgICBTdGFydGluZ05ld1Nlc3Npb246ICdTdGFydGluZyBuZXcgU2Vzc2lvbicsXG4gICAgU3RhcnRpbmdMb2dFdmVudDogJ1N0YXJ0aW5nIHRvIGxvZyBldmVudCcsXG4gICAgU3RhcnRpbmdMb2dPcHRPdXQ6ICdTdGFydGluZyB0byBsb2cgdXNlciBvcHQgaW4vb3V0JyxcbiAgICBTdGFydGluZ0VuZFNlc3Npb246ICdTdGFydGluZyB0byBlbmQgc2Vzc2lvbicsXG4gICAgU3RhcnRpbmdJbml0aWFsaXphdGlvbjogJ1N0YXJ0aW5nIHRvIGluaXRpYWxpemUnLFxuICAgIFN0YXJ0aW5nTG9nQ29tbWVyY2VFdmVudDogJ1N0YXJ0aW5nIHRvIGxvZyBjb21tZXJjZSBldmVudCcsXG4gICAgTG9hZGluZ0NvbmZpZzogJ0xvYWRpbmcgY29uZmlndXJhdGlvbiBvcHRpb25zJyxcbiAgICBBYmFuZG9uTG9nRXZlbnQ6ICdDYW5ub3QgbG9nIGV2ZW50LCBsb2dnaW5nIGRpc2FibGVkIG9yIGRldmVsb3BlciB0b2tlbiBub3Qgc2V0JyxcbiAgICBBYmFuZG9uU3RhcnRTZXNzaW9uOiAnQ2Fubm90IHN0YXJ0IHNlc3Npb24sIGxvZ2dpbmcgZGlzYWJsZWQgb3IgZGV2ZWxvcGVyIHRva2VuIG5vdCBzZXQnLFxuICAgIEFiYW5kb25FbmRTZXNzaW9uOiAnQ2Fubm90IGVuZCBzZXNzaW9uLCBsb2dnaW5nIGRpc2FibGVkIG9yIGRldmVsb3BlciB0b2tlbiBub3Qgc2V0JyxcbiAgICBOb1Nlc3Npb25Ub0VuZDogJ0Nhbm5vdCBlbmQgc2Vzc2lvbiwgbm8gYWN0aXZlIHNlc3Npb24gZm91bmQnXG59O1xuXG52YXIgTmF0aXZlU2RrUGF0aHMgPSB7XG4gICAgTG9nRXZlbnQ6ICdsb2dFdmVudCcsXG4gICAgU2V0VXNlcklkZW50aXR5OiAnc2V0VXNlcklkZW50aXR5JyxcbiAgICBSZW1vdmVVc2VySWRlbnRpdHk6ICdyZW1vdmVVc2VySWRlbnRpdHknLFxuICAgIFNldFVzZXJUYWc6ICdzZXRVc2VyVGFnJyxcbiAgICBSZW1vdmVVc2VyVGFnOiAncmVtb3ZlVXNlclRhZycsXG4gICAgU2V0VXNlckF0dHJpYnV0ZTogJ3NldFVzZXJBdHRyaWJ1dGUnLFxuICAgIFJlbW92ZVVzZXJBdHRyaWJ1dGU6ICdyZW1vdmVVc2VyQXR0cmlidXRlJyxcbiAgICBTZXRTZXNzaW9uQXR0cmlidXRlOiAnc2V0U2Vzc2lvbkF0dHJpYnV0ZScsXG4gICAgQWRkVG9Qcm9kdWN0QmFnOiAnYWRkVG9Qcm9kdWN0QmFnJyxcbiAgICBSZW1vdmVGcm9tUHJvZHVjdEJhZzogJ3JlbW92ZUZyb21Qcm9kdWN0QmFnJyxcbiAgICBDbGVhclByb2R1Y3RCYWc6ICdjbGVhclByb2R1Y3RCYWcnLFxuICAgIEFkZFRvQ2FydDogJ2FkZFRvQ2FydCcsXG4gICAgUmVtb3ZlRnJvbUNhcnQ6ICdyZW1vdmVGcm9tQ2FydCcsXG4gICAgQ2xlYXJDYXJ0OiAnY2xlYXJDYXJ0JyxcbiAgICBMb2dPdXQ6ICdsb2dPdXQnLFxuICAgIFNldFVzZXJBdHRyaWJ1dGVMaXN0OiAnc2V0VXNlckF0dHJpYnV0ZUxpc3QnLFxuICAgIFJlbW92ZUFsbFVzZXJBdHRyaWJ1dGVzOiAncmVtb3ZlQWxsVXNlckF0dHJpYnV0ZXMnLFxuICAgIEdldFVzZXJBdHRyaWJ1dGVzTGlzdHM6ICdnZXRVc2VyQXR0cmlidXRlc0xpc3RzJyxcbiAgICBHZXRBbGxVc2VyQXR0cmlidXRlczogJ2dldEFsbFVzZXJBdHRyaWJ1dGVzJ1xufTtcblxudmFyIFByb2R1Y3RBY3Rpb25UeXBlID0ge1xuICAgIFVua25vd246IDAsXG4gICAgQWRkVG9DYXJ0OiAxLFxuICAgIFJlbW92ZUZyb21DYXJ0OiAyLFxuICAgIENoZWNrb3V0OiAzLFxuICAgIENoZWNrb3V0T3B0aW9uOiA0LFxuICAgIENsaWNrOiA1LFxuICAgIFZpZXdEZXRhaWw6IDYsXG4gICAgUHVyY2hhc2U6IDcsXG4gICAgUmVmdW5kOiA4LFxuICAgIEFkZFRvV2lzaGxpc3Q6IDksXG4gICAgUmVtb3ZlRnJvbVdpc2hsaXN0OiAxMFxufTtcblxuUHJvZHVjdEFjdGlvblR5cGUuZ2V0TmFtZSA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgc3dpdGNoIChpZCkge1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkFkZFRvQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnQWRkIHRvIENhcnQnO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLlJlbW92ZUZyb21DYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdSZW1vdmUgZnJvbSBDYXJ0JztcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5DaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnQ2hlY2tvdXQnO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkNoZWNrb3V0T3B0aW9uOlxuICAgICAgICAgICAgcmV0dXJuICdDaGVja291dCBPcHRpb24nO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkNsaWNrOlxuICAgICAgICAgICAgcmV0dXJuICdDbGljayc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuVmlld0RldGFpbDpcbiAgICAgICAgICAgIHJldHVybiAnVmlldyBEZXRhaWwnO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLlB1cmNoYXNlOlxuICAgICAgICAgICAgcmV0dXJuICdQdXJjaGFzZSc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuUmVmdW5kOlxuICAgICAgICAgICAgcmV0dXJuICdSZWZ1bmQnO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkFkZFRvV2lzaGxpc3Q6XG4gICAgICAgICAgICByZXR1cm4gJ0FkZCB0byBXaXNobGlzdCc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuUmVtb3ZlRnJvbVdpc2hsaXN0OlxuICAgICAgICAgICAgcmV0dXJuICdSZW1vdmUgZnJvbSBXaXNobGlzdCc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xuICAgIH1cbn07XG5cbi8vdGhlc2UgYXJlIHRoZSBhY3Rpb24gbmFtZXMgdXNlZCBieSBzZXJ2ZXIgYW5kIG1vYmlsZSBTREtzIHdoZW4gZXhwYW5kaW5nIGEgQ29tbWVyY2VFdmVudFxuUHJvZHVjdEFjdGlvblR5cGUuZ2V0RXhwYW5zaW9uTmFtZSA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgc3dpdGNoIChpZCkge1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkFkZFRvQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnYWRkX3RvX2NhcnQnO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLlJlbW92ZUZyb21DYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdyZW1vdmVfZnJvbV9jYXJ0JztcbiAgICAgICAgY2FzZSBQcm9kdWN0QWN0aW9uVHlwZS5DaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnY2hlY2tvdXQnO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkNoZWNrb3V0T3B0aW9uOlxuICAgICAgICAgICAgcmV0dXJuICdjaGVja291dF9vcHRpb24nO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkNsaWNrOlxuICAgICAgICAgICAgcmV0dXJuICdjbGljayc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuVmlld0RldGFpbDpcbiAgICAgICAgICAgIHJldHVybiAndmlld19kZXRhaWwnO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLlB1cmNoYXNlOlxuICAgICAgICAgICAgcmV0dXJuICdwdXJjaGFzZSc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuUmVmdW5kOlxuICAgICAgICAgICAgcmV0dXJuICdyZWZ1bmQnO1xuICAgICAgICBjYXNlIFByb2R1Y3RBY3Rpb25UeXBlLkFkZFRvV2lzaGxpc3Q6XG4gICAgICAgICAgICByZXR1cm4gJ2FkZF90b193aXNobGlzdCc7XG4gICAgICAgIGNhc2UgUHJvZHVjdEFjdGlvblR5cGUuUmVtb3ZlRnJvbVdpc2hsaXN0OlxuICAgICAgICAgICAgcmV0dXJuICdyZW1vdmVfZnJvbV93aXNobGlzdCc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xuICAgIH1cbn07XG5cbnZhciBQcm9tb3Rpb25BY3Rpb25UeXBlID0ge1xuICAgIFVua25vd246IDAsXG4gICAgUHJvbW90aW9uVmlldzogMSxcbiAgICBQcm9tb3Rpb25DbGljazogMixcbn07XG5cblByb21vdGlvbkFjdGlvblR5cGUuZ2V0TmFtZSA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgc3dpdGNoIChpZCkge1xuICAgICAgICBjYXNlIFByb21vdGlvbkFjdGlvblR5cGUuUHJvbW90aW9uVmlldzpcbiAgICAgICAgICAgIHJldHVybiAnUHJvbW90aW9uIFZpZXcnO1xuICAgICAgICBjYXNlIFByb21vdGlvbkFjdGlvblR5cGUuUHJvbW90aW9uQ2xpY2s6XG4gICAgICAgICAgICByZXR1cm4gJ1Byb21vdGlvbiBDbGljayc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xuICAgIH1cbn07XG5cbi8vdGhlc2UgYXJlIHRoZSBuYW1lcyB0aGF0IHRoZSBzZXJ2ZXIgYW5kIG1vYmlsZSBTREtzIHVzZSB3aGlsZSBleHBhbmRpbmcgQ29tbWVyY2VFdmVudFxuUHJvbW90aW9uQWN0aW9uVHlwZS5nZXRFeHBhbnNpb25OYW1lID0gZnVuY3Rpb24oaWQpIHtcbiAgICBzd2l0Y2ggKGlkKSB7XG4gICAgICAgIGNhc2UgUHJvbW90aW9uQWN0aW9uVHlwZS5Qcm9tb3Rpb25WaWV3OlxuICAgICAgICAgICAgcmV0dXJuICd2aWV3JztcbiAgICAgICAgY2FzZSBQcm9tb3Rpb25BY3Rpb25UeXBlLlByb21vdGlvbkNsaWNrOlxuICAgICAgICAgICAgcmV0dXJuICdjbGljayc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xuICAgIH1cbn07XG5cbnZhciBtUGFydGljbGUgPSB7XG4gICAgaXNJT1M6IGZhbHNlLFxuICAgIGlzRGVidWc6IGZhbHNlLFxuICAgIGlzU2FuZGJveDogZmFsc2UsXG4gICAgZ2VuZXJhdGVIYXNoOiBnZW5lcmF0ZUhhc2gsXG4gICAgSWRlbnRpdHlUeXBlOiBJZGVudGl0eVR5cGUsXG4gICAgRXZlbnRUeXBlOiBFdmVudFR5cGUsXG4gICAgQ29tbWVyY2VFdmVudFR5cGU6IENvbW1lcmNlRXZlbnRUeXBlLFxuICAgIFByb21vdGlvblR5cGU6IFByb21vdGlvbkFjdGlvblR5cGUsXG4gICAgUHJvZHVjdEFjdGlvblR5cGU6IFByb2R1Y3RBY3Rpb25UeXBlLFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdG9rZW4sXG4gICAgICAgICAgICBjb25maWc7XG5cbiAgICAgICAgbG9nRGVidWcoSW5mb3JtYXRpb25NZXNzYWdlcy5TdGFydGluZ0luaXRpYWxpemF0aW9uKTtcblxuICAgICAgICAvLyBTZXQgY29uZmlndXJhdGlvbiB0byBkZWZhdWx0IHNldHRpbmdzXG4gICAgICAgIG1lcmdlQ29uZmlnKHt9KTtcbiAgICAgICAgLy8gTG9hZCBhbnkgc2V0dGluZ3MvaWRlbnRpdGllcy9hdHRyaWJ1dGVzIGZyb20gY29va2llXG4gICAgICAgIGNvb2tpZS5nZXRDb29raWUoKTtcblxuICAgICAgICBpZiAoYXJndW1lbnRzICYmIGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGRldiB0b2tlblxuICAgICAgICAgICAgICAgIHRva2VuID0gYXJndW1lbnRzWzBdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRldlRva2VuICE9PSB0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICBtUGFydGljbGUuZW5kU2Vzc2lvbigpO1xuICAgICAgICAgICAgICAgICAgICBkZXZUb2tlbiA9IHRva2VuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGluaXRGb3J3YXJkZXJzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGNvbmZpZyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIG1lcmdlQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxsIGFueSBmdW5jdGlvbnMgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhlIGxpYnJhcnkgdG8gYmUgaW5pdGlhbGl6ZWRcbiAgICAgICAgaWYgKHJlYWR5UXVldWUgJiYgcmVhZHlRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVhZHlRdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhZHlRdWV1ZVtpXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWR5UXVldWVbaV0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlYWR5UXVldWUgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvb2tpZS5zZXRDb29raWUoXG4gICAgICAgICAgICAgICAgQ29uZmlnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc2lkOiBzZXNzaW9uSWQsIGllOiBpc0VuYWJsZWQsIHNhOiBzZXNzaW9uQXR0cmlidXRlcywgXG4gICAgICAgICAgICAgICAgICAgIHVhOiB1c2VyQXR0cmlidXRlcywgdWk6IHVzZXJJZGVudGl0aWVzLCBzczogc2VydmVyU2V0dGluZ3MsIGR0OiBkZXZUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgbGVzOiBsYXN0RXZlbnRTZW50ID8gbGFzdEV2ZW50U2VudC5nZXRUaW1lKCkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBhdjogYXBwVmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgY2dpZDogY2xpZW50SWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICBpc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB9LFxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gQ29tcGxldGVseSByZXNldHMgdGhlIHN0YXRlIG9mIHRoZSBTREsuIG1QYXJ0aWNsZS5pbml0KCkgd2lsbCBuZWVkIHRvIGJlIGNhbGxlZCBhZ2Fpbi5cblxuICAgICAgICBpc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICBzdG9wVHJhY2tpbmcoKTtcbiAgICAgICAgZGV2VG9rZW4gPSBudWxsO1xuICAgICAgICBzZXNzaW9uSWQgPSBudWxsO1xuICAgICAgICBhcHBOYW1lID0gbnVsbDtcbiAgICAgICAgYXBwVmVyc2lvbiA9IG51bGw7XG4gICAgICAgIHNlc3Npb25BdHRyaWJ1dGVzID0ge307XG4gICAgICAgIHVzZXJBdHRyaWJ1dGVzID0ge307XG4gICAgICAgIHVzZXJJZGVudGl0aWVzID0gW107XG4gICAgICAgIGZvcndhcmRlcnMgPSBbXTtcbiAgICAgICAgZm9yd2FyZGVyQ29uc3RydWN0b3JzID0gW107XG4gICAgICAgIHByb2R1Y3RzQmFncyA9IHt9O1xuICAgICAgICBjYXJ0UHJvZHVjdHMgPSBbXTtcbiAgICAgICAgc2VydmVyU2V0dGluZ3MgPSBudWxsO1xuICAgICAgICBtZXJnZUNvbmZpZyh7fSk7XG4gICAgICAgIGNvb2tpZS5zZXRDb29raWUoXG4gICAgICAgICAgICAgICAgQ29uZmlnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc2lkOiBzZXNzaW9uSWQsIGllOiBpc0VuYWJsZWQsIHNhOiBzZXNzaW9uQXR0cmlidXRlcywgXG4gICAgICAgICAgICAgICAgICAgIHVhOiB1c2VyQXR0cmlidXRlcywgdWk6IHVzZXJJZGVudGl0aWVzLCBzczogc2VydmVyU2V0dGluZ3MsIGR0OiBkZXZUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgbGVzOiBsYXN0RXZlbnRTZW50ID8gbGFzdEV2ZW50U2VudC5nZXRUaW1lKCkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBhdjogYXBwVmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgY2dpZDogY2xpZW50SWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB9LFxuICAgIHJlYWR5OiBmdW5jdGlvbihmKSB7XG4gICAgICAgIGlmIChpc0luaXRpYWxpemVkICYmIHR5cGVvZiBmID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGYoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlYWR5UXVldWUucHVzaChmKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0VmVyc2lvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBzZGtWZXJzaW9uO1xuICAgIH0sXG4gICAgc2V0QXBwVmVyc2lvbjogZnVuY3Rpb24odmVyc2lvbikge1xuICAgICAgICBhcHBWZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgY29va2llLnNldENvb2tpZShcbiAgICAgICAgICAgICAgICBDb25maWcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzaWQ6IHNlc3Npb25JZCwgaWU6IGlzRW5hYmxlZCwgc2E6IHNlc3Npb25BdHRyaWJ1dGVzLCBcbiAgICAgICAgICAgICAgICAgICAgdWE6IHVzZXJBdHRyaWJ1dGVzLCB1aTogdXNlcklkZW50aXRpZXMsIHNzOiBzZXJ2ZXJTZXR0aW5ncywgZHQ6IGRldlRva2VuLFxuICAgICAgICAgICAgICAgICAgICBsZXM6IGxhc3RFdmVudFNlbnQgPyBsYXN0RXZlbnRTZW50LmdldFRpbWUoKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGF2OiBhcHBWZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICBjZ2lkOiBjbGllbnRJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfSxcbiAgICBnZXRBcHBOYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGFwcE5hbWU7XG4gICAgfSxcbiAgICBzZXRBcHBOYW1lOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIGFwcE5hbWUgPSBuYW1lO1xuICAgIH0sXG4gICAgZ2V0QXBwVmVyc2lvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBhcHBWZXJzaW9uO1xuICAgIH0sXG4gICAgc3RvcFRyYWNraW5nTG9jYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICBzdG9wVHJhY2tpbmcoKTtcbiAgICB9LFxuICAgIHN0YXJ0VHJhY2tpbmdMb2NhdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHN0YXJ0VHJhY2tpbmcoKTtcbiAgICB9LFxuICAgIHNldFBvc2l0aW9uOiBmdW5jdGlvbihsYXQsIGxuZykge1xuICAgICAgICBpZiAodHlwZW9mIGxhdCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGxuZyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IGxhdCxcbiAgICAgICAgICAgICAgICBsbmc6IGxuZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ0RlYnVnKCdQb3NpdGlvbiBsYXRpdHVkZSBhbmQvb3IgbG9uZ2l0dWRlIGFyZSBpbnZhbGlkJyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldFVzZXJJZGVudGl0eTogZnVuY3Rpb24oaWQsIHR5cGUpIHtcbiAgICAgICAgaWYgKGNhbkxvZygpKSB7XG4gICAgICAgICAgICB2YXIgdXNlcklkZW50aXR5ID0ge1xuICAgICAgICAgICAgICAgIElkZW50aXR5OiBpZCxcbiAgICAgICAgICAgICAgICBUeXBlOiB0eXBlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBtUGFydGljbGUucmVtb3ZlVXNlcklkZW50aXR5KGlkKTtcbiAgICAgICAgICAgIHVzZXJJZGVudGl0aWVzLnB1c2godXNlcklkZW50aXR5KTtcblxuICAgICAgICAgICAgaWYgKCF0cnlOYXRpdmVTZGsoTmF0aXZlU2RrUGF0aHMuU2V0VXNlcklkZW50aXR5LCBKU09OLnN0cmluZ2lmeSh1c2VySWRlbnRpdHkpKSkge1xuICAgICAgICAgICAgICAgIGlmIChmb3J3YXJkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9yd2FyZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvcndhcmRlcnNbaV0uc2V0VXNlcklkZW50aXR5ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFmb3J3YXJkZXJzW2ldLnVzZXJJZGVudGl0eUZpbHRlcnMgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXV0aWxpdGllcy5pbkFycmF5KGZvcndhcmRlcnNbaV0udXNlcklkZW50aXR5RmlsdGVycywgdHlwZSkpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZm9yd2FyZGVyc1tpXS5zZXRVc2VySWRlbnRpdHkoaWQsIHR5cGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dEZWJ1ZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29va2llLnNldENvb2tpZShcbiAgICAgICAgICAgICAgICBDb25maWcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzaWQ6IHNlc3Npb25JZCwgaWU6IGlzRW5hYmxlZCwgc2E6IHNlc3Npb25BdHRyaWJ1dGVzLCBcbiAgICAgICAgICAgICAgICAgICAgdWE6IHVzZXJBdHRyaWJ1dGVzLCB1aTogdXNlcklkZW50aXRpZXMsIHNzOiBzZXJ2ZXJTZXR0aW5ncywgZHQ6IGRldlRva2VuLFxuICAgICAgICAgICAgICAgICAgICBsZXM6IGxhc3RFdmVudFNlbnQgPyBsYXN0RXZlbnRTZW50LmdldFRpbWUoKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGF2OiBhcHBWZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICBjZ2lkOiBjbGllbnRJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldFVzZXJJZGVudGl0eTogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgdmFyIGZvdW5kSWRlbnRpdHkgPSBudWxsO1xuXG4gICAgICAgIHVzZXJJZGVudGl0aWVzLmZvckVhY2goZnVuY3Rpb24oaWRlbnRpdHkpIHtcbiAgICAgICAgICAgIGlmIChpZGVudGl0eS5JZGVudGl0eSA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICBmb3VuZElkZW50aXR5ID0gaWRlbnRpdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmb3VuZElkZW50aXR5O1xuICAgIH0sXG4gICAgcmVtb3ZlVXNlcklkZW50aXR5OiBmdW5jdGlvbihpZCkge1xuICAgICAgICB2YXIgaSA9IDA7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHVzZXJJZGVudGl0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodXNlcklkZW50aXRpZXNbaV0uSWRlbnRpdHkgPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgdXNlcklkZW50aXRpZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeU5hdGl2ZVNkayhOYXRpdmVTZGtQYXRocy5SZW1vdmVVc2VySWRlbnRpdHksIGlkKTtcbiAgICAgICAgY29va2llLnNldENvb2tpZShcbiAgICAgICAgICAgICAgICBDb25maWcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzaWQ6IHNlc3Npb25JZCwgaWU6IGlzRW5hYmxlZCwgc2E6IHNlc3Npb25BdHRyaWJ1dGVzLCBcbiAgICAgICAgICAgICAgICAgICAgdWE6IHVzZXJBdHRyaWJ1dGVzLCB1aTogdXNlcklkZW50aXRpZXMsIHNzOiBzZXJ2ZXJTZXR0aW5ncywgZHQ6IGRldlRva2VuLFxuICAgICAgICAgICAgICAgICAgICBsZXM6IGxhc3RFdmVudFNlbnQgPyBsYXN0RXZlbnRTZW50LmdldFRpbWUoKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGF2OiBhcHBWZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICBjZ2lkOiBjbGllbnRJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfSxcbiAgICBzdGFydE5ld1Nlc3Npb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBFbmRzIHRoZSBjdXJyZW50IHNlc3Npb24gaWYgb25lIGlzIGluIHByb2dyZXNzXG5cbiAgICAgICAgbG9nRGVidWcoSW5mb3JtYXRpb25NZXNzYWdlcy5TdGFydGluZ05ld1Nlc3Npb24pO1xuXG4gICAgICAgIGlmIChjYW5Mb2coKSkge1xuICAgICAgICAgICAgbVBhcnRpY2xlLmVuZFNlc3Npb24oKTtcbiAgICAgICAgICAgIHNlc3Npb25JZCA9IGdlbmVyYXRlVW5pcXVlSWQoKTtcblxuICAgICAgICAgICAgaWYgKCFsYXN0RXZlbnRTZW50KSB7XG4gICAgICAgICAgICAgICAgbGFzdEV2ZW50U2VudCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxvZ0V2ZW50KE1lc3NhZ2VUeXBlLlNlc3Npb25TdGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhJbmZvcm1hdGlvbk1lc3NhZ2VzLkFiYW5kb25TdGFydFNlc3Npb24pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBlbmRTZXNzaW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgbG9nRGVidWcoSW5mb3JtYXRpb25NZXNzYWdlcy5TdGFydGluZ0VuZFNlc3Npb24pO1xuXG4gICAgICAgIC8vIEVuZHMgdGhlIGN1cnJlbnQgc2Vzc2lvbi5cbiAgICAgICAgaWYgKGNhbkxvZygpKSB7XG4gICAgICAgICAgICBpZiAoIXNlc3Npb25JZCkge1xuICAgICAgICAgICAgICAgIGxvZ0RlYnVnKEluZm9ybWF0aW9uTWVzc2FnZXMuTm9TZXNzaW9uVG9FbmQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9nRXZlbnQoTWVzc2FnZVR5cGUuU2Vzc2lvbkVuZCk7XG5cbiAgICAgICAgICAgIHNlc3Npb25JZCA9IG51bGw7XG4gICAgICAgICAgICBzZXNzaW9uQXR0cmlidXRlcyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nRGVidWcoSW5mb3JtYXRpb25NZXNzYWdlcy5BYmFuZG9uRW5kU2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGxvZ0V2ZW50OiBmdW5jdGlvbihldmVudE5hbWUsIGV2ZW50VHlwZSwgZXZlbnRJbmZvLCBjdXN0b21GbGFncykge1xuICAgICAgICBpZiAodHlwZW9mIChldmVudE5hbWUpICE9ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhFcnJvck1lc3NhZ2VzLkV2ZW50TmFtZUludmFsaWRUeXBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXZlbnRUeXBlKSB7XG4gICAgICAgICAgICBldmVudFR5cGUgPSBFdmVudFR5cGUuVW5rbm93bjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNFdmVudFR5cGUoZXZlbnRUeXBlKSkge1xuICAgICAgICAgICAgbG9nRGVidWcoJ0ludmFsaWQgZXZlbnQgdHlwZTogJyArIGV2ZW50VHlwZSArICcsIG11c3QgYmUgb25lIG9mOiBcXG4nICsgSlNPTi5zdHJpbmdpZnkoRXZlbnRUeXBlKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNhbkxvZygpKSB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhFcnJvck1lc3NhZ2VzLkxvZ2dpbmdEaXNhYmxlZCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxhc3RFdmVudFNlbnQpIHtcbiAgICAgICAgICAgIGxhc3RFdmVudFNlbnQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5ldyBEYXRlKCkgPiBuZXcgRGF0ZShsYXN0RXZlbnRTZW50LmdldFRpbWUoKSArIENvbmZpZy5TZXNzaW9uVGltZW91dCAqIDYwMDAwKSkge1xuICAgICAgICAgICAgLy8gU2Vzc2lvbiBoYXMgdGltZWQgb3V0LCBzdGFydCBhIG5ldyBvbmVcbiAgICAgICAgICAgIG1QYXJ0aWNsZS5zdGFydE5ld1Nlc3Npb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZ0V2ZW50KE1lc3NhZ2VUeXBlLlBhZ2VFdmVudCwgZXZlbnROYW1lLCBldmVudEluZm8sIGV2ZW50VHlwZSwgY3VzdG9tRmxhZ3MpO1xuICAgIH0sXG4gICAgbG9nRXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGVycm9yID0ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgbG9nRXZlbnQoTWVzc2FnZVR5cGUuQ3Jhc2hSZXBvcnQsXG4gICAgICAgICAgICBlcnJvci5uYW1lID8gZXJyb3IubmFtZSA6ICdFcnJvcicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbTogZXJyb3IubWVzc2FnZSA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvcixcbiAgICAgICAgICAgICAgICBzOiAnRXJyb3InLFxuICAgICAgICAgICAgICAgIHQ6IGVycm9yLnN0YWNrXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRXZlbnRUeXBlLk90aGVyKTtcbiAgICB9LFxuICAgIGxvZ0xpbms6IGZ1bmN0aW9uKHNlbGVjdG9yLCBldmVudE5hbWUsIGV2ZW50VHlwZSwgZXZlbnRJbmZvKSB7XG4gICAgICAgIGFkZEV2ZW50SGFuZGxlcignY2xpY2snLCBzZWxlY3RvciwgZXZlbnROYW1lLCBldmVudEluZm8sIGV2ZW50VHlwZSk7XG4gICAgfSxcbiAgICBsb2dGb3JtOiBmdW5jdGlvbihzZWxlY3RvciwgZXZlbnROYW1lLCBldmVudFR5cGUsIGV2ZW50SW5mbykge1xuICAgICAgICBhZGRFdmVudEhhbmRsZXIoJ3N1Ym1pdCcsIHNlbGVjdG9yLCBldmVudE5hbWUsIGV2ZW50SW5mbywgZXZlbnRUeXBlKTtcbiAgICB9LFxuICAgIGxvZ1BhZ2VWaWV3OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGV2ZW50TmFtZSA9IG51bGwsXG4gICAgICAgICAgICBhdHRycyA9IG51bGwsXG4gICAgICAgICAgICBmbGFncyA9IG51bGw7XG5cbiAgICAgICAgaWYgKGNhbkxvZygpKSB7XG4gICAgICAgICAgICBpZihhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgb3JpZ2luYWwgZnVuY3Rpb24gc2lnbmF0dXJlXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZXZlbnROYW1lID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICAgICAgICAgICAgICAgIGF0dHJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9zdG5hbWU6IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB3aW5kb3cuZG9jdW1lbnQudGl0bGVcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWdzID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWUgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgYXR0cnMgPSBhcmd1bWVudHNbMV07XG5cbiAgICAgICAgICAgICAgICBpZihhcmd1bWVudHMubGVuZ3RoID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3MgPSBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsb2dFdmVudChNZXNzYWdlVHlwZS5QYWdlVmlldywgZXZlbnROYW1lLCBhdHRycywgRXZlbnRUeXBlLlVua25vd24sIGZsYWdzKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZUNvbW1lcmNlOiB7XG4gICAgICAgIFByb2R1Y3RCYWdzOiB7XG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uKHByb2R1Y3RCYWdOYW1lLCBwcm9kdWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcm9kdWN0c0JhZ3NbcHJvZHVjdEJhZ05hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQmFnc1twcm9kdWN0QmFnTmFtZV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBwcm9kdWN0c0JhZ3NbcHJvZHVjdEJhZ05hbWVdLnB1c2gocHJvZHVjdCk7XG5cbiAgICAgICAgICAgICAgICB0cnlOYXRpdmVTZGsoTmF0aXZlU2RrUGF0aHMuQWRkVG9Qcm9kdWN0QmFnLCBKU09OLnN0cmluZ2lmeShwcm9kdWN0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihwcm9kdWN0QmFnTmFtZSwgcHJvZHVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0SW5kZXggPSAtMTtcblxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0c0JhZ3NbcHJvZHVjdEJhZ05hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQmFnc1twcm9kdWN0QmFnTmFtZV0uZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uc2t1ID09PSBwcm9kdWN0LnNrdSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQmFnc1twcm9kdWN0QmFnTmFtZV0uc3BsaWNlKHByb2R1Y3RJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cnlOYXRpdmVTZGsoTmF0aXZlU2RrUGF0aHMuUmVtb3ZlRnJvbVByb2R1Y3RCYWcsIEpTT04uc3RyaW5naWZ5KHByb2R1Y3QpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24ocHJvZHVjdEJhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICBwcm9kdWN0c0JhZ3NbcHJvZHVjdEJhZ05hbWVdID0gW107XG5cbiAgICAgICAgICAgICAgICB0cnlOYXRpdmVTZGsoTmF0aXZlU2RrUGF0aHMuQ2xlYXJQcm9kdWN0QmFnLCBwcm9kdWN0QmFnTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIENhcnQ6IHtcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24ocHJvZHVjdCwgbG9nRXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXlDb3B5ID0gW107XG5cbiAgICAgICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KHByb2R1Y3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwcm9kdWN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheUNvcHkucHVzaChwcm9kdWN0W2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlDb3B5LnB1c2gocHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2FydFByb2R1Y3RzID0gY2FydFByb2R1Y3RzLmNvbmNhdChhcnJheUNvcHkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHV0aWxpdGllcy5pc1dlYlZpZXdFbWJlZGRlZChuYXZpZ2F0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeU5hdGl2ZVNkayhOYXRpdmVTZGtQYXRocy5BZGRUb0NhcnQsIEpTT04uc3RyaW5naWZ5KGFycmF5Q29weSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsb2dFdmVudCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dQcm9kdWN0QWN0aW9uRXZlbnQoUHJvZHVjdEFjdGlvblR5cGUuQWRkVG9DYXJ0LCBhcnJheUNvcHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKHByb2R1Y3QsIGxvZ0V2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhcnRJbmRleCA9IC0xLFxuICAgICAgICAgICAgICAgICAgICBjYXJ0SXRlbSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICBpZiAoY2FydFByb2R1Y3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhcnRQcm9kdWN0cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5Ta3UgPT09IHByb2R1Y3QuU2t1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FydEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FydEl0ZW0gPSBpdGVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FydEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcnRQcm9kdWN0cy5zcGxpY2UoY2FydEluZGV4LCAxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHV0aWxpdGllcy5pc1dlYlZpZXdFbWJlZGRlZChuYXZpZ2F0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5TmF0aXZlU2RrKE5hdGl2ZVNka1BhdGhzLlJlbW92ZUZyb21DYXJ0LCBKU09OLnN0cmluZ2lmeShjYXJ0SXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobG9nRXZlbnQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dQcm9kdWN0QWN0aW9uRXZlbnQoUHJvZHVjdEFjdGlvblR5cGUuUmVtb3ZlRnJvbUNhcnQsIGNhcnRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY2FydFByb2R1Y3RzID0gW107XG4gICAgICAgICAgICAgICAgdHJ5TmF0aXZlU2RrKE5hdGl2ZVNka1BhdGhzLkNsZWFyQ2FydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNldEN1cnJlbmN5Q29kZTogZnVuY3Rpb24oY29kZSkge1xuICAgICAgICAgICAgY3VycmVuY3lDb2RlID0gY29kZTtcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlUHJvZHVjdDogZnVuY3Rpb24obmFtZSwgc2t1LCBwcmljZSwgcXVhbnRpdHksIHZhcmlhbnQsIGNhdGVnb3J5LCBicmFuZCwgcG9zaXRpb24sIGNvdXBvbiwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb2R1Y3QobmFtZSwgc2t1LCBwcmljZSwgcXVhbnRpdHksIHZhcmlhbnQsIGNhdGVnb3J5LCBicmFuZCwgcG9zaXRpb24sIGNvdXBvbiwgYXR0cmlidXRlcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZVByb21vdGlvbjogZnVuY3Rpb24oaWQsIGNyZWF0aXZlLCBuYW1lLCBwb3NpdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb21vdGlvbihpZCwgY3JlYXRpdmUsIG5hbWUsIHBvc2l0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlSW1wcmVzc2lvbjogZnVuY3Rpb24obmFtZSwgcHJvZHVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUltcHJlc3Npb24obmFtZSwgcHJvZHVjdCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZVRyYW5zYWN0aW9uQXR0cmlidXRlczogZnVuY3Rpb24oaWQsIGFmZmlsaWF0aW9uLCBjb3Vwb25Db2RlLCByZXZlbnVlLCBzaGlwcGluZywgdGF4KSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVHJhbnNhY3Rpb25BdHRyaWJ1dGVzKGlkLCBhZmZpbGlhdGlvbiwgY291cG9uQ29kZSwgcmV2ZW51ZSwgc2hpcHBpbmcsIHRheCk7XG4gICAgICAgIH0sXG4gICAgICAgIGxvZ0NoZWNrb3V0OiBmdW5jdGlvbihzdGVwLCBwYXltZW50TWV0aG9kLCBhdHRycykge1xuICAgICAgICAgICAgbG9nQ2hlY2tvdXRFdmVudChzdGVwLCBwYXltZW50TWV0aG9kLCBhdHRycyk7XG4gICAgICAgIH0sXG4gICAgICAgIGxvZ1Byb2R1Y3RBY3Rpb246IGZ1bmN0aW9uKHByb2R1Y3RBY3Rpb25UeXBlLCBwcm9kdWN0LCBhdHRycykge1xuICAgICAgICAgICAgbG9nUHJvZHVjdEFjdGlvbkV2ZW50KHByb2R1Y3RBY3Rpb25UeXBlLCBwcm9kdWN0LCBhdHRycyk7XG4gICAgICAgIH0sXG4gICAgICAgIGxvZ1B1cmNoYXNlOiBmdW5jdGlvbih0cmFuc2FjdGlvbkF0dHJpYnV0ZXMsIHByb2R1Y3QsIGNsZWFyQ2FydCwgYXR0cnMpIHtcbiAgICAgICAgICAgIGxvZ1B1cmNoYXNlRXZlbnQodHJhbnNhY3Rpb25BdHRyaWJ1dGVzLCBwcm9kdWN0LCBhdHRycyk7XG5cbiAgICAgICAgICAgIGlmIChjbGVhckNhcnQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBtUGFydGljbGUuZUNvbW1lcmNlLkNhcnQuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbG9nUHJvbW90aW9uOiBmdW5jdGlvbih0eXBlLCBwcm9tb3Rpb24sIGF0dHJzKSB7XG4gICAgICAgICAgICBsb2dQcm9tb3Rpb25FdmVudCh0eXBlLCBwcm9tb3Rpb24sIGF0dHJzKTtcbiAgICAgICAgfSxcbiAgICAgICAgbG9nSW1wcmVzc2lvbjogZnVuY3Rpb24oaW1wcmVzc2lvbiwgYXR0cnMpIHtcbiAgICAgICAgICAgIGxvZ0ltcHJlc3Npb25FdmVudChpbXByZXNzaW9uLCBhdHRycyk7XG4gICAgICAgIH0sXG4gICAgICAgIGxvZ1JlZnVuZDogZnVuY3Rpb24odHJhbnNhY3Rpb25BdHRyaWJ1dGVzLCBwcm9kdWN0LCBjbGVhckNhcnQsIGF0dHJzKSB7XG4gICAgICAgICAgICBsb2dSZWZ1bmRFdmVudCh0cmFuc2FjdGlvbkF0dHJpYnV0ZXMsIHByb2R1Y3QsIGF0dHJzKTtcblxuICAgICAgICAgICAgaWYgKGNsZWFyQ2FydCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIG1QYXJ0aWNsZS5lQ29tbWVyY2UuQ2FydC5jbGVhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBleHBhbmRDb21tZXJjZUV2ZW50OiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGV4cGFuZENvbW1lcmNlRXZlbnQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBsb2dFY29tbWVyY2VUcmFuc2FjdGlvbjogZnVuY3Rpb24ocHJvZHVjdE5hbWUsXG4gICAgICAgIHByb2R1Y3RTS1UsXG4gICAgICAgIHByb2R1Y3RVbml0UHJpY2UsXG4gICAgICAgIHByb2R1Y3RRdWFudGl0eSxcbiAgICAgICAgcHJvZHVjdENhdGVnb3J5LFxuICAgICAgICByZXZlbnVlQW1vdW50LFxuICAgICAgICB0YXhBbW91bnQsXG4gICAgICAgIHNoaXBwaW5nQW1vdW50LFxuICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgIGFmZmlsaWF0aW9uLFxuICAgICAgICB0cmFuc2FjdGlvbklkKSB7XG5cbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgYXR0cmlidXRlcy4kTWV0aG9kTmFtZSA9ICdMb2dFY29tbWVyY2VUcmFuc2FjdGlvbic7XG5cbiAgICAgICAgYXR0cmlidXRlcy5Qcm9kdWN0TmFtZSA9IHByb2R1Y3ROYW1lID8gcHJvZHVjdE5hbWUgOiAnJztcbiAgICAgICAgYXR0cmlidXRlcy5Qcm9kdWN0U0tVID0gcHJvZHVjdFNLVSA/IHByb2R1Y3RTS1UgOiAnJztcbiAgICAgICAgYXR0cmlidXRlcy5Qcm9kdWN0VW5pdFByaWNlID0gcHJvZHVjdFVuaXRQcmljZSA/IHByb2R1Y3RVbml0UHJpY2UgOiAwO1xuICAgICAgICBhdHRyaWJ1dGVzLlByb2R1Y3RRdWFudGl0eSA9IHByb2R1Y3RRdWFudGl0eSA/IHByb2R1Y3RRdWFudGl0eSA6IDA7XG4gICAgICAgIGF0dHJpYnV0ZXMuUHJvZHVjdENhdGVnb3J5ID0gcHJvZHVjdENhdGVnb3J5ID8gcHJvZHVjdENhdGVnb3J5IDogJyc7XG4gICAgICAgIGF0dHJpYnV0ZXMuUmV2ZW51ZUFtb3VudCA9IHJldmVudWVBbW91bnQgPyByZXZlbnVlQW1vdW50IDogMDtcbiAgICAgICAgYXR0cmlidXRlcy5UYXhBbW91bnQgPSB0YXhBbW91bnQgPyB0YXhBbW91bnQgOiAwO1xuICAgICAgICBhdHRyaWJ1dGVzLlNoaXBwaW5nQW1vdW50ID0gc2hpcHBpbmdBbW91bnQgPyBzaGlwcGluZ0Ftb3VudCA6IDA7XG4gICAgICAgIGF0dHJpYnV0ZXMuQ3VycmVuY3lDb2RlID0gY3VycmVuY3lDb2RlID8gY3VycmVuY3lDb2RlIDogJ1VTRCc7XG4gICAgICAgIGF0dHJpYnV0ZXMuVHJhbnNhY3Rpb25BZmZpbGlhdGlvbiA9IGFmZmlsaWF0aW9uID8gYWZmaWxpYXRpb24gOiAnJztcbiAgICAgICAgYXR0cmlidXRlcy5UcmFuc2FjdGlvbklEID0gdHJhbnNhY3Rpb25JZCA/IHRyYW5zYWN0aW9uSWQgOiBnZW5lcmF0ZVVuaXF1ZUlkKCk7XG5cbiAgICAgICAgbG9nRXZlbnQoTWVzc2FnZVR5cGUuUGFnZUV2ZW50LCAnRWNvbW1lcmNlJywgYXR0cmlidXRlcywgRXZlbnRUeXBlLlRyYW5zYWN0aW9uKTtcbiAgICB9LFxuICAgIGxvZ0xUVkluY3JlYXNlOiBmdW5jdGlvbiAoYW1vdW50LCBldmVudE5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYoYW1vdW50ID09IG51bGwgfHwgdHlwZW9mIGFtb3VudCA9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBsb2dEZWJ1ZygnQSB2YWxpZCBhbW91bnQgbXVzdCBiZSBwYXNzZWQgdG8gbG9nTFRWSW5jcmVhc2UuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmKCFhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGF0dHJpYnV0ZXNbUkVTRVJWRURfS0VZX0xUVl0gPSBhbW91bnQ7XG4gICAgICAgIGF0dHJpYnV0ZXNbTUVUSE9EX05BTUVdID0gTE9HX0xUVjtcbiAgICAgICAgXG4gICAgICAgIGxvZ0V2ZW50KE1lc3NhZ2VUeXBlLlBhZ2VFdmVudCwgXG4gICAgICAgICAgICAhZXZlbnROYW1lID8gJ0luY3JlYXNlIExUVicgOiBldmVudE5hbWUsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLFxuICAgICAgICAgICAgRXZlbnRUeXBlLlRyYW5zYWN0aW9uKTtcbiAgICB9LFxuICAgIHNldFVzZXJUYWc6IGZ1bmN0aW9uKHRhZ05hbWUpIHtcbiAgICAgICAgd2luZG93Lm1QYXJ0aWNsZS5zZXRVc2VyQXR0cmlidXRlKHRhZ05hbWUsIG51bGwpO1xuICAgIH0sXG4gICAgcmVtb3ZlVXNlclRhZzogZnVuY3Rpb24odGFnTmFtZSkge1xuICAgICAgICB2YXIgZXhpc3RpbmdQcm9wID0gZmluZEtleUluT2JqZWN0KHVzZXJBdHRyaWJ1dGVzLCB0YWdOYW1lKTtcblxuICAgICAgICBpZihleGlzdGluZ1Byb3AgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGFnTmFtZSA9IGV4aXN0aW5nUHJvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSB1c2VyQXR0cmlidXRlc1t0YWdOYW1lXTtcbiAgICAgICAgdHJ5TmF0aXZlU2RrKE5hdGl2ZVNka1BhdGhzLlJlbW92ZVVzZXJUYWcsIEpTT04uc3RyaW5naWZ5KHsga2V5OiB0YWdOYW1lLCB2YWx1ZTogbnVsbCB9KSk7XG4gICAgICAgIGNvb2tpZS5zZXRDb29raWUoXG4gICAgICAgICAgICAgICAgQ29uZmlnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc2lkOiBzZXNzaW9uSWQsIGllOiBpc0VuYWJsZWQsIHNhOiBzZXNzaW9uQXR0cmlidXRlcywgXG4gICAgICAgICAgICAgICAgICAgIHVhOiB1c2VyQXR0cmlidXRlcywgdWk6IHVzZXJJZGVudGl0aWVzLCBzczogc2VydmVyU2V0dGluZ3MsIGR0OiBkZXZUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgbGVzOiBsYXN0RXZlbnRTZW50ID8gbGFzdEV2ZW50U2VudC5nZXRUaW1lKCkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBhdjogYXBwVmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgY2dpZDogY2xpZW50SWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgIH0sXG4gICAgc2V0VXNlckF0dHJpYnV0ZTogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAvLyBMb2dzIHRvIGNvb2tpZVxuICAgICAgICAvLyBBbmQgbG9ncyB0byBpbi1tZW1vcnkgb2JqZWN0XG4gICAgICAgIC8vIEV4YW1wbGU6IG1QYXJ0aWNsZS5zZXRVc2VyQXR0cmlidXRlKCdlbWFpbCcsICd0YnJlZmZuaUBtcGFydGljbGUuY29tJyk7XG4gICAgICAgIGlmIChjYW5Mb2coKSkge1xuICAgICAgICAgICAgaWYoIWlzVmFsaWRBdHRyaWJ1dGVWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBsb2dEZWJ1ZyhFcnJvck1lc3NhZ2VzLkJhZEF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdQcm9wID0gZmluZEtleUluT2JqZWN0KHVzZXJBdHRyaWJ1dGVzLCBrZXkpO1xuXG4gICAgICAgICAgICBpZihleGlzdGluZ1Byb3AgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGtleSA9IGV4aXN0aW5nUHJvcDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXNlckF0dHJpYnV0ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgY29va2llLnNldENvb2tpZShcbiAgICAgICAgICAgICAgICBDb25maWcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzaWQ6IHNlc3Npb25JZCwgaWU6IGlzRW5hYmxlZCwgc2E6IHNlc3Npb25BdHRyaWJ1dGVzLCBcbiAgICAgICAgICAgICAgICAgICAgdWE6IHVzZXJBdHRyaWJ1dGVzLCB1aTogdXNlcklkZW50aXRpZXMsIHNzOiBzZXJ2ZXJTZXR0aW5ncywgZHQ6IGRldlRva2VuLFxuICAgICAgICAgICAgICAgICAgICBsZXM6IGxhc3RFdmVudFNlbnQgPyBsYXN0RXZlbnRTZW50LmdldFRpbWUoKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGF2OiBhcHBWZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICBjZ2lkOiBjbGllbnRJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICghdHJ5TmF0aXZlU2RrKE5hdGl2ZVNka1BhdGhzLlNldFVzZXJBdHRyaWJ1dGUsIEpTT04uc3RyaW5naWZ5KHsga2V5OiBrZXksIHZhbHVlOiB2YWx1ZSB9KSkpIHtcbiAgICAgICAgICAgICAgICBjYWxsU2V0VXNlckF0dHJpYnV0ZU9uRm9yd2FyZGVycyhrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVtb3ZlVXNlckF0dHJpYnV0ZTogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIHZhciBleGlzdGluZ1Byb3AgPSBmaW5kS2V5SW5PYmplY3QodXNlckF0dHJpYnV0ZXMsIGtleSk7XG5cbiAgICAgICAgaWYoZXhpc3RpbmdQcm9wICE9IG51bGwpIHtcbiAgICAgICAgICAgIGtleSA9IGV4aXN0aW5nUHJvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSB1c2VyQXR0cmlidXRlc1trZXldO1xuXG4gICAgICAgIGlmICghdHJ5TmF0aXZlU2RrKE5hdGl2ZVNka1BhdGhzLlJlbW92ZVVzZXJBdHRyaWJ1dGUsIEpTT04uc3RyaW5naWZ5KHsga2V5OiBrZXksIHZhbHVlOiBudWxsIH0pKSkge1xuICAgICAgICAgICAgYXBwbHlUb0ZvcndhcmRlcnMoJ3JlbW92ZVVzZXJBdHRyaWJ1dGUnLCBrZXksIG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29va2llLnNldENvb2tpZShcbiAgICAgICAgICAgICAgICBDb25maWcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzaWQ6IHNlc3Npb25JZCwgaWU6IGlzRW5hYmxlZCwgc2E6IHNlc3Npb25BdHRyaWJ1dGVzLCBcbiAgICAgICAgICAgICAgICAgICAgdWE6IHVzZXJBdHRyaWJ1dGVzLCB1aTogdXNlcklkZW50aXRpZXMsIHNzOiBzZXJ2ZXJTZXR0aW5ncywgZHQ6IGRldlRva2VuLFxuICAgICAgICAgICAgICAgICAgICBsZXM6IGxhc3RFdmVudFNlbnQgPyBsYXN0RXZlbnRTZW50LmdldFRpbWUoKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGF2OiBhcHBWZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICBjZ2lkOiBjbGllbnRJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfSxcbiAgICBzZXRVc2VyQXR0cmlidXRlTGlzdDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgYXJyYXlDb3B5ID0gW107XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFycmF5Q29weS5wdXNoKHZhbHVlW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGV4aXN0aW5nUHJvcCA9IGZpbmRLZXlJbk9iamVjdCh1c2VyQXR0cmlidXRlcywga2V5KTtcblxuICAgICAgICAgICAgaWYoZXhpc3RpbmdQcm9wICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBleGlzdGluZ1Byb3A7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVzZXJBdHRyaWJ1dGVzW2tleV0gPSBhcnJheUNvcHk7XG4gICAgICAgICAgICBjb29raWUuc2V0Q29va2llKFxuICAgICAgICAgICAgICAgIENvbmZpZyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNpZDogc2Vzc2lvbklkLCBpZTogaXNFbmFibGVkLCBzYTogc2Vzc2lvbkF0dHJpYnV0ZXMsIFxuICAgICAgICAgICAgICAgICAgICB1YTogdXNlckF0dHJpYnV0ZXMsIHVpOiB1c2VySWRlbnRpdGllcywgc3M6IHNlcnZlclNldHRpbmdzLCBkdDogZGV2VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGxlczogbGFzdEV2ZW50U2VudCA/IGxhc3RFdmVudFNlbnQuZ2V0VGltZSgpIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgYXY6IGFwcFZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGNnaWQ6IGNsaWVudElkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYoIXRyeU5hdGl2ZVNkayhOYXRpdmVTZGtQYXRocy5TZXRVc2VyQXR0cmlidXRlTGlzdCwgSlNPTi5zdHJpbmdpZnkoe2tleToga2V5LCB2YWx1ZTogYXJyYXlDb3B5fSkpKSB7XG4gICAgICAgICAgICAgICAgY2FsbFNldFVzZXJBdHRyaWJ1dGVPbkZvcndhcmRlcnMoa2V5LCBhcnJheUNvcHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICByZW1vdmVBbGxVc2VyQXR0cmlidXRlczogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZighdHJ5TmF0aXZlU2RrKE5hdGl2ZVNka1BhdGhzLlJlbW92ZUFsbFVzZXJBdHRyaWJ1dGVzKSkge1xuICAgICAgICAgICAgaWYodXNlckF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IodmFyIHByb3AgaW4gdXNlckF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYodXNlckF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5VG9Gb3J3YXJkZXJzKCdyZW1vdmVVc2VyQXR0cmlidXRlJywgdXNlckF0dHJpYnV0ZXNbcHJvcF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdXNlckF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgY29va2llLnNldENvb2tpZShcbiAgICAgICAgICAgICAgICBDb25maWcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzaWQ6IHNlc3Npb25JZCwgaWU6IGlzRW5hYmxlZCwgc2E6IHNlc3Npb25BdHRyaWJ1dGVzLCBcbiAgICAgICAgICAgICAgICAgICAgdWE6IHVzZXJBdHRyaWJ1dGVzLCB1aTogdXNlcklkZW50aXRpZXMsIHNzOiBzZXJ2ZXJTZXR0aW5ncywgZHQ6IGRldlRva2VuLFxuICAgICAgICAgICAgICAgICAgICBsZXM6IGxhc3RFdmVudFNlbnQgPyBsYXN0RXZlbnRTZW50LmdldFRpbWUoKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGF2OiBhcHBWZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICBjZ2lkOiBjbGllbnRJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfSxcbiAgICBnZXRVc2VyQXR0cmlidXRlc0xpc3RzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1c2VyQXR0cmlidXRlTGlzdHMgPSB7fSxcbiAgICAgICAgICAgIGFycmF5Q29weTtcblxuICAgICAgICBmb3IodmFyIGtleSBpbiB1c2VyQXR0cmlidXRlcykge1xuICAgICAgICAgICAgaWYodXNlckF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBBcnJheS5pc0FycmF5KHVzZXJBdHRyaWJ1dGVzW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlDb3B5ID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdXNlckF0dHJpYnV0ZXNba2V5XS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBhcnJheUNvcHkucHVzaCh1c2VyQXR0cmlidXRlc1trZXldW2ldKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB1c2VyQXR0cmlidXRlTGlzdHNba2V5XSA9IGFycmF5Q29weTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1c2VyQXR0cmlidXRlTGlzdHM7XG4gICAgfSxcbiAgICBnZXRBbGxVc2VyQXR0cmlidXRlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1c2VyQXR0cmlidXRlc0NvcHkgPSB7fSxcbiAgICAgICAgICAgIGFycmF5Q29weTtcblxuICAgICAgICBpZih1c2VyQXR0cmlidXRlcykge1xuICAgICAgICAgICAgZm9yKHZhciBwcm9wIGluIHVzZXJBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgaWYodXNlckF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoQXJyYXkuaXNBcnJheSh1c2VyQXR0cmlidXRlc1twcm9wXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5Q29weSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdXNlckF0dHJpYnV0ZXNbcHJvcF0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheUNvcHkucHVzaCh1c2VyQXR0cmlidXRlc1twcm9wXVtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJBdHRyaWJ1dGVzQ29weVtwcm9wXSA9IGFycmF5Q29weTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJBdHRyaWJ1dGVzQ29weVtwcm9wXSA9IHVzZXJBdHRyaWJ1dGVzW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVzZXJBdHRyaWJ1dGVzQ29weTtcbiAgICB9LFxuICAgIHNldFNlc3Npb25BdHRyaWJ1dGU6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgLy8gTG9ncyB0byBjb29raWVcbiAgICAgICAgLy8gQW5kIGxvZ3MgdG8gaW4tbWVtb3J5IG9iamVjdFxuICAgICAgICAvLyBFeGFtcGxlOiBtUGFydGljbGUuc2V0U2Vzc2lvbkF0dHJpYnV0ZSgnbG9jYXRpb24nLCAnMzM0MzEnKTtcbiAgICAgICAgaWYgKGNhbkxvZygpKSB7XG4gICAgICAgICAgICBpZighaXNWYWxpZEF0dHJpYnV0ZVZhbHVlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGxvZ0RlYnVnKEVycm9yTWVzc2FnZXMuQmFkQXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBleGlzdGluZ1Byb3AgPSBmaW5kS2V5SW5PYmplY3Qoc2Vzc2lvbkF0dHJpYnV0ZXMsIGtleSk7XG5cbiAgICAgICAgICAgIGlmKGV4aXN0aW5nUHJvcCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gZXhpc3RpbmdQcm9wO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uQXR0cmlidXRlc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICBjb29raWUuc2V0Q29va2llKFxuICAgICAgICAgICAgICAgIENvbmZpZyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNpZDogc2Vzc2lvbklkLCBpZTogaXNFbmFibGVkLCBzYTogc2Vzc2lvbkF0dHJpYnV0ZXMsIFxuICAgICAgICAgICAgICAgICAgICB1YTogdXNlckF0dHJpYnV0ZXMsIHVpOiB1c2VySWRlbnRpdGllcywgc3M6IHNlcnZlclNldHRpbmdzLCBkdDogZGV2VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGxlczogbGFzdEV2ZW50U2VudCA/IGxhc3RFdmVudFNlbnQuZ2V0VGltZSgpIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgYXY6IGFwcFZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGNnaWQ6IGNsaWVudElkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICghdHJ5TmF0aXZlU2RrKE5hdGl2ZVNka1BhdGhzLlNldFNlc3Npb25BdHRyaWJ1dGUsIEpTT04uc3RyaW5naWZ5KHsga2V5OiBrZXksIHZhbHVlOiB2YWx1ZSB9KSkpIHtcbiAgICAgICAgICAgICAgICBhcHBseVRvRm9yd2FyZGVycygnc2V0U2Vzc2lvbkF0dHJpYnV0ZScsIFtrZXksIHZhbHVlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldE9wdE91dDogZnVuY3Rpb24oaXNPcHRpbmdPdXQpIHtcbiAgICAgICAgaXNFbmFibGVkID0gIWlzT3B0aW5nT3V0O1xuXG4gICAgICAgIGxvZ09wdE91dCgpO1xuICAgICAgICBjb29raWUuc2V0Q29va2llKFxuICAgICAgICAgICAgQ29uZmlnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNpZDogc2Vzc2lvbklkLCBpZTogaXNFbmFibGVkLCBzYTogc2Vzc2lvbkF0dHJpYnV0ZXMsIFxuICAgICAgICAgICAgICAgIHVhOiB1c2VyQXR0cmlidXRlcywgdWk6IHVzZXJJZGVudGl0aWVzLCBzczogc2VydmVyU2V0dGluZ3MsIGR0OiBkZXZUb2tlbixcbiAgICAgICAgICAgICAgICBsZXM6IGxhc3RFdmVudFNlbnQgPyBsYXN0RXZlbnRTZW50LmdldFRpbWUoKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgYXY6IGFwcFZlcnNpb24sXG4gICAgICAgICAgICAgICAgY2dpZDogY2xpZW50SWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoZm9yd2FyZGVycykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3J3YXJkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcndhcmRlcnNbaV0uc2V0T3B0T3V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmb3J3YXJkZXJzW2ldLnNldE9wdE91dChpc09wdGluZ091dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRGVidWcocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgbG9nT3V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGV2dDtcblxuICAgICAgICBpZiAoY2FuTG9nKCkpIHtcbiAgICAgICAgICAgIGlmICghdHJ5TmF0aXZlU2RrKE5hdGl2ZVNka1BhdGhzLkxvZ091dCkpIHtcbiAgICAgICAgICAgICAgICBldnQgPSBsb2dMb2dPdXRFdmVudCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZvcndhcmRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3J3YXJkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9yd2FyZGVyc1tpXS5sb2dPdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3J3YXJkZXJzW2ldLmxvZ091dChldnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBhZGRGb3J3YXJkZXI6IGZ1bmN0aW9uKGZvcndhcmRlclByb2Nlc3Nvcikge1xuICAgICAgICBmb3J3YXJkZXJDb25zdHJ1Y3RvcnMucHVzaChmb3J3YXJkZXJQcm9jZXNzb3IpO1xuICAgIH0sXG4gICAgY29uZmlndXJlRm9yd2FyZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG5ld0ZvcndhcmRlciA9IG51bGwsXG4gICAgICAgICAgICBjb25maWcgPSBudWxsO1xuXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25maWcgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvKiAgQWRkZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICAgICAgT2xkIHNpZ25hdHVyZSBmb3IgcmVmZXJlbmNlOlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25maWd1cmVGb3J3YXJkZXI6IGZ1bmN0aW9uIChuYW1lLFxuICAgICAgICAgICAgICAgIHNldHRpbmdzLFxuICAgICAgICAgICAgICAgIGV2ZW50TmFtZUZpbHRlcnMsXG4gICAgICAgICAgICAgICAgZXZlbnRUeXBlRmlsdGVycyxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXJzLFxuICAgICAgICAgICAgICAgIHBhZ2VWaWV3RmlsdGVycyxcbiAgICAgICAgICAgICAgICBwYWdlVmlld0F0dHJpYnV0ZUZpbHRlcnMsXG4gICAgICAgICAgICAgICAgdXNlcklkZW50aXR5RmlsdGVycyxcbiAgICAgICAgICAgICAgICB1c2VyQXR0cmlidXRlRmlsdGVycyxcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBpc1NhbmRib3gsXG4gICAgICAgICAgICAgICAgaGFzU2FuZGJveCxcbiAgICAgICAgICAgICAgICBpc1Zpc2libGUpXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogYXJndW1lbnRzWzFdLFxuICAgICAgICAgICAgICAgIGV2ZW50TmFtZUZpbHRlcnM6IGFyZ3VtZW50c1syXSxcbiAgICAgICAgICAgICAgICBldmVudFR5cGVGaWx0ZXJzOiBhcmd1bWVudHNbM10sXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyczogYXJndW1lbnRzWzRdLFxuICAgICAgICAgICAgICAgIHBhZ2VWaWV3RmlsdGVyczogYXJndW1lbnRzWzVdLFxuICAgICAgICAgICAgICAgIHBhZ2VWaWV3QXR0cmlidXRlRmlsdGVyczogYXJndW1lbnRzWzZdLFxuICAgICAgICAgICAgICAgIHVzZXJJZGVudGl0eUZpbHRlcnM6IGFyZ3VtZW50c1s3XSxcbiAgICAgICAgICAgICAgICB1c2VyQXR0cmlidXRlRmlsdGVyczogYXJndW1lbnRzWzhdLFxuICAgICAgICAgICAgICAgIG1vZHVsZUlkOiBhcmd1bWVudHNbOV0sXG4gICAgICAgICAgICAgICAgaXNTYW5kYm94OiBhcmd1bWVudHNbMTBdLFxuICAgICAgICAgICAgICAgIGhhc1NhbmRib3g6IGFyZ3VtZW50c1sxMV0sXG4gICAgICAgICAgICAgICAgaXNWaXNpYmxlOiBhcmd1bWVudHNbMTJdLFxuICAgICAgICAgICAgICAgIGZpbHRlcmluZ0V2ZW50QXR0cmlidXRlVmFsdWU6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcndhcmRlckNvbnN0cnVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGZvcndhcmRlckNvbnN0cnVjdG9yc1tpXS5uYW1lID09IGNvbmZpZy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgbmV3Rm9yd2FyZGVyID0gbmV3IGZvcndhcmRlckNvbnN0cnVjdG9yc1tpXS5jb25zdHJ1Y3RvcigpO1xuXG4gICAgICAgICAgICAgICAgbmV3Rm9yd2FyZGVyLmlkID0gY29uZmlnLm1vZHVsZUlkO1xuICAgICAgICAgICAgICAgIG5ld0ZvcndhcmRlci5pc1NhbmRib3ggPSBjb25maWcuaXNEZWJ1ZztcbiAgICAgICAgICAgICAgICBuZXdGb3J3YXJkZXIuaGFzU2FuZGJveCA9IGNvbmZpZy5oYXNEZWJ1Z1N0cmluZyA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5ld0ZvcndhcmRlci5pc1Zpc2libGUgPSBjb25maWcuaXNWaXNpYmxlO1xuICAgICAgICAgICAgICAgIG5ld0ZvcndhcmRlci5zZXR0aW5ncyA9IGNvbmZpZy5zZXR0aW5ncztcblxuICAgICAgICAgICAgICAgIG5ld0ZvcndhcmRlci5ldmVudE5hbWVGaWx0ZXJzID0gY29uZmlnLmV2ZW50TmFtZUZpbHRlcnM7XG4gICAgICAgICAgICAgICAgbmV3Rm9yd2FyZGVyLmV2ZW50VHlwZUZpbHRlcnMgPSBjb25maWcuZXZlbnRUeXBlRmlsdGVycztcbiAgICAgICAgICAgICAgICBuZXdGb3J3YXJkZXIuYXR0cmlidXRlRmlsdGVycyA9IGNvbmZpZy5hdHRyaWJ1dGVGaWx0ZXJzO1xuXG4gICAgICAgICAgICAgICAgbmV3Rm9yd2FyZGVyLnBhZ2VWaWV3RmlsdGVycyA9IGNvbmZpZy5wYWdlVmlld0ZpbHRlcnM7XG4gICAgICAgICAgICAgICAgbmV3Rm9yd2FyZGVyLnBhZ2VWaWV3QXR0cmlidXRlRmlsdGVycyA9IGNvbmZpZy5wYWdlVmlld0F0dHJpYnV0ZUZpbHRlcnM7XG5cbiAgICAgICAgICAgICAgICBuZXdGb3J3YXJkZXIudXNlcklkZW50aXR5RmlsdGVycyA9IGNvbmZpZy51c2VySWRlbnRpdHlGaWx0ZXJzO1xuICAgICAgICAgICAgICAgIG5ld0ZvcndhcmRlci51c2VyQXR0cmlidXRlRmlsdGVycyA9IGNvbmZpZy51c2VyQXR0cmlidXRlRmlsdGVycztcblxuICAgICAgICAgICAgICAgIG5ld0ZvcndhcmRlci5maWx0ZXJpbmdFdmVudEF0dHJpYnV0ZVZhbHVlID0gY29uZmlnLmZpbHRlcmluZ0V2ZW50QXR0cmlidXRlVmFsdWU7XG5cbiAgICAgICAgICAgICAgICBmb3J3YXJkZXJzLnB1c2gobmV3Rm9yd2FyZGVyKTtcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuLy8gUmVhZCBleGlzdGluZyBjb25maWd1cmF0aW9uIGlmIHByZXNlbnRcbmlmICh3aW5kb3cubVBhcnRpY2xlICYmIHdpbmRvdy5tUGFydGljbGUuY29uZmlnKSB7XG4gICAgaWYgKHdpbmRvdy5tUGFydGljbGUuY29uZmlnLnNlcnZpY2VVcmwpIHtcbiAgICAgICAgc2VydmljZVVybCA9IHdpbmRvdy5tUGFydGljbGUuY29uZmlnLnNlcnZpY2VVcmw7XG4gICAgfVxuXG4gICAgaWYgKHdpbmRvdy5tUGFydGljbGUuY29uZmlnLnNlY3VyZVNlcnZpY2VVcmwpIHtcbiAgICAgICAgc2VjdXJlU2VydmljZVVybCA9IHdpbmRvdy5tUGFydGljbGUuY29uZmlnLnNlY3VyZVNlcnZpY2VVcmw7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGFueSBmdW5jdGlvbnMgcXVldWVkXG4gICAgaWYgKHdpbmRvdy5tUGFydGljbGUuY29uZmlnLnJxKSB7XG4gICAgICAgIHJlYWR5UXVldWUgPSB3aW5kb3cubVBhcnRpY2xlLmNvbmZpZy5ycTtcbiAgICB9XG5cbiAgICBpZiAod2luZG93Lm1QYXJ0aWNsZS5jb25maWcuaGFzT3duUHJvcGVydHkoJ2lzRGVidWcnKSkge1xuICAgICAgICBtUGFydGljbGUuaXNEZWJ1ZyA9IHdpbmRvdy5tUGFydGljbGUuY29uZmlnLmlzRGVidWc7XG4gICAgfVxuXG4gICAgaWYgKHdpbmRvdy5tUGFydGljbGUuY29uZmlnLmhhc093blByb3BlcnR5KCdpc1NhbmRib3gnKSkge1xuICAgICAgICBtUGFydGljbGUuaXNTYW5kYm94ID0gd2luZG93Lm1QYXJ0aWNsZS5jb25maWcuaXNTYW5kYm94O1xuICAgIH1cblxuICAgIGlmICh3aW5kb3cubVBhcnRpY2xlLmNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnYXBwTmFtZScpKSB7XG4gICAgICAgIGFwcE5hbWUgPSB3aW5kb3cubVBhcnRpY2xlLmNvbmZpZy5hcHBOYW1lO1xuICAgIH1cblxuICAgIGlmICh3aW5kb3cubVBhcnRpY2xlLmNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnYXBwVmVyc2lvbicpKSB7XG4gICAgICAgIGFwcFZlcnNpb24gPSB3aW5kb3cubVBhcnRpY2xlLmNvbmZpZy5hcHBWZXJzaW9uO1xuICAgIH1cblxuICAgIC8vIFNvbWUgZm9yd2FyZGVycyByZXF1aXJlIGN1c3RvbSBmbGFncyBvbiBpbml0aWFsaXphdGlvbiwgc28gYWxsb3cgdGhlbSB0byBiZSBzZXQgdXNpbmcgY29uZmlnIG9iamVjdFxuICAgIGlmICh3aW5kb3cubVBhcnRpY2xlLmNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnY3VzdG9tRmxhZ3MnKSkge1xuICAgICAgICBjdXN0b21GbGFncyA9IHdpbmRvdy5tUGFydGljbGUuY29uZmlnLmN1c3RvbUZsYWdzO1xuICAgIH1cbn1cblxud2luZG93Lm1QYXJ0aWNsZSA9IG1QYXJ0aWNsZTtcblxuIl0sIm5hbWVzIjpbIlV0aWxpdGllcyIsImNiIiwibG9nRGVidWciLCJ4aHIiLCJ3aW5kb3ciLCJYTUxIdHRwUmVxdWVzdCIsImUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJYRG9tYWluUmVxdWVzdCIsIm9ubG9hZCIsInNlcnZpY2VTY2hlbWUiLCJzZWN1cmVTZXJ2aWNlVXJsIiwic2VydmljZVVybCIsImRldlRva2VuIiwibG9jYXRpb24iLCJwcm90b2NvbCIsIml0ZW1zIiwibmFtZSIsInJlc3VsdCIsImZpbmRJbmRleCIsIm5hdmlnYXRvciIsInRlc3QiLCJ1c2VyQWdlbnQiLCJleHRlcm5hbCIsIk5vdGlmeSIsIm1QYXJ0aWNsZUFuZHJvaWQiLCJpc1VJV2ViVmlldyIsIm1QYXJ0aWNsZSIsImlzSU9TIiwidXRpbGl0aWVzIiwiQ29va2llIiwiY29uZmlnIiwidmFsdWUiLCJjb29raWVzIiwiZG9jdW1lbnQiLCJjb29raWUiLCJzcGxpdCIsIkNvb2tpZU5hbWUiLCJ1bmRlZmluZWQiLCJJbmZvcm1hdGlvbk1lc3NhZ2VzIiwiQ29va2llU2VhcmNoIiwiaSIsImxlbmd0aCIsInBhcnRzIiwiZGVjb2RlZCIsInNoaWZ0Iiwiam9pbiIsImNvbnZlcnRlZCIsIkNvb2tpZUZvdW5kIiwib2JqIiwiSlNPTiIsInBhcnNlIiwic2lkIiwiU2Vzc2lvbklkIiwic2Vzc2lvbklkIiwiaWUiLCJJc0VuYWJsZWQiLCJzYSIsIlNlc3Npb25BdHRyaWJ1dGVzIiwic2Vzc2lvbkF0dHJpYnV0ZXMiLCJ1YSIsIlVzZXJBdHRyaWJ1dGVzIiwidXNlckF0dHJpYnV0ZXMiLCJ1aSIsIlVzZXJJZGVudGl0aWVzIiwidXNlcklkZW50aXRpZXMiLCJzcyIsIlNlcnZlclNldHRpbmdzIiwic2VydmVyU2V0dGluZ3MiLCJkdCIsIkRldmVsb3BlclRva2VuIiwiY2dpZCIsImdlbmVyYXRlVW5pcXVlSWQiLCJpc0VuYWJsZWQiLCJsZXMiLCJEYXRlIiwiTGFzdEV2ZW50U2VudCIsIkVycm9yTWVzc2FnZXMiLCJDb29raWVQYXJzZUVycm9yIiwiZGF0ZSIsImV4cGlyZXMiLCJnZXRUaW1lIiwiQ29va2llRXhwaXJhdGlvbiIsInRvR01UU3RyaW5nIiwiZG9tYWluIiwiQ29va2llRG9tYWluIiwiQ29va2llU2V0IiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic3RyaW5naWZ5Iiwic2RrVmVyc2lvbiIsImZvcndhcmRlckNvbnN0cnVjdG9ycyIsImZvcndhcmRlcnMiLCJjbGllbnRJZCIsImxhc3RFdmVudFNlbnQiLCJjdXJyZW50UG9zaXRpb24iLCJpc1RyYWNraW5nIiwid2F0Y2hQb3NpdGlvbklkIiwicmVhZHlRdWV1ZSIsImlzSW5pdGlhbGl6ZWQiLCJwcm9kdWN0c0JhZ3MiLCJjYXJ0UHJvZHVjdHMiLCJjdXJyZW5jeUNvZGUiLCJhcHBWZXJzaW9uIiwiYXBwTmFtZSIsImN1c3RvbUZsYWdzIiwiTUVUSE9EX05BTUUiLCJMT0dfTFRWIiwiUkVTRVJWRURfS0VZX0xUViIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGxiYWNrIiwidGhpc0FyZyIsIlQiLCJrIiwiVHlwZUVycm9yIiwiTyIsIk9iamVjdCIsImxlbiIsImFyZ3VtZW50cyIsImtWYWx1ZSIsImNhbGwiLCJtYXAiLCJBIiwibWFwcGVkVmFsdWUiLCJpc0FycmF5IiwiYXJnIiwidG9TdHJpbmciLCJleHRlbmQiLCJvcHRpb25zIiwic3JjIiwiY29weSIsImNvcHlJc0FycmF5IiwiY2xvbmUiLCJ0YXJnZXQiLCJkZWVwIiwiaGFzT3duUHJvcGVydHkiLCJTdHJpbmciLCJvYmplY3RIZWxwZXIiLCJjbGFzczJ0eXBlIiwidHlwZSIsIm5vZGVUeXBlIiwiaXNXaW5kb3ciLCJjb25zdHJ1Y3RvciIsImhhc093biIsImtleSIsImlzRnVuY3Rpb24iLCJpc1BsYWluT2JqZWN0IiwidHJ5TmF0aXZlU2RrIiwicGF0aCIsIlNlbmRBbmRyb2lkIiwiU2VuZElPUyIsImlmcmFtZSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJkb2N1bWVudEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInNlbmQiLCJldmVudCIsInhockNhbGxiYWNrIiwicmVhZHlTdGF0ZSIsInN0YXR1c1RleHQiLCJyZXNwb25zZVRleHQiLCJTZW5kQmVnaW4iLCJFdmVudEVtcHR5IiwiTmF0aXZlU2RrUGF0aHMiLCJMb2dFdmVudCIsIlNlbmRIdHRwIiwiY3JlYXRlWEhSIiwib3BlbiIsImNyZWF0ZVNlcnZpY2VVcmwiLCJjb252ZXJ0RXZlbnRUb0RUTyIsInNlbmRGb3J3YXJkaW5nU3RhdHMiLCJmb3J3YXJkZXIiLCJmb3J3YXJkaW5nU3RhdCIsImlzVmlzaWJsZSIsImlkIiwiRXZlbnROYW1lIiwiRXZlbnRBdHRyaWJ1dGVzIiwiU0RLVmVyc2lvbiIsIkV2ZW50RGF0YVR5cGUiLCJFdmVudENhdGVnb3J5IiwiRGVidWciLCJUaW1lc3RhbXAiLCJFeHBhbmRlZEV2ZW50Q291bnQiLCJhcHBseVRvRm9yd2FyZGVycyIsImZ1bmN0aW9uTmFtZSIsImZ1bmN0aW9uQXJncyIsImZvcndhcmRlckZ1bmN0aW9uIiwic2VuZEV2ZW50VG9Gb3J3YXJkZXJzIiwiY2xvbmVkRXZlbnQiLCJoYXNoZWROYW1lIiwiaGFzaGVkVHlwZSIsImZpbHRlclVzZXJBdHRyaWJ1dGVzIiwiZmlsdGVyTGlzdCIsImhhc2giLCJhdHRyTmFtZSIsImdlbmVyYXRlSGFzaCIsImluQXJyYXkiLCJmaWx0ZXJVc2VySWRlbnRpdGllcyIsIlR5cGUiLCJzcGxpY2UiLCJmaWx0ZXJBdHRyaWJ1dGVzIiwiaW5GaWx0ZXJlZExpc3QiLCJmb3J3YXJkaW5nUnVsZU1lc3NhZ2VUeXBlcyIsIk1lc3NhZ2VUeXBlIiwiUGFnZUV2ZW50IiwiUGFnZVZpZXciLCJDb21tZXJjZSIsImlzV2ViVmlld0VtYmVkZGVkIiwiaXNTYW5kYm94IiwiaGFzU2FuZGJveCIsImluZGV4T2YiLCJmaWx0ZXJpbmdFdmVudEF0dHJpYnV0ZVZhbHVlIiwiZXZlbnRBdHRyaWJ1dGVOYW1lIiwiZXZlbnRBdHRyaWJ1dGVWYWx1ZSIsImZvdW5kUHJvcCIsInByb3AiLCJpc01hdGNoIiwic2hvdWxkSW5jbHVkZSIsImluY2x1ZGVPbk1hdGNoIiwiZXZlbnROYW1lRmlsdGVycyIsImV2ZW50VHlwZUZpbHRlcnMiLCJwYWdlVmlld0ZpbHRlcnMiLCJhdHRyaWJ1dGVGaWx0ZXJzIiwicGFnZVZpZXdBdHRyaWJ1dGVGaWx0ZXJzIiwidXNlcklkZW50aXR5RmlsdGVycyIsInVzZXJBdHRyaWJ1dGVGaWx0ZXJzIiwicHJvY2VzcyIsImluaXRGb3J3YXJkZXJzIiwic29ydCIsIngiLCJ5Iiwic2V0dGluZ3MiLCJQcmlvcml0eVZhbHVlIiwiaW5pdCIsInBhcnNlUmVzcG9uc2UiLCJub3ciLCJmdWxsUHJvcCIsIlN0b3JlIiwiVmFsdWUiLCJFeHBpcmVzIiwic2V0Q29va2llIiwiQ29uZmlnIiwic3RhcnRUcmFja2luZyIsImdlb2xvY2F0aW9uIiwid2F0Y2hQb3NpdGlvbiIsInBvc2l0aW9uIiwiY29vcmRzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJzdG9wVHJhY2tpbmciLCJjbGVhcldhdGNoIiwiY29udmVydEN1c3RvbUZsYWdzIiwiZHRvIiwidmFsdWVBcnJheSIsImZsYWdzIiwiQ3VzdG9tRmxhZ3MiLCJwdXNoIiwiTG9jYXRpb24iLCJPcHRPdXQiLCJBcHBWZXJzaW9uIiwiQ2xpZW50R2VuZXJhdGVkSWQiLCJwYiIsImNvbnZlcnRQcm9kdWN0QmFnVG9EVE8iLCJjdSIsIlNob3BwaW5nQ2FydCIsInNjIiwiY29udmVydFByb2R1Y3RMaXN0VG9EVE8iLCJQcm9kdWN0TGlzdCIsIlByb2R1Y3RBY3Rpb24iLCJwZCIsIlByb2R1Y3RBY3Rpb25UeXBlIiwiQ2hlY2tvdXRTdGVwIiwiQ2hlY2tvdXRPcHRpb25zIiwiVHJhbnNhY3Rpb25JZCIsIkFmZmlsaWF0aW9uIiwiQ291cG9uQ29kZSIsIlRvdGFsQW1vdW50IiwiU2hpcHBpbmdBbW91bnQiLCJUYXhBbW91bnQiLCJQcm9tb3Rpb25BY3Rpb24iLCJwbSIsIlByb21vdGlvbkFjdGlvblR5cGUiLCJQcm9tb3Rpb25MaXN0IiwicHJvbW90aW9uIiwiSWQiLCJOYW1lIiwiQ3JlYXRpdmUiLCJQb3NpdGlvbiIsIlByb2R1Y3RJbXByZXNzaW9ucyIsInBpIiwiaW1wcmVzc2lvbiIsIlByb2R1Y3RJbXByZXNzaW9uTGlzdCIsIlByb2ZpbGUiLCJwZXQiLCJQcm9maWxlTWVzc2FnZVR5cGUiLCJwcm9kdWN0TGlzdCIsInByb2R1Y3QiLCJjb252ZXJ0UHJvZHVjdFRvRFRPIiwiU2t1IiwiUHJpY2UiLCJRdWFudGl0eSIsIkJyYW5kIiwiVmFyaWFudCIsIkNhdGVnb3J5IiwiQXR0cmlidXRlcyIsImNvbnZlcnRlZEJhZyIsImxpc3QiLCJpdGVtIiwiY29udmVydFRyYW5zYWN0aW9uQXR0cmlidXRlc1RvUHJvZHVjdEFjdGlvbiIsInRyYW5zYWN0aW9uQXR0cmlidXRlcyIsInByb2R1Y3RBY3Rpb24iLCJSZXZlbnVlIiwiU2hpcHBpbmciLCJUYXgiLCJjcmVhdGVFdmVudE9iamVjdCIsIm1lc3NhZ2VUeXBlIiwiZGF0YSIsImV2ZW50VHlwZSIsIm9wdE91dCIsImdldFByb2R1Y3RBY3Rpb25FdmVudE5hbWUiLCJwcm9kdWN0QWN0aW9uVHlwZSIsIkFkZFRvQ2FydCIsIkFkZFRvV2lzaGxpc3QiLCJDaGVja291dCIsIkNsaWNrIiwiUHVyY2hhc2UiLCJSZWZ1bmQiLCJSZW1vdmVGcm9tQ2FydCIsIlJlbW92ZUZyb21XaXNobGlzdCIsIlZpZXdEZXRhaWwiLCJVbmtub3duIiwiZ2V0UHJvbW90aW9uQWN0aW9uRXZlbnROYW1lIiwicHJvbW90aW9uQWN0aW9uVHlwZSIsIlByb21vdGlvbkNsaWNrIiwiUHJvbW90aW9uVmlldyIsImNvbnZlcnRQcm9kdWN0QWN0aW9uVG9FdmVudFR5cGUiLCJDb21tZXJjZUV2ZW50VHlwZSIsIlByb2R1Y3RBZGRUb0NhcnQiLCJQcm9kdWN0QWRkVG9XaXNobGlzdCIsIlByb2R1Y3RDaGVja291dCIsIlByb2R1Y3RDbGljayIsIlByb2R1Y3RQdXJjaGFzZSIsIlByb2R1Y3RSZWZ1bmQiLCJQcm9kdWN0UmVtb3ZlRnJvbUNhcnQiLCJQcm9kdWN0UmVtb3ZlRnJvbVdpc2hsaXN0IiwiRXZlbnRUeXBlIiwiUHJvZHVjdFZpZXdEZXRhaWwiLCJjb252ZXJ0UHJvbW90aW9uQWN0aW9uVG9FdmVudFR5cGUiLCJleHBhbmRQcm9kdWN0QWN0aW9uIiwiY29tbWVyY2VFdmVudCIsImFwcEV2ZW50cyIsInNob3VsZEV4dHJhY3RBY3Rpb25BdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsIkN1cnJlbmN5Q29kZSIsInBsdXNPbmVFdmVudCIsImdlbmVyYXRlRXhwYW5kZWRFY29tbWVyY2VOYW1lIiwiZ2V0RXhwYW5zaW9uTmFtZSIsIlRyYW5zYWN0aW9uIiwicHJvZHVjdHMiLCJwcm9kdWN0RXZlbnQiLCJleHRyYWN0UHJvZHVjdEF0dHJpYnV0ZXMiLCJleHRyYWN0VHJhbnNhY3Rpb25JZCIsImV4dHJhY3RBY3Rpb25BdHRyaWJ1dGVzIiwiZXhwYW5kUHJvbW90aW9uQWN0aW9uIiwicHJvbW90aW9ucyIsImFwcEV2ZW50IiwiZXZlbnROYW1lIiwicGx1c09uZSIsImV4dHJhY3RQcm9tb3Rpb25BdHRyaWJ1dGVzIiwiZXhwYW5kUHJvZHVjdEltcHJlc3Npb24iLCJwcm9kdWN0SW5kZXgiLCJhdHRyaWJ1dGUiLCJleHBhbmRDb21tZXJjZUV2ZW50IiwiY29uY2F0IiwiY3JlYXRlQ29tbWVyY2VFdmVudE9iamVjdCIsImJhc2VFdmVudCIsIlN0YXJ0aW5nTG9nQ29tbWVyY2VFdmVudCIsImNhbkxvZyIsInN0YXJ0TmV3U2Vzc2lvbiIsIkFiYW5kb25Mb2dFdmVudCIsImxvZ0NoZWNrb3V0RXZlbnQiLCJzdGVwIiwiYXR0cnMiLCJsb2dQcm9kdWN0QWN0aW9uRXZlbnQiLCJsb2dQdXJjaGFzZUV2ZW50IiwiYnVpbGRQcm9kdWN0TGlzdCIsImxvZ1JlZnVuZEV2ZW50IiwiVHJhbnNhY3Rpb25SZXF1aXJlZCIsImxvZ1Byb21vdGlvbkV2ZW50IiwicHJvbW90aW9uVHlwZSIsImxvZ0ltcHJlc3Npb25FdmVudCIsIlByb2R1Y3RJbXByZXNzaW9uIiwiUHJvZHVjdCIsImxvZ09wdE91dCIsIlN0YXJ0aW5nTG9nT3B0T3V0IiwiT3RoZXIiLCJsb2dFdmVudCIsImNhdGVnb3J5IiwiY2ZsYWdzIiwiU3RhcnRpbmdMb2dFdmVudCIsInNhbml0aXplQXR0cmlidXRlcyIsImxvZ0NvbW1lcmNlRXZlbnQiLCJQcm9kdWN0QmFncyIsImxvZ0xvZ091dEV2ZW50IiwiZXZ0IiwiTG9nb3V0IiwiZ2VuZXJhdGVSYW5kb21WYWx1ZSIsImEiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50OEFycmF5IiwiTWF0aCIsInJhbmRvbSIsInJlcGxhY2UiLCJtc2ciLCJpc0RlYnVnIiwiY29uc29sZSIsImxvZyIsImlzRXZlbnRUeXBlIiwibWVyZ2VDb25maWciLCJMb2FkaW5nQ29uZmlnIiwiRGVmYXVsdENvbmZpZyIsImlzT2JqZWN0IiwiYWRkRXZlbnRIYW5kbGVyIiwiZG9tRXZlbnQiLCJzZWxlY3RvciIsImVsZW1lbnRzIiwiaGFuZGxlciIsInRpbWVvdXRIYW5kbGVyIiwiZWxlbWVudCIsImhyZWYiLCJzdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiVGltZW91dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJjaGFyYWN0ZXIiLCJ0b0xvd2VyQ2FzZSIsInJlZHVjZSIsImIiLCJjaGFyQ29kZUF0IiwiY3JlYXRlUHJvZHVjdCIsInNrdSIsInByaWNlIiwicXVhbnRpdHkiLCJicmFuZCIsInZhcmlhbnQiLCJjb3Vwb25Db2RlIiwiY3JlYXRlUHJvbW90aW9uIiwiY3JlYXRpdmUiLCJjcmVhdGVJbXByZXNzaW9uIiwiY3JlYXRlVHJhbnNhY3Rpb25BdHRyaWJ1dGVzIiwiYWZmaWxpYXRpb24iLCJyZXZlbnVlIiwic2hpcHBpbmciLCJ0YXgiLCJUcmFuc2FjdGlvbklkUmVxdWlyZWQiLCJjYWxsU2V0VXNlckF0dHJpYnV0ZU9uRm9yd2FyZGVycyIsInNldFVzZXJBdHRyaWJ1dGUiLCJmaW5kS2V5SW5PYmplY3QiLCJpc1ZhbGlkQXR0cmlidXRlVmFsdWUiLCJzYW5pdGl6ZWRBdHRycyIsImdldE5hbWUiLCJOYXZpZ2F0aW9uIiwiU2VhcmNoIiwiVXNlckNvbnRlbnQiLCJVc2VyUHJlZmVyZW5jZSIsIlNvY2lhbCIsIk1lZGlhIiwiUHJvZHVjdENoZWNrb3V0T3B0aW9uIiwiSWRlbnRpdHlUeXBlIiwiaWRlbnRpdHlUeXBlIiwiQ3VzdG9tZXJJZCIsIkZhY2Vib29rIiwiVHdpdHRlciIsIkdvb2dsZSIsIk1pY3Jvc29mdCIsIllhaG9vIiwiRW1haWwiLCJBbGlhcyIsIkZhY2Vib29rQ3VzdG9tQXVkaWVuY2VJZCIsIkNoZWNrb3V0T3B0aW9uIiwidG9rZW4iLCJTdGFydGluZ0luaXRpYWxpemF0aW9uIiwiZ2V0Q29va2llIiwiZW5kU2Vzc2lvbiIsImJhYmVsSGVscGVycy50eXBlb2YiLCJmIiwidmVyc2lvbiIsImxhdCIsImxuZyIsInVzZXJJZGVudGl0eSIsInJlbW92ZVVzZXJJZGVudGl0eSIsIlNldFVzZXJJZGVudGl0eSIsInNldFVzZXJJZGVudGl0eSIsImZvdW5kSWRlbnRpdHkiLCJpZGVudGl0eSIsIklkZW50aXR5IiwiUmVtb3ZlVXNlcklkZW50aXR5IiwiU3RhcnRpbmdOZXdTZXNzaW9uIiwiU2Vzc2lvblN0YXJ0IiwiQWJhbmRvblN0YXJ0U2Vzc2lvbiIsIlN0YXJ0aW5nRW5kU2Vzc2lvbiIsIk5vU2Vzc2lvblRvRW5kIiwiU2Vzc2lvbkVuZCIsIkFiYW5kb25FbmRTZXNzaW9uIiwiZXZlbnRJbmZvIiwiRXZlbnROYW1lSW52YWxpZFR5cGUiLCJMb2dnaW5nRGlzYWJsZWQiLCJTZXNzaW9uVGltZW91dCIsImVycm9yIiwiQ3Jhc2hSZXBvcnQiLCJtZXNzYWdlIiwic3RhY2siLCJwYXRobmFtZSIsImhvc3RuYW1lIiwidGl0bGUiLCJwcm9kdWN0QmFnTmFtZSIsIkFkZFRvUHJvZHVjdEJhZyIsImluZGV4IiwiUmVtb3ZlRnJvbVByb2R1Y3RCYWciLCJDbGVhclByb2R1Y3RCYWciLCJhcnJheUNvcHkiLCJjYXJ0SW5kZXgiLCJjYXJ0SXRlbSIsIkNsZWFyQ2FydCIsImNvZGUiLCJjb3Vwb24iLCJwYXltZW50TWV0aG9kIiwiY2xlYXJDYXJ0IiwiZUNvbW1lcmNlIiwiQ2FydCIsImNsZWFyIiwicHJvZHVjdE5hbWUiLCJwcm9kdWN0U0tVIiwicHJvZHVjdFVuaXRQcmljZSIsInByb2R1Y3RRdWFudGl0eSIsInByb2R1Y3RDYXRlZ29yeSIsInJldmVudWVBbW91bnQiLCJ0YXhBbW91bnQiLCJzaGlwcGluZ0Ftb3VudCIsInRyYW5zYWN0aW9uSWQiLCIkTWV0aG9kTmFtZSIsIlByb2R1Y3ROYW1lIiwiUHJvZHVjdFNLVSIsIlByb2R1Y3RVbml0UHJpY2UiLCJQcm9kdWN0UXVhbnRpdHkiLCJQcm9kdWN0Q2F0ZWdvcnkiLCJSZXZlbnVlQW1vdW50IiwiVHJhbnNhY3Rpb25BZmZpbGlhdGlvbiIsIlRyYW5zYWN0aW9uSUQiLCJhbW91bnQiLCJ0YWdOYW1lIiwiZXhpc3RpbmdQcm9wIiwiUmVtb3ZlVXNlclRhZyIsIkJhZEF0dHJpYnV0ZSIsIlNldFVzZXJBdHRyaWJ1dGUiLCJSZW1vdmVVc2VyQXR0cmlidXRlIiwiU2V0VXNlckF0dHJpYnV0ZUxpc3QiLCJSZW1vdmVBbGxVc2VyQXR0cmlidXRlcyIsInVzZXJBdHRyaWJ1dGVMaXN0cyIsInVzZXJBdHRyaWJ1dGVzQ29weSIsIlNldFNlc3Npb25BdHRyaWJ1dGUiLCJpc09wdGluZ091dCIsInNldE9wdE91dCIsIkxvZ091dCIsImxvZ091dCIsImZvcndhcmRlclByb2Nlc3NvciIsIm5ld0ZvcndhcmRlciIsIm1vZHVsZUlkIiwiaGFzRGVidWdTdHJpbmciLCJycSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUFNQTt5QkFDUzs7Ozs7O2tDQUlKQyxJQUFJQyxVQUFVO2dCQUNiQyxHQUFKOztnQkFFSTtzQkFDTSxJQUFJQyxPQUFPQyxjQUFYLEVBQU47YUFESixDQUdBLE9BQU9DLENBQVAsRUFBVTt5QkFDRyx1Q0FBVDs7O2dCQUdBSCxPQUFPRixFQUFQLElBQWEscUJBQXFCRSxHQUF0QyxFQUEyQztvQkFDbkNJLGtCQUFKLEdBQXlCTixFQUF6QjthQURKLE1BR0ssSUFBSSxPQUFPRyxPQUFPSSxjQUFkLElBQWdDLFdBQXBDLEVBQWlEO3lCQUN6QyxnQ0FBVDs7b0JBRUk7MEJBQ00sSUFBSUosT0FBT0ksY0FBWCxFQUFOO3dCQUNJQyxNQUFKLEdBQWFSLEVBQWI7aUJBRkosQ0FJQSxPQUFPSyxDQUFQLEVBQVU7NkJBQ0csc0NBQVQ7Ozs7bUJBSURILEdBQVA7Ozs7eUNBR2FPLGVBQWVDLGtCQUFrQkMsWUFBWUMsVUFBVTttQkFDN0RILGlCQUFrQk4sT0FBT1UsUUFBUCxDQUFnQkMsUUFBaEIsS0FBNkIsUUFBOUIsR0FDckJKLGdCQURxQixHQUNGQyxVQURmLElBQzZCQyxRQURwQzs7OztnQ0FJSUcsT0FBT0MsTUFBTTtnQkFDYkMsU0FBU0YsTUFBTUcsU0FBTixDQUFnQkYsSUFBaEIsQ0FBYjttQkFDT0MsV0FBVyxDQUFDLENBQW5COzs7O29DQUdRRSxXQUFXO21FQUNtQ0MsSUFBL0MsQ0FBb0RELFVBQVVFLFNBQTlEOzs7OzswQ0FHT0YsV0FBVzttQkFDakJoQixPQUFPbUIsUUFBUCxJQUFtQixPQUFRbkIsT0FBT21CLFFBQVAsQ0FBZ0JD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
